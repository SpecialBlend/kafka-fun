!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=57)}([function(t,e){t.exports=require("util")},function(t,e,n){"use strict";var r={NUMBER:"number",UNDEFINED:"undefined",STRING:"string",BOOLEAN:"boolean",OBJECT:"object",FUNCTION:"function",NULL:"null",ARRAY:"array",REGEXP:"regexp",DATE:"date",ERROR:"error",ARGUMENTS:"arguments",SYMBOL:"symbol",ARRAY_BUFFER:"array-buffer",TYPED_ARRAY:"typed-array",DATA_VIEW:"data-view",MAP:"map",SET:"set",WEAK_SET:"weak-set",WEAK_MAP:"weak-map",PROMISE:"promise",BUFFER:"buffer",HTML_ELEMENT:"html-element",HTML_ELEMENT_TEXT:"html-element-text",DOCUMENT:"document",WINDOW:"window",FILE:"file",FILE_LIST:"file-list",BLOB:"blob",HOST:"host",XHR:"xhr",SIMD:"simd"};function i(t,e,n){if(!t)throw new Error("Type class must be initialized at least with `type` information");this.type=t,this.cls=e,this.sub=n}i.prototype={toString:function(t){t=t||";";var e=[this.type];return this.cls&&e.push(this.cls),this.sub&&e.push(this.sub),e.join(t)},toTryTypes:function(){var t=[];return this.sub&&t.push(new i(this.type,this.cls,this.sub)),this.cls&&t.push(new i(this.type,this.cls)),t.push(new i(this.type)),t}};var o=Object.prototype.toString;function s(){this.checks=[]}s.prototype={add:function(t){return this.checks.push(t),this},addBeforeFirstMatch:function(t,e){var n=this.getFirstMatch(t);n?this.checks.splice(n.index,0,e):this.add(e)},addTypeOf:function(t,e){return this.add(function(n,r){if(r===t)return new i(e)})},addClass:function(t,e,n){return this.add(function(o,s,a){if(a===t)return new i(r.OBJECT,e,n)})},getFirstMatch:function(t){for(var e=typeof t,n=o.call(t),r=0,i=this.checks.length;r<i;r++){var s=this.checks[r].call(this,t,e,n);if(void 0!==s)return{result:s,func:this.checks[r],index:r}}},getType:function(t){var e=this.getFirstMatch(t);return e&&e.result}};var a=new s;function u(t){return a.getType(t)}a.addTypeOf(r.NUMBER,r.NUMBER).addTypeOf(r.UNDEFINED,r.UNDEFINED).addTypeOf(r.STRING,r.STRING).addTypeOf(r.BOOLEAN,r.BOOLEAN).addTypeOf(r.FUNCTION,r.FUNCTION).addTypeOf(r.SYMBOL,r.SYMBOL).add(function(t){if(null===t)return new i(r.NULL)}).addClass("[object String]",r.STRING).addClass("[object Boolean]",r.BOOLEAN).addClass("[object Number]",r.NUMBER).addClass("[object Array]",r.ARRAY).addClass("[object RegExp]",r.REGEXP).addClass("[object Error]",r.ERROR).addClass("[object Date]",r.DATE).addClass("[object Arguments]",r.ARGUMENTS).addClass("[object ArrayBuffer]",r.ARRAY_BUFFER).addClass("[object Int8Array]",r.TYPED_ARRAY,"int8").addClass("[object Uint8Array]",r.TYPED_ARRAY,"uint8").addClass("[object Uint8ClampedArray]",r.TYPED_ARRAY,"uint8clamped").addClass("[object Int16Array]",r.TYPED_ARRAY,"int16").addClass("[object Uint16Array]",r.TYPED_ARRAY,"uint16").addClass("[object Int32Array]",r.TYPED_ARRAY,"int32").addClass("[object Uint32Array]",r.TYPED_ARRAY,"uint32").addClass("[object Float32Array]",r.TYPED_ARRAY,"float32").addClass("[object Float64Array]",r.TYPED_ARRAY,"float64").addClass("[object Bool16x8]",r.SIMD,"bool16x8").addClass("[object Bool32x4]",r.SIMD,"bool32x4").addClass("[object Bool8x16]",r.SIMD,"bool8x16").addClass("[object Float32x4]",r.SIMD,"float32x4").addClass("[object Int16x8]",r.SIMD,"int16x8").addClass("[object Int32x4]",r.SIMD,"int32x4").addClass("[object Int8x16]",r.SIMD,"int8x16").addClass("[object Uint16x8]",r.SIMD,"uint16x8").addClass("[object Uint32x4]",r.SIMD,"uint32x4").addClass("[object Uint8x16]",r.SIMD,"uint8x16").addClass("[object DataView]",r.DATA_VIEW).addClass("[object Map]",r.MAP).addClass("[object WeakMap]",r.WEAK_MAP).addClass("[object Set]",r.SET).addClass("[object WeakSet]",r.WEAK_SET).addClass("[object Promise]",r.PROMISE).addClass("[object Blob]",r.BLOB).addClass("[object File]",r.FILE).addClass("[object FileList]",r.FILE_LIST).addClass("[object XMLHttpRequest]",r.XHR).add(function(t){if(typeof Promise===r.FUNCTION&&t instanceof Promise||typeof t.then===r.FUNCTION)return new i(r.OBJECT,r.PROMISE)}).add(function(t){if("undefined"!=typeof Buffer&&t instanceof Buffer)return new i(r.OBJECT,r.BUFFER)}).add(function(t){if("undefined"!=typeof Node&&t instanceof Node)return new i(r.OBJECT,r.HTML_ELEMENT,t.nodeName)}).add(function(t){if(t.Boolean===Boolean&&t.Number===Number&&t.String===String&&t.Date===Date)return new i(r.OBJECT,r.HOST)}).add(function(){return new i(r.OBJECT)}),u.checker=a,u.TypeChecker=s,u.Type=i,Object.keys(r).forEach(function(t){u[t]=r[t]}),t.exports=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(7),o=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r;function s(t){this._obj=t}function a(){this._typeAdaptors=[],this._iterableTypes={}}s.prototype={__shouldIterator__:!0,next:function(){if(this._done)throw new Error("Iterator already reached the end");this._keys||(this._keys=Object.keys(this._obj),this._index=0);var t=this._keys[this._index];return this._done=this._index===this._keys.length,this._index+=1,{value:this._done?void 0:[t,this._obj[t]],done:this._done}}},"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(s.prototype[Symbol.iterator]=function(){return this}),a.prototype={add:function(t,e,n,r){return this.addType(new o.Type(t,e,n),r)},addType:function(t,e){this._typeAdaptors[t.toString()]=e},getAdaptor:function(t,e){for(var n=t.toTryTypes();n.length;){var r=n.shift(),i=this._typeAdaptors[r];if(i&&i[e])return i[e]}},requireAdaptor:function(t,e){var n=this.getAdaptor(t,e);if(!n)throw new Error("There is no type adaptor `"+e+"` for "+t.toString());return n},addIterableType:function(t){this._iterableTypes[t.toString()]=!0},isIterableType:function(t){return!!this._iterableTypes[t.toString()]}};var u=new a,c={forEach:function(t,e,n){for(var r in t)if(i.hasOwnProperty(t,r)&&i.propertyIsEnumerable(t,r)&&!1===e.call(n,t[r],r,t))return},has:function(t,e){return i.hasOwnProperty(t,e)},get:function(t,e){return t[e]},iterator:function(t){return new s(t)}};u.addType(new o.Type(o.OBJECT),c),u.addType(new o.Type(o.FUNCTION),c);var f={has:function(t,e){return t.has(e)},get:function(t,e){return t.get(e)},forEach:function(t,e,n){h(t.entries(),function(r){return e.call(n,r[1],r[0],t)})},size:function(t){return t.size},isEmpty:function(t){return 0===t.size},iterator:function(t){return t.entries()}},l=i.merge({},f);function h(t,e,n){if(i.isGeneratorFunction(t))return h(t(),e,n);if(i.isIterator(t))for(var r=t.next();!r.done;){if(!1===e.call(n,r.value,"value",t))return;r=t.next()}else{var s=o(t);u.requireAdaptor(s,"forEach")(t,e,n)}}l.get=function(t,e){if(t.has(e))return e},l.iterator=function(t){return t.values()},u.addType(new o.Type(o.OBJECT,o.MAP),f),u.addType(new o.Type(o.OBJECT,o.SET),l),u.addType(new o.Type(o.OBJECT,o.WEAK_SET),l),u.addType(new o.Type(o.OBJECT,o.WEAK_MAP),f),u.addType(new o.Type(o.STRING),{isEmpty:function(t){return""===t},size:function(t){return t.length}}),u.addIterableType(new o.Type(o.OBJECT,o.ARRAY)),u.addIterableType(new o.Type(o.OBJECT,o.ARGUMENTS)),u.addIterableType(new o.Type(o.OBJECT,o.SET)),e.defaultTypeAdaptorStorage=u,e.forEach=h,e.size=function(t){var e=o(t),n=u.getAdaptor(e,"size");if(n)return n(t);var r=0;return h(t,function(){r+=1}),r},e.isEmpty=function(t){var e=o(t),n=u.getAdaptor(e,"isEmpty");if(n)return n(t);var r=!0;return h(t,function(){return r=!1,!1}),r},e.has=function(t,e){var n=o(t);return u.requireAdaptor(n,"has")(t,e)},e.get=function(t,e){var n=o(t);return u.requireAdaptor(n,"get")(t,e)},e.reduce=function(t,e,n){var r=n;return h(t,function(n,i){r=e(r,n,i,t)}),r},e.some=function(t,e,n){var r=!1;return h(t,function(i,o){if(e.call(n,i,o,t))return r=!0,!1},n),r},e.every=function(t,e,n){var r=!0;return h(t,function(i,o){if(!e.call(n,i,o,t))return r=!1,!1},n),r},e.isIterable=function(t){return u.isIterableType(o(t))},e.iterator=function(t){return u.requireAdaptor(o(t),"iterator")(t)}},function(t,e,n){(function(t){var r;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var i,o=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",u="__lodash_hash_undefined__",c=500,f="__lodash_placeholder__",l=1,h=2,p=4,d=1,g=2,y=1,m=2,b=4,v=8,w=16,_=32,E=64,k=128,I=256,T=512,O=30,S="...",C=800,B=16,R=1,j=2,A=1/0,x=9007199254740991,M=1.7976931348623157e308,N=NaN,P=4294967295,q=P-1,L=P>>>1,F=[["ary",k],["bind",y],["bindKey",m],["curry",v],["curryRight",w],["flip",T],["partial",_],["partialRight",E],["rearg",I]],D="[object Arguments]",U="[object Array]",G="[object AsyncFunction]",z="[object Boolean]",V="[object Date]",W="[object DOMException]",$="[object Error]",H="[object Function]",J="[object GeneratorFunction]",Y="[object Map]",Z="[object Number]",K="[object Null]",Q="[object Object]",X="[object Proxy]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object Symbol]",it="[object Undefined]",ot="[object WeakMap]",st="[object WeakSet]",at="[object ArrayBuffer]",ut="[object DataView]",ct="[object Float32Array]",ft="[object Float64Array]",lt="[object Int8Array]",ht="[object Int16Array]",pt="[object Int32Array]",dt="[object Uint8Array]",gt="[object Uint8ClampedArray]",yt="[object Uint16Array]",mt="[object Uint32Array]",bt=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39);/g,Et=/[&<>"']/g,kt=RegExp(_t.source),It=RegExp(Et.source),Tt=/<%-([\s\S]+?)%>/g,Ot=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Bt=/^\w*$/,Rt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(jt.source),xt=/^\s+|\s+$/g,Mt=/^\s+/,Nt=/\s+$/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qt=/\{\n\/\* \[wrapped with (.+)\] \*/,Lt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Dt=/\\(\\)?/g,Ut=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gt=/\w*$/,zt=/^[-+]0x[0-9a-f]+$/i,Vt=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,$t=/^0o[0-7]+$/i,Ht=/^(?:0|[1-9]\d*)$/,Jt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Kt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xt="[\\ud800-\\udfff]",te="["+Qt+"]",ee="["+Kt+"]",ne="\\d+",re="[\\u2700-\\u27bf]",ie="[a-z\\xdf-\\xf6\\xf8-\\xff]",oe="[^\\ud800-\\udfff"+Qt+ne+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",se="\\ud83c[\\udffb-\\udfff]",ae="[^\\ud800-\\udfff]",ue="(?:\\ud83c[\\udde6-\\uddff]){2}",ce="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="[A-Z\\xc0-\\xd6\\xd8-\\xde]",le="(?:"+ie+"|"+oe+")",he="(?:"+fe+"|"+oe+")",pe="(?:"+ee+"|"+se+")"+"?",de="[\\ufe0e\\ufe0f]?"+pe+("(?:\\u200d(?:"+[ae,ue,ce].join("|")+")[\\ufe0e\\ufe0f]?"+pe+")*"),ge="(?:"+[re,ue,ce].join("|")+")"+de,ye="(?:"+[ae+ee+"?",ee,ue,ce,Xt].join("|")+")",me=RegExp("['’]","g"),be=RegExp(ee,"g"),ve=RegExp(se+"(?="+se+")|"+ye+de,"g"),we=RegExp([fe+"?"+ie+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[te,fe,"$"].join("|")+")",he+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[te,fe+le,"$"].join("|")+")",fe+"?"+le+"+(?:['’](?:d|ll|m|re|s|t|ve))?",fe+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ne,ge].join("|"),"g"),_e=RegExp("[\\u200d\\ud800-\\udfff"+Kt+"\\ufe0e\\ufe0f]"),Ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ke=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ie=-1,Te={};Te[ct]=Te[ft]=Te[lt]=Te[ht]=Te[pt]=Te[dt]=Te[gt]=Te[yt]=Te[mt]=!0,Te[D]=Te[U]=Te[at]=Te[z]=Te[ut]=Te[V]=Te[$]=Te[H]=Te[Y]=Te[Z]=Te[Q]=Te[tt]=Te[et]=Te[nt]=Te[ot]=!1;var Oe={};Oe[D]=Oe[U]=Oe[at]=Oe[ut]=Oe[z]=Oe[V]=Oe[ct]=Oe[ft]=Oe[lt]=Oe[ht]=Oe[pt]=Oe[Y]=Oe[Z]=Oe[Q]=Oe[tt]=Oe[et]=Oe[nt]=Oe[rt]=Oe[dt]=Oe[gt]=Oe[yt]=Oe[mt]=!0,Oe[$]=Oe[H]=Oe[ot]=!1;var Se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ce=parseFloat,Be=parseInt,Re="object"==typeof global&&global&&global.Object===Object&&global,je="object"==typeof self&&self&&self.Object===Object&&self,Ae=Re||je||Function("return this")(),xe=e&&!e.nodeType&&e,Me=xe&&"object"==typeof t&&t&&!t.nodeType&&t,Ne=Me&&Me.exports===xe,Pe=Ne&&Re.process,qe=function(){try{var t=Me&&Me.require&&Me.require("util").types;return t||Pe&&Pe.binding&&Pe.binding("util")}catch(t){}}(),Le=qe&&qe.isArrayBuffer,Fe=qe&&qe.isDate,De=qe&&qe.isMap,Ue=qe&&qe.isRegExp,Ge=qe&&qe.isSet,ze=qe&&qe.isTypedArray;function Ve(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function We(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function $e(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function He(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Je(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ye(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ze(t,e){return!!(null==t?0:t.length)&&an(t,e,0)>-1}function Ke(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Qe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Xe(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function tn(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function en(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function nn(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var rn=ln("length");function on(t,e,n){var r;return n(t,function(t,n,i){if(e(t,n,i))return r=n,!1}),r}function sn(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function an(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):sn(t,cn,n)}function un(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function cn(t){return t!=t}function fn(t,e){var n=null==t?0:t.length;return n?dn(t,e)/n:N}function ln(t){return function(e){return null==e?i:e[t]}}function hn(t){return function(e){return null==t?i:t[e]}}function pn(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function dn(t,e){for(var n,r=-1,o=t.length;++r<o;){var s=e(t[r]);s!==i&&(n=n===i?s:n+s)}return n}function gn(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function yn(t){return function(e){return t(e)}}function mn(t,e){return Qe(e,function(e){return t[e]})}function bn(t,e){return t.has(e)}function vn(t,e){for(var n=-1,r=t.length;++n<r&&an(e,t[n],0)>-1;);return n}function wn(t,e){for(var n=t.length;n--&&an(e,t[n],0)>-1;);return n}var _n=hn({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),En=hn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function kn(t){return"\\"+Se[t]}function In(t){return _e.test(t)}function Tn(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function On(t,e){return function(n){return t(e(n))}}function Sn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==f||(t[n]=f,o[i++]=n)}return o}function Cn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function Bn(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function Rn(t){return In(t)?function(t){var e=ve.lastIndex=0;for(;ve.test(t);)++e;return e}(t):rn(t)}function jn(t){return In(t)?function(t){return t.match(ve)||[]}(t):function(t){return t.split("")}(t)}var An=hn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var xn=function t(e){var n,r=(e=null==e?Ae:xn.defaults(Ae.Object(),e,xn.pick(Ae,ke))).Array,Kt=e.Date,Qt=e.Error,Xt=e.Function,te=e.Math,ee=e.Object,ne=e.RegExp,re=e.String,ie=e.TypeError,oe=r.prototype,se=Xt.prototype,ae=ee.prototype,ue=e["__core-js_shared__"],ce=se.toString,fe=ae.hasOwnProperty,le=0,he=(n=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",pe=ae.toString,de=ce.call(ee),ge=Ae._,ye=ne("^"+ce.call(fe).replace(jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ve=Ne?e.Buffer:i,_e=e.Symbol,Se=e.Uint8Array,Re=ve?ve.allocUnsafe:i,je=On(ee.getPrototypeOf,ee),xe=ee.create,Me=ae.propertyIsEnumerable,Pe=oe.splice,qe=_e?_e.isConcatSpreadable:i,rn=_e?_e.iterator:i,hn=_e?_e.toStringTag:i,Mn=function(){try{var t=Fo(ee,"defineProperty");return t({},"",{}),t}catch(t){}}(),Nn=e.clearTimeout!==Ae.clearTimeout&&e.clearTimeout,Pn=Kt&&Kt.now!==Ae.Date.now&&Kt.now,qn=e.setTimeout!==Ae.setTimeout&&e.setTimeout,Ln=te.ceil,Fn=te.floor,Dn=ee.getOwnPropertySymbols,Un=ve?ve.isBuffer:i,Gn=e.isFinite,zn=oe.join,Vn=On(ee.keys,ee),Wn=te.max,$n=te.min,Hn=Kt.now,Jn=e.parseInt,Yn=te.random,Zn=oe.reverse,Kn=Fo(e,"DataView"),Qn=Fo(e,"Map"),Xn=Fo(e,"Promise"),tr=Fo(e,"Set"),er=Fo(e,"WeakMap"),nr=Fo(ee,"create"),rr=er&&new er,ir={},or=ls(Kn),sr=ls(Qn),ar=ls(Xn),ur=ls(tr),cr=ls(er),fr=_e?_e.prototype:i,lr=fr?fr.valueOf:i,hr=fr?fr.toString:i;function pr(t){if(Ca(t)&&!ma(t)&&!(t instanceof mr)){if(t instanceof yr)return t;if(fe.call(t,"__wrapped__"))return hs(t)}return new yr(t)}var dr=function(){function t(){}return function(e){if(!Sa(e))return{};if(xe)return xe(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function gr(){}function yr(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function mr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=P,this.__views__=[]}function br(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function vr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wr(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wr;++e<n;)this.add(t[e])}function Er(t){var e=this.__data__=new vr(t);this.size=e.size}function kr(t,e){var n=ma(t),r=!n&&ya(t),i=!n&&!r&&_a(t),o=!n&&!r&&!i&&Pa(t),s=n||r||i||o,a=s?gn(t.length,re):[],u=a.length;for(var c in t)!e&&!fe.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||$o(c,u))||a.push(c);return a}function Ir(t){var e=t.length;return e?t[_i(0,e-1)]:i}function Tr(t,e){return us(no(t),Mr(e,0,t.length))}function Or(t){return us(no(t))}function Sr(t,e,n){(n===i||pa(t[e],n))&&(n!==i||e in t)||Ar(t,e,n)}function Cr(t,e,n){var r=t[e];fe.call(t,e)&&pa(r,n)&&(n!==i||e in t)||Ar(t,e,n)}function Br(t,e){for(var n=t.length;n--;)if(pa(t[n][0],e))return n;return-1}function Rr(t,e,n,r){return Fr(t,function(t,i,o){e(r,t,n(t),o)}),r}function jr(t,e){return t&&ro(e,iu(e),t)}function Ar(t,e,n){"__proto__"==e&&Mn?Mn(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function xr(t,e){for(var n=-1,o=e.length,s=r(o),a=null==t;++n<o;)s[n]=a?i:Xa(t,e[n]);return s}function Mr(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function Nr(t,e,n,r,o,s){var a,u=e&l,c=e&h,f=e&p;if(n&&(a=o?n(t,r,o,s):n(t)),a!==i)return a;if(!Sa(t))return t;var d=ma(t);if(d){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&fe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return no(t,a)}else{var g=Go(t),y=g==H||g==J;if(_a(t))return Zi(t,u);if(g==Q||g==D||y&&!o){if(a=c||y?{}:Vo(t),!u)return c?function(t,e){return ro(t,Uo(t),e)}(t,function(t,e){return t&&ro(e,ou(e),t)}(a,t)):function(t,e){return ro(t,Do(t),e)}(t,jr(a,t))}else{if(!Oe[g])return o?t:{};a=function(t,e,n){var r,i,o,s=t.constructor;switch(e){case at:return Ki(t);case z:case V:return new s(+t);case ut:return function(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case ct:case ft:case lt:case ht:case pt:case dt:case gt:case yt:case mt:return Qi(t,n);case Y:return new s;case Z:case nt:return new s(t);case tt:return(o=new(i=t).constructor(i.source,Gt.exec(i))).lastIndex=i.lastIndex,o;case et:return new s;case rt:return r=t,lr?ee(lr.call(r)):{}}}(t,g,u)}}s||(s=new Er);var m=s.get(t);if(m)return m;if(s.set(t,a),xa(t))return t.forEach(function(r){a.add(Nr(r,e,n,r,t,s))}),a;if(Ba(t))return t.forEach(function(r,i){a.set(i,Nr(r,e,n,i,t,s))}),a;var b=d?i:(f?c?Ao:jo:c?ou:iu)(t);return $e(b||t,function(r,i){b&&(r=t[i=r]),Cr(a,i,Nr(r,e,n,i,t,s))}),a}function Pr(t,e,n){var r=n.length;if(null==t)return!r;for(t=ee(t);r--;){var o=n[r],s=e[o],a=t[o];if(a===i&&!(o in t)||!s(a))return!1}return!0}function qr(t,e,n){if("function"!=typeof t)throw new ie(a);return is(function(){t.apply(i,n)},e)}function Lr(t,e,n,r){var i=-1,s=Ze,a=!0,u=t.length,c=[],f=e.length;if(!u)return c;n&&(e=Qe(e,yn(n))),r?(s=Ke,a=!1):e.length>=o&&(s=bn,a=!1,e=new _r(e));t:for(;++i<u;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var p=f;p--;)if(e[p]===h)continue t;c.push(l)}else s(e,h,r)||c.push(l)}return c}pr.templateSettings={escape:Tt,evaluate:Ot,interpolate:St,variable:"",imports:{_:pr}},pr.prototype=gr.prototype,pr.prototype.constructor=pr,yr.prototype=dr(gr.prototype),yr.prototype.constructor=yr,mr.prototype=dr(gr.prototype),mr.prototype.constructor=mr,br.prototype.clear=function(){this.__data__=nr?nr(null):{},this.size=0},br.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},br.prototype.get=function(t){var e=this.__data__;if(nr){var n=e[t];return n===u?i:n}return fe.call(e,t)?e[t]:i},br.prototype.has=function(t){var e=this.__data__;return nr?e[t]!==i:fe.call(e,t)},br.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nr&&e===i?u:e,this},vr.prototype.clear=function(){this.__data__=[],this.size=0},vr.prototype.delete=function(t){var e=this.__data__,n=Br(e,t);return!(n<0||(n==e.length-1?e.pop():Pe.call(e,n,1),--this.size,0))},vr.prototype.get=function(t){var e=this.__data__,n=Br(e,t);return n<0?i:e[n][1]},vr.prototype.has=function(t){return Br(this.__data__,t)>-1},vr.prototype.set=function(t,e){var n=this.__data__,r=Br(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},wr.prototype.clear=function(){this.size=0,this.__data__={hash:new br,map:new(Qn||vr),string:new br}},wr.prototype.delete=function(t){var e=qo(this,t).delete(t);return this.size-=e?1:0,e},wr.prototype.get=function(t){return qo(this,t).get(t)},wr.prototype.has=function(t){return qo(this,t).has(t)},wr.prototype.set=function(t,e){var n=qo(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},_r.prototype.add=_r.prototype.push=function(t){return this.__data__.set(t,u),this},_r.prototype.has=function(t){return this.__data__.has(t)},Er.prototype.clear=function(){this.__data__=new vr,this.size=0},Er.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Er.prototype.get=function(t){return this.__data__.get(t)},Er.prototype.has=function(t){return this.__data__.has(t)},Er.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vr){var r=n.__data__;if(!Qn||r.length<o-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wr(r)}return n.set(t,e),this.size=n.size,this};var Fr=so(Hr),Dr=so(Jr,!0);function Ur(t,e){var n=!0;return Fr(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Gr(t,e,n){for(var r=-1,o=t.length;++r<o;){var s=t[r],a=e(s);if(null!=a&&(u===i?a==a&&!Na(a):n(a,u)))var u=a,c=s}return c}function zr(t,e){var n=[];return Fr(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Vr(t,e,n,r,i){var o=-1,s=t.length;for(n||(n=Wo),i||(i=[]);++o<s;){var a=t[o];e>0&&n(a)?e>1?Vr(a,e-1,n,r,i):Xe(i,a):r||(i[i.length]=a)}return i}var Wr=ao(),$r=ao(!0);function Hr(t,e){return t&&Wr(t,e,iu)}function Jr(t,e){return t&&$r(t,e,iu)}function Yr(t,e){return Ye(e,function(e){return Ia(t[e])})}function Zr(t,e){for(var n=0,r=(e=$i(e,t)).length;null!=t&&n<r;)t=t[fs(e[n++])];return n&&n==r?t:i}function Kr(t,e,n){var r=e(t);return ma(t)?r:Xe(r,n(t))}function Qr(t){return null==t?t===i?it:K:hn&&hn in ee(t)?function(t){var e=fe.call(t,hn),n=t[hn];try{t[hn]=i;var r=!0}catch(t){}var o=pe.call(t);return r&&(e?t[hn]=n:delete t[hn]),o}(t):function(t){return pe.call(t)}(t)}function Xr(t,e){return t>e}function ti(t,e){return null!=t&&fe.call(t,e)}function ei(t,e){return null!=t&&e in ee(t)}function ni(t,e,n){for(var o=n?Ke:Ze,s=t[0].length,a=t.length,u=a,c=r(a),f=1/0,l=[];u--;){var h=t[u];u&&e&&(h=Qe(h,yn(e))),f=$n(h.length,f),c[u]=!n&&(e||s>=120&&h.length>=120)?new _r(u&&h):i}h=t[0];var p=-1,d=c[0];t:for(;++p<s&&l.length<f;){var g=h[p],y=e?e(g):g;if(g=n||0!==g?g:0,!(d?bn(d,y):o(l,y,n))){for(u=a;--u;){var m=c[u];if(!(m?bn(m,y):o(t[u],y,n)))continue t}d&&d.push(y),l.push(g)}}return l}function ri(t,e,n){var r=null==(t=es(t,e=$i(e,t)))?t:t[fs(ks(e))];return null==r?i:Ve(r,t,n)}function ii(t){return Ca(t)&&Qr(t)==D}function oi(t,e,n,r,o){return t===e||(null==t||null==e||!Ca(t)&&!Ca(e)?t!=t&&e!=e:function(t,e,n,r,o,s){var a=ma(t),u=ma(e),c=a?U:Go(t),f=u?U:Go(e),l=(c=c==D?Q:c)==Q,h=(f=f==D?Q:f)==Q,p=c==f;if(p&&_a(t)){if(!_a(e))return!1;a=!0,l=!1}if(p&&!l)return s||(s=new Er),a||Pa(t)?Bo(t,e,n,r,o,s):function(t,e,n,r,i,o,s){switch(n){case ut:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case at:return!(t.byteLength!=e.byteLength||!o(new Se(t),new Se(e)));case z:case V:case Z:return pa(+t,+e);case $:return t.name==e.name&&t.message==e.message;case tt:case nt:return t==e+"";case Y:var a=Tn;case et:var u=r&d;if(a||(a=Cn),t.size!=e.size&&!u)return!1;var c=s.get(t);if(c)return c==e;r|=g,s.set(t,e);var f=Bo(a(t),a(e),r,i,o,s);return s.delete(t),f;case rt:if(lr)return lr.call(t)==lr.call(e)}return!1}(t,e,c,n,r,o,s);if(!(n&d)){var y=l&&fe.call(t,"__wrapped__"),m=h&&fe.call(e,"__wrapped__");if(y||m){var b=y?t.value():t,v=m?e.value():e;return s||(s=new Er),o(b,v,n,r,s)}}return!!p&&(s||(s=new Er),function(t,e,n,r,o,s){var a=n&d,u=jo(t),c=u.length,f=jo(e).length;if(c!=f&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in e:fe.call(e,h)))return!1}var p=s.get(t);if(p&&s.get(e))return p==e;var g=!0;s.set(t,e),s.set(e,t);for(var y=a;++l<c;){h=u[l];var m=t[h],b=e[h];if(r)var v=a?r(b,m,h,e,t,s):r(m,b,h,t,e,s);if(!(v===i?m===b||o(m,b,n,r,s):v)){g=!1;break}y||(y="constructor"==h)}if(g&&!y){var w=t.constructor,_=e.constructor;w!=_&&"constructor"in t&&"constructor"in e&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(g=!1)}return s.delete(t),s.delete(e),g}(t,e,n,r,o,s))}(t,e,n,r,oi,o))}function si(t,e,n,r){var o=n.length,s=o,a=!r;if(null==t)return!s;for(t=ee(t);o--;){var u=n[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<s;){var c=(u=n[o])[0],f=t[c],l=u[1];if(a&&u[2]){if(f===i&&!(c in t))return!1}else{var h=new Er;if(r)var p=r(f,l,c,t,e,h);if(!(p===i?oi(l,f,d|g,r,h):p))return!1}}return!0}function ai(t){return!(!Sa(t)||(e=t,he&&he in e))&&(Ia(t)?ye:Wt).test(ls(t));var e}function ui(t){return"function"==typeof t?t:null==t?Ru:"object"==typeof t?ma(t)?di(t[0],t[1]):pi(t):Fu(t)}function ci(t){if(!Ko(t))return Vn(t);var e=[];for(var n in ee(t))fe.call(t,n)&&"constructor"!=n&&e.push(n);return e}function fi(t){if(!Sa(t))return function(t){var e=[];if(null!=t)for(var n in ee(t))e.push(n);return e}(t);var e=Ko(t),n=[];for(var r in t)("constructor"!=r||!e&&fe.call(t,r))&&n.push(r);return n}function li(t,e){return t<e}function hi(t,e){var n=-1,i=va(t)?r(t.length):[];return Fr(t,function(t,r,o){i[++n]=e(t,r,o)}),i}function pi(t){var e=Lo(t);return 1==e.length&&e[0][2]?Xo(e[0][0],e[0][1]):function(n){return n===t||si(n,t,e)}}function di(t,e){return Jo(t)&&Qo(e)?Xo(fs(t),e):function(n){var r=Xa(n,t);return r===i&&r===e?tu(n,t):oi(e,r,d|g)}}function gi(t,e,n,r,o){t!==e&&Wr(e,function(s,a){if(Sa(s))o||(o=new Er),function(t,e,n,r,o,s,a){var u=ns(t,n),c=ns(e,n),f=a.get(c);if(f)Sr(t,n,f);else{var l=s?s(u,c,n+"",t,e,a):i,h=l===i;if(h){var p=ma(c),d=!p&&_a(c),g=!p&&!d&&Pa(c);l=c,p||d||g?ma(u)?l=u:wa(u)?l=no(u):d?(h=!1,l=Zi(c,!0)):g?(h=!1,l=Qi(c,!0)):l=[]:ja(c)||ya(c)?(l=u,ya(u)?l=Va(u):Sa(u)&&!Ia(u)||(l=Vo(c))):h=!1}h&&(a.set(c,l),o(l,c,r,s,a),a.delete(c)),Sr(t,n,l)}}(t,e,a,n,gi,r,o);else{var u=r?r(ns(t,a),s,a+"",t,e,o):i;u===i&&(u=s),Sr(t,a,u)}},ou)}function yi(t,e){var n=t.length;if(n)return $o(e+=e<0?n:0,n)?t[e]:i}function mi(t,e,n){var r=-1;return e=Qe(e.length?e:[Ru],yn(Po())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(hi(t,function(t,n,i){return{criteria:Qe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;++r<s;){var u=Xi(i[r],o[r]);if(u){if(r>=a)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function bi(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Zr(t,s);n(a,s)&&Oi(o,$i(s,t),a)}return o}function vi(t,e,n,r){var i=r?un:an,o=-1,s=e.length,a=t;for(t===e&&(e=no(e)),n&&(a=Qe(t,yn(n)));++o<s;)for(var u=0,c=e[o],f=n?n(c):c;(u=i(a,f,u,r))>-1;)a!==t&&Pe.call(a,u,1),Pe.call(t,u,1);return t}function wi(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;$o(i)?Pe.call(t,i,1):Li(t,i)}}return t}function _i(t,e){return t+Fn(Yn()*(e-t+1))}function Ei(t,e){var n="";if(!t||e<1||e>x)return n;do{e%2&&(n+=t),(e=Fn(e/2))&&(t+=t)}while(e);return n}function ki(t,e){return os(ts(t,e,Ru),t+"")}function Ii(t){return Ir(pu(t))}function Ti(t,e){var n=pu(t);return us(n,Mr(e,0,n.length))}function Oi(t,e,n,r){if(!Sa(t))return t;for(var o=-1,s=(e=$i(e,t)).length,a=s-1,u=t;null!=u&&++o<s;){var c=fs(e[o]),f=n;if(o!=a){var l=u[c];(f=r?r(l,c,u):i)===i&&(f=Sa(l)?l:$o(e[o+1])?[]:{})}Cr(u,c,f),u=u[c]}return t}var Si=rr?function(t,e){return rr.set(t,e),t}:Ru,Ci=Mn?function(t,e){return Mn(t,"toString",{configurable:!0,enumerable:!1,value:Su(e),writable:!0})}:Ru;function Bi(t){return us(pu(t))}function Ri(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var s=r(o);++i<o;)s[i]=t[i+e];return s}function ji(t,e){var n;return Fr(t,function(t,r,i){return!(n=e(t,r,i))}),!!n}function Ai(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=L){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Na(s)&&(n?s<=e:s<e)?r=o+1:i=o}return i}return xi(t,e,Ru,n)}function xi(t,e,n,r){e=n(e);for(var o=0,s=null==t?0:t.length,a=e!=e,u=null===e,c=Na(e),f=e===i;o<s;){var l=Fn((o+s)/2),h=n(t[l]),p=h!==i,d=null===h,g=h==h,y=Na(h);if(a)var m=r||g;else m=f?g&&(r||p):u?g&&p&&(r||!d):c?g&&p&&!d&&(r||!y):!d&&!y&&(r?h<=e:h<e);m?o=l+1:s=l}return $n(s,q)}function Mi(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n],a=e?e(s):s;if(!n||!pa(a,u)){var u=a;o[i++]=0===s?0:s}}return o}function Ni(t){return"number"==typeof t?t:Na(t)?N:+t}function Pi(t){if("string"==typeof t)return t;if(ma(t))return Qe(t,Pi)+"";if(Na(t))return hr?hr.call(t):"";var e=t+"";return"0"==e&&1/t==-A?"-0":e}function qi(t,e,n){var r=-1,i=Ze,s=t.length,a=!0,u=[],c=u;if(n)a=!1,i=Ke;else if(s>=o){var f=e?null:ko(t);if(f)return Cn(f);a=!1,i=bn,c=new _r}else c=e?[]:u;t:for(;++r<s;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var p=c.length;p--;)if(c[p]===h)continue t;e&&c.push(h),u.push(l)}else i(c,h,n)||(c!==u&&c.push(h),u.push(l))}return u}function Li(t,e){return null==(t=es(t,e=$i(e,t)))||delete t[fs(ks(e))]}function Fi(t,e,n,r){return Oi(t,e,n(Zr(t,e)),r)}function Di(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Ri(t,r?0:o,r?o+1:i):Ri(t,r?o+1:0,r?i:o)}function Ui(t,e){var n=t;return n instanceof mr&&(n=n.value()),tn(e,function(t,e){return e.func.apply(e.thisArg,Xe([t],e.args))},n)}function Gi(t,e,n){var i=t.length;if(i<2)return i?qi(t[0]):[];for(var o=-1,s=r(i);++o<i;)for(var a=t[o],u=-1;++u<i;)u!=o&&(s[o]=Lr(s[o]||a,t[u],e,n));return qi(Vr(s,1),e,n)}function zi(t,e,n){for(var r=-1,o=t.length,s=e.length,a={};++r<o;){var u=r<s?e[r]:i;n(a,t[r],u)}return a}function Vi(t){return wa(t)?t:[]}function Wi(t){return"function"==typeof t?t:Ru}function $i(t,e){return ma(t)?t:Jo(t,e)?[t]:cs(Wa(t))}var Hi=ki;function Ji(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:Ri(t,e,n)}var Yi=Nn||function(t){return Ae.clearTimeout(t)};function Zi(t,e){if(e)return t.slice();var n=t.length,r=Re?Re(n):new t.constructor(n);return t.copy(r),r}function Ki(t){var e=new t.constructor(t.byteLength);return new Se(e).set(new Se(t)),e}function Qi(t,e){var n=e?Ki(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Xi(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,s=Na(t),a=e!==i,u=null===e,c=e==e,f=Na(e);if(!u&&!f&&!s&&t>e||s&&a&&c&&!u&&!f||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!f&&t<e||f&&n&&o&&!r&&!s||u&&n&&o||!a&&o||!c)return-1}return 0}function to(t,e,n,i){for(var o=-1,s=t.length,a=n.length,u=-1,c=e.length,f=Wn(s-a,0),l=r(c+f),h=!i;++u<c;)l[u]=e[u];for(;++o<a;)(h||o<s)&&(l[n[o]]=t[o]);for(;f--;)l[u++]=t[o++];return l}function eo(t,e,n,i){for(var o=-1,s=t.length,a=-1,u=n.length,c=-1,f=e.length,l=Wn(s-u,0),h=r(l+f),p=!i;++o<l;)h[o]=t[o];for(var d=o;++c<f;)h[d+c]=e[c];for(;++a<u;)(p||o<s)&&(h[d+n[a]]=t[o++]);return h}function no(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function ro(t,e,n,r){var o=!n;n||(n={});for(var s=-1,a=e.length;++s<a;){var u=e[s],c=r?r(n[u],t[u],u,n,t):i;c===i&&(c=t[u]),o?Ar(n,u,c):Cr(n,u,c)}return n}function io(t,e){return function(n,r){var i=ma(n)?We:Rr,o=e?e():{};return i(n,t,Po(r,2),o)}}function oo(t){return ki(function(e,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;for(s=t.length>3&&"function"==typeof s?(o--,s):i,a&&Ho(n[0],n[1],a)&&(s=o<3?i:s,o=1),e=ee(e);++r<o;){var u=n[r];u&&t(e,u,r,s)}return e})}function so(t,e){return function(n,r){if(null==n)return n;if(!va(n))return t(n,r);for(var i=n.length,o=e?i:-1,s=ee(n);(e?o--:++o<i)&&!1!==r(s[o],o,s););return n}}function ao(t){return function(e,n,r){for(var i=-1,o=ee(e),s=r(e),a=s.length;a--;){var u=s[t?a:++i];if(!1===n(o[u],u,o))break}return e}}function uo(t){return function(e){var n=In(e=Wa(e))?jn(e):i,r=n?n[0]:e.charAt(0),o=n?Ji(n,1).join(""):e.slice(1);return r[t]()+o}}function co(t){return function(e){return tn(Iu(yu(e).replace(me,"")),t,"")}}function fo(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=dr(t.prototype),r=t.apply(n,e);return Sa(r)?r:n}}function lo(t){return function(e,n,r){var o=ee(e);if(!va(e)){var s=Po(n,3);e=iu(e),n=function(t){return s(o[t],t,o)}}var a=t(e,n,r);return a>-1?o[s?e[a]:a]:i}}function ho(t){return Ro(function(e){var n=e.length,r=n,o=yr.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new ie(a);if(o&&!u&&"wrapper"==Mo(s))var u=new yr([],!0)}for(r=u?r:n;++r<n;){var c=Mo(s=e[r]),f="wrapper"==c?xo(s):i;u=f&&Yo(f[0])&&f[1]==(k|v|_|I)&&!f[4].length&&1==f[9]?u[Mo(f[0])].apply(u,f[3]):1==s.length&&Yo(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&ma(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function po(t,e,n,o,s,a,u,c,f,l){var h=e&k,p=e&y,d=e&m,g=e&(v|w),b=e&T,_=d?i:fo(t);return function y(){for(var m=arguments.length,v=r(m),w=m;w--;)v[w]=arguments[w];if(g)var E=No(y),k=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(v,E);if(o&&(v=to(v,o,s,g)),a&&(v=eo(v,a,u,g)),m-=k,g&&m<l){var I=Sn(v,E);return _o(t,e,po,y.placeholder,n,v,I,c,f,l-m)}var T=p?n:this,O=d?T[t]:t;return m=v.length,c?v=function(t,e){for(var n=t.length,r=$n(e.length,n),o=no(t);r--;){var s=e[r];t[r]=$o(s,n)?o[s]:i}return t}(v,c):b&&m>1&&v.reverse(),h&&f<m&&(v.length=f),this&&this!==Ae&&this instanceof y&&(O=_||fo(O)),O.apply(T,v)}}function go(t,e){return function(n,r){return function(t,e,n,r){return Hr(t,function(t,i,o){e(r,n(t),i,o)}),r}(n,t,e(r),{})}}function yo(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Pi(n),r=Pi(r)):(n=Ni(n),r=Ni(r)),o=t(n,r)}return o}}function mo(t){return Ro(function(e){return e=Qe(e,yn(Po())),ki(function(n){var r=this;return t(e,function(t){return Ve(t,r,n)})})})}function bo(t,e){var n=(e=e===i?" ":Pi(e)).length;if(n<2)return n?Ei(e,t):e;var r=Ei(e,Ln(t/Rn(e)));return In(e)?Ji(jn(r),0,t).join(""):r.slice(0,t)}function vo(t){return function(e,n,o){return o&&"number"!=typeof o&&Ho(e,n,o)&&(n=o=i),e=Da(e),n===i?(n=e,e=0):n=Da(n),function(t,e,n,i){for(var o=-1,s=Wn(Ln((e-t)/(n||1)),0),a=r(s);s--;)a[i?s:++o]=t,t+=n;return a}(e,n,o=o===i?e<n?1:-1:Da(o),t)}}function wo(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=za(e),n=za(n)),t(e,n)}}function _o(t,e,n,r,o,s,a,u,c,f){var l=e&v;e|=l?_:E,(e&=~(l?E:_))&b||(e&=~(y|m));var h=[t,e,o,l?s:i,l?a:i,l?i:s,l?i:a,u,c,f],p=n.apply(i,h);return Yo(t)&&rs(p,h),p.placeholder=r,ss(p,t,e)}function Eo(t){var e=te[t];return function(t,n){if(t=za(t),n=null==n?0:$n(Ua(n),292)){var r=(Wa(t)+"e").split("e");return+((r=(Wa(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var ko=tr&&1/Cn(new tr([,-0]))[1]==A?function(t){return new tr(t)}:Nu;function Io(t){return function(e){var n=Go(e);return n==Y?Tn(e):n==et?Bn(e):function(t,e){return Qe(e,function(e){return[e,t[e]]})}(e,t(e))}}function To(t,e,n,o,s,u,c,l){var h=e&m;if(!h&&"function"!=typeof t)throw new ie(a);var p=o?o.length:0;if(p||(e&=~(_|E),o=s=i),c=c===i?c:Wn(Ua(c),0),l=l===i?l:Ua(l),p-=s?s.length:0,e&E){var d=o,g=s;o=s=i}var T=h?i:xo(t),O=[t,e,n,o,s,d,g,u,c,l];if(T&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<(y|m|k),s=r==k&&n==v||r==k&&n==I&&t[7].length<=e[8]||r==(k|I)&&e[7].length<=e[8]&&n==v;if(!o&&!s)return t;r&y&&(t[2]=e[2],i|=n&y?0:b);var a=e[3];if(a){var u=t[3];t[3]=u?to(u,a,e[4]):a,t[4]=u?Sn(t[3],f):e[4]}(a=e[5])&&(u=t[5],t[5]=u?eo(u,a,e[6]):a,t[6]=u?Sn(t[5],f):e[6]),(a=e[7])&&(t[7]=a),r&k&&(t[8]=null==t[8]?e[8]:$n(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(O,T),t=O[0],e=O[1],n=O[2],o=O[3],s=O[4],!(l=O[9]=O[9]===i?h?0:t.length:Wn(O[9]-p,0))&&e&(v|w)&&(e&=~(v|w)),e&&e!=y)S=e==v||e==w?function(t,e,n){var o=fo(t);return function s(){for(var a=arguments.length,u=r(a),c=a,f=No(s);c--;)u[c]=arguments[c];var l=a<3&&u[0]!==f&&u[a-1]!==f?[]:Sn(u,f);return(a-=l.length)<n?_o(t,e,po,s.placeholder,i,u,l,i,i,n-a):Ve(this&&this!==Ae&&this instanceof s?o:t,this,u)}}(t,e,l):e!=_&&e!=(y|_)||s.length?po.apply(i,O):function(t,e,n,i){var o=e&y,s=fo(t);return function e(){for(var a=-1,u=arguments.length,c=-1,f=i.length,l=r(f+u),h=this&&this!==Ae&&this instanceof e?s:t;++c<f;)l[c]=i[c];for(;u--;)l[c++]=arguments[++a];return Ve(h,o?n:this,l)}}(t,e,n,o);else var S=function(t,e,n){var r=e&y,i=fo(t);return function e(){return(this&&this!==Ae&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ss((T?Si:rs)(S,O),t,e)}function Oo(t,e,n,r){return t===i||pa(t,ae[n])&&!fe.call(r,n)?e:t}function So(t,e,n,r,o,s){return Sa(t)&&Sa(e)&&(s.set(e,t),gi(t,e,i,So,s),s.delete(e)),t}function Co(t){return ja(t)?i:t}function Bo(t,e,n,r,o,s){var a=n&d,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var f=s.get(t);if(f&&s.get(e))return f==e;var l=-1,h=!0,p=n&g?new _r:i;for(s.set(t,e),s.set(e,t);++l<u;){var y=t[l],m=e[l];if(r)var b=a?r(m,y,l,e,t,s):r(y,m,l,t,e,s);if(b!==i){if(b)continue;h=!1;break}if(p){if(!nn(e,function(t,e){if(!bn(p,e)&&(y===t||o(y,t,n,r,s)))return p.push(e)})){h=!1;break}}else if(y!==m&&!o(y,m,n,r,s)){h=!1;break}}return s.delete(t),s.delete(e),h}function Ro(t){return os(ts(t,i,bs),t+"")}function jo(t){return Kr(t,iu,Do)}function Ao(t){return Kr(t,ou,Uo)}var xo=rr?function(t){return rr.get(t)}:Nu;function Mo(t){for(var e=t.name+"",n=ir[e],r=fe.call(ir,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function No(t){return(fe.call(pr,"placeholder")?pr:t).placeholder}function Po(){var t=pr.iteratee||ju;return t=t===ju?ui:t,arguments.length?t(arguments[0],arguments[1]):t}function qo(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Lo(t){for(var e=iu(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Qo(i)]}return e}function Fo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return ai(n)?n:i}var Do=Dn?function(t){return null==t?[]:(t=ee(t),Ye(Dn(t),function(e){return Me.call(t,e)}))}:Gu,Uo=Dn?function(t){for(var e=[];t;)Xe(e,Do(t)),t=je(t);return e}:Gu,Go=Qr;function zo(t,e,n){for(var r=-1,i=(e=$i(e,t)).length,o=!1;++r<i;){var s=fs(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Oa(i)&&$o(s,i)&&(ma(t)||ya(t))}function Vo(t){return"function"!=typeof t.constructor||Ko(t)?{}:dr(je(t))}function Wo(t){return ma(t)||ya(t)||!!(qe&&t&&t[qe])}function $o(t,e){var n=typeof t;return!!(e=null==e?x:e)&&("number"==n||"symbol"!=n&&Ht.test(t))&&t>-1&&t%1==0&&t<e}function Ho(t,e,n){if(!Sa(n))return!1;var r=typeof e;return!!("number"==r?va(n)&&$o(e,n.length):"string"==r&&e in n)&&pa(n[e],t)}function Jo(t,e){if(ma(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Na(t))||Bt.test(t)||!Ct.test(t)||null!=e&&t in ee(e)}function Yo(t){var e=Mo(t),n=pr[e];if("function"!=typeof n||!(e in mr.prototype))return!1;if(t===n)return!0;var r=xo(n);return!!r&&t===r[0]}(Kn&&Go(new Kn(new ArrayBuffer(1)))!=ut||Qn&&Go(new Qn)!=Y||Xn&&"[object Promise]"!=Go(Xn.resolve())||tr&&Go(new tr)!=et||er&&Go(new er)!=ot)&&(Go=function(t){var e=Qr(t),n=e==Q?t.constructor:i,r=n?ls(n):"";if(r)switch(r){case or:return ut;case sr:return Y;case ar:return"[object Promise]";case ur:return et;case cr:return ot}return e});var Zo=ue?Ia:zu;function Ko(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ae)}function Qo(t){return t==t&&!Sa(t)}function Xo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in ee(n))}}function ts(t,e,n){return e=Wn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,s=Wn(i.length-e,0),a=r(s);++o<s;)a[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(a),Ve(t,this,u)}}function es(t,e){return e.length<2?t:Zr(t,Ri(e,0,-1))}function ns(t,e){if("__proto__"!=e)return t[e]}var rs=as(Si),is=qn||function(t,e){return Ae.setTimeout(t,e)},os=as(Ci);function ss(t,e,n){var r=e+"";return os(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(Pt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return $e(F,function(n){var r="_."+n[0];e&n[1]&&!Ze(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(qt);return e?e[1].split(Lt):[]}(r),n)))}function as(t){var e=0,n=0;return function(){var r=Hn(),o=B-(r-n);if(n=r,o>0){if(++e>=C)return arguments[0]}else e=0;return t.apply(i,arguments)}}function us(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var s=_i(n,o),a=t[s];t[s]=t[n],t[n]=a}return t.length=e,t}var cs=function(t){var e=aa(t,function(t){return n.size===c&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Rt,function(t,n,r,i){e.push(r?i.replace(Dt,"$1"):n||t)}),e});function fs(t){if("string"==typeof t||Na(t))return t;var e=t+"";return"0"==e&&1/t==-A?"-0":e}function ls(t){if(null!=t){try{return ce.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function hs(t){if(t instanceof mr)return t.clone();var e=new yr(t.__wrapped__,t.__chain__);return e.__actions__=no(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var ps=ki(function(t,e){return wa(t)?Lr(t,Vr(e,1,wa,!0)):[]}),ds=ki(function(t,e){var n=ks(e);return wa(n)&&(n=i),wa(t)?Lr(t,Vr(e,1,wa,!0),Po(n,2)):[]}),gs=ki(function(t,e){var n=ks(e);return wa(n)&&(n=i),wa(t)?Lr(t,Vr(e,1,wa,!0),i,n):[]});function ys(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ua(n);return i<0&&(i=Wn(r+i,0)),sn(t,Po(e,3),i)}function ms(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=Ua(n),o=n<0?Wn(r+o,0):$n(o,r-1)),sn(t,Po(e,3),o,!0)}function bs(t){return null!=t&&t.length?Vr(t,1):[]}function vs(t){return t&&t.length?t[0]:i}var ws=ki(function(t){var e=Qe(t,Vi);return e.length&&e[0]===t[0]?ni(e):[]}),_s=ki(function(t){var e=ks(t),n=Qe(t,Vi);return e===ks(n)?e=i:n.pop(),n.length&&n[0]===t[0]?ni(n,Po(e,2)):[]}),Es=ki(function(t){var e=ks(t),n=Qe(t,Vi);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?ni(n,i,e):[]});function ks(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Is=ki(Ts);function Ts(t,e){return t&&t.length&&e&&e.length?vi(t,e):t}var Os=Ro(function(t,e){var n=null==t?0:t.length,r=xr(t,e);return wi(t,Qe(e,function(t){return $o(t,n)?+t:t}).sort(Xi)),r});function Ss(t){return null==t?t:Zn.call(t)}var Cs=ki(function(t){return qi(Vr(t,1,wa,!0))}),Bs=ki(function(t){var e=ks(t);return wa(e)&&(e=i),qi(Vr(t,1,wa,!0),Po(e,2))}),Rs=ki(function(t){var e=ks(t);return e="function"==typeof e?e:i,qi(Vr(t,1,wa,!0),i,e)});function js(t){if(!t||!t.length)return[];var e=0;return t=Ye(t,function(t){if(wa(t))return e=Wn(t.length,e),!0}),gn(e,function(e){return Qe(t,ln(e))})}function As(t,e){if(!t||!t.length)return[];var n=js(t);return null==e?n:Qe(n,function(t){return Ve(e,i,t)})}var xs=ki(function(t,e){return wa(t)?Lr(t,e):[]}),Ms=ki(function(t){return Gi(Ye(t,wa))}),Ns=ki(function(t){var e=ks(t);return wa(e)&&(e=i),Gi(Ye(t,wa),Po(e,2))}),Ps=ki(function(t){var e=ks(t);return e="function"==typeof e?e:i,Gi(Ye(t,wa),i,e)}),qs=ki(js);var Ls=ki(function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,As(t,n)});function Fs(t){var e=pr(t);return e.__chain__=!0,e}function Ds(t,e){return e(t)}var Us=Ro(function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return xr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof mr&&$o(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:Ds,args:[o],thisArg:i}),new yr(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(i),t})):this.thru(o)});var Gs=io(function(t,e,n){fe.call(t,n)?++t[n]:Ar(t,n,1)});var zs=lo(ys),Vs=lo(ms);function Ws(t,e){return(ma(t)?$e:Fr)(t,Po(e,3))}function $s(t,e){return(ma(t)?He:Dr)(t,Po(e,3))}var Hs=io(function(t,e,n){fe.call(t,n)?t[n].push(e):Ar(t,n,[e])});var Js=ki(function(t,e,n){var i=-1,o="function"==typeof e,s=va(t)?r(t.length):[];return Fr(t,function(t){s[++i]=o?Ve(e,t,n):ri(t,e,n)}),s}),Ys=io(function(t,e,n){Ar(t,n,e)});function Zs(t,e){return(ma(t)?Qe:hi)(t,Po(e,3))}var Ks=io(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var Qs=ki(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Ho(t,e[0],e[1])?e=[]:n>2&&Ho(e[0],e[1],e[2])&&(e=[e[0]]),mi(t,Vr(e,1),[])}),Xs=Pn||function(){return Ae.Date.now()};function ta(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,To(t,k,i,i,i,i,e)}function ea(t,e){var n;if("function"!=typeof e)throw new ie(a);return t=Ua(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var na=ki(function(t,e,n){var r=y;if(n.length){var i=Sn(n,No(na));r|=_}return To(t,r,e,n,i)}),ra=ki(function(t,e,n){var r=y|m;if(n.length){var i=Sn(n,No(ra));r|=_}return To(e,r,t,n,i)});function ia(t,e,n){var r,o,s,u,c,f,l=0,h=!1,p=!1,d=!0;if("function"!=typeof t)throw new ie(a);function g(e){var n=r,s=o;return r=o=i,l=e,u=t.apply(s,n)}function y(t){var n=t-f;return f===i||n>=e||n<0||p&&t-l>=s}function m(){var t=Xs();if(y(t))return b(t);c=is(m,function(t){var n=e-(t-f);return p?$n(n,s-(t-l)):n}(t))}function b(t){return c=i,d&&r?g(t):(r=o=i,u)}function v(){var t=Xs(),n=y(t);if(r=arguments,o=this,f=t,n){if(c===i)return function(t){return l=t,c=is(m,e),h?g(t):u}(f);if(p)return c=is(m,e),g(f)}return c===i&&(c=is(m,e)),u}return e=za(e)||0,Sa(n)&&(h=!!n.leading,s=(p="maxWait"in n)?Wn(za(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),v.cancel=function(){c!==i&&Yi(c),l=0,r=f=o=c=i},v.flush=function(){return c===i?u:b(Xs())},v}var oa=ki(function(t,e){return qr(t,1,e)}),sa=ki(function(t,e,n){return qr(t,za(e)||0,n)});function aa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new ie(a);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=t.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(aa.Cache||wr),n}function ua(t){if("function"!=typeof t)throw new ie(a);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}aa.Cache=wr;var ca=Hi(function(t,e){var n=(e=1==e.length&&ma(e[0])?Qe(e[0],yn(Po())):Qe(Vr(e,1),yn(Po()))).length;return ki(function(r){for(var i=-1,o=$n(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ve(t,this,r)})}),fa=ki(function(t,e){var n=Sn(e,No(fa));return To(t,_,i,e,n)}),la=ki(function(t,e){var n=Sn(e,No(la));return To(t,E,i,e,n)}),ha=Ro(function(t,e){return To(t,I,i,i,i,e)});function pa(t,e){return t===e||t!=t&&e!=e}var da=wo(Xr),ga=wo(function(t,e){return t>=e}),ya=ii(function(){return arguments}())?ii:function(t){return Ca(t)&&fe.call(t,"callee")&&!Me.call(t,"callee")},ma=r.isArray,ba=Le?yn(Le):function(t){return Ca(t)&&Qr(t)==at};function va(t){return null!=t&&Oa(t.length)&&!Ia(t)}function wa(t){return Ca(t)&&va(t)}var _a=Un||zu,Ea=Fe?yn(Fe):function(t){return Ca(t)&&Qr(t)==V};function ka(t){if(!Ca(t))return!1;var e=Qr(t);return e==$||e==W||"string"==typeof t.message&&"string"==typeof t.name&&!ja(t)}function Ia(t){if(!Sa(t))return!1;var e=Qr(t);return e==H||e==J||e==G||e==X}function Ta(t){return"number"==typeof t&&t==Ua(t)}function Oa(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=x}function Sa(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Ca(t){return null!=t&&"object"==typeof t}var Ba=De?yn(De):function(t){return Ca(t)&&Go(t)==Y};function Ra(t){return"number"==typeof t||Ca(t)&&Qr(t)==Z}function ja(t){if(!Ca(t)||Qr(t)!=Q)return!1;var e=je(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&ce.call(n)==de}var Aa=Ue?yn(Ue):function(t){return Ca(t)&&Qr(t)==tt};var xa=Ge?yn(Ge):function(t){return Ca(t)&&Go(t)==et};function Ma(t){return"string"==typeof t||!ma(t)&&Ca(t)&&Qr(t)==nt}function Na(t){return"symbol"==typeof t||Ca(t)&&Qr(t)==rt}var Pa=ze?yn(ze):function(t){return Ca(t)&&Oa(t.length)&&!!Te[Qr(t)]};var qa=wo(li),La=wo(function(t,e){return t<=e});function Fa(t){if(!t)return[];if(va(t))return Ma(t)?jn(t):no(t);if(rn&&t[rn])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[rn]());var e=Go(t);return(e==Y?Tn:e==et?Cn:pu)(t)}function Da(t){return t?(t=za(t))===A||t===-A?(t<0?-1:1)*M:t==t?t:0:0===t?t:0}function Ua(t){var e=Da(t),n=e%1;return e==e?n?e-n:e:0}function Ga(t){return t?Mr(Ua(t),0,P):0}function za(t){if("number"==typeof t)return t;if(Na(t))return N;if(Sa(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Sa(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(xt,"");var n=Vt.test(t);return n||$t.test(t)?Be(t.slice(2),n?2:8):zt.test(t)?N:+t}function Va(t){return ro(t,ou(t))}function Wa(t){return null==t?"":Pi(t)}var $a=oo(function(t,e){if(Ko(e)||va(e))ro(e,iu(e),t);else for(var n in e)fe.call(e,n)&&Cr(t,n,e[n])}),Ha=oo(function(t,e){ro(e,ou(e),t)}),Ja=oo(function(t,e,n,r){ro(e,ou(e),t,r)}),Ya=oo(function(t,e,n,r){ro(e,iu(e),t,r)}),Za=Ro(xr);var Ka=ki(function(t,e){t=ee(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&Ho(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],a=ou(s),u=-1,c=a.length;++u<c;){var f=a[u],l=t[f];(l===i||pa(l,ae[f])&&!fe.call(t,f))&&(t[f]=s[f])}return t}),Qa=ki(function(t){return t.push(i,So),Ve(au,i,t)});function Xa(t,e,n){var r=null==t?i:Zr(t,e);return r===i?n:r}function tu(t,e){return null!=t&&zo(t,e,ei)}var eu=go(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),t[e]=n},Su(Ru)),nu=go(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=pe.call(e)),fe.call(t,e)?t[e].push(n):t[e]=[n]},Po),ru=ki(ri);function iu(t){return va(t)?kr(t):ci(t)}function ou(t){return va(t)?kr(t,!0):fi(t)}var su=oo(function(t,e,n){gi(t,e,n)}),au=oo(function(t,e,n,r){gi(t,e,n,r)}),uu=Ro(function(t,e){var n={};if(null==t)return n;var r=!1;e=Qe(e,function(e){return e=$i(e,t),r||(r=e.length>1),e}),ro(t,Ao(t),n),r&&(n=Nr(n,l|h|p,Co));for(var i=e.length;i--;)Li(n,e[i]);return n});var cu=Ro(function(t,e){return null==t?{}:function(t,e){return bi(t,e,function(e,n){return tu(t,n)})}(t,e)});function fu(t,e){if(null==t)return{};var n=Qe(Ao(t),function(t){return[t]});return e=Po(e),bi(t,n,function(t,n){return e(t,n[0])})}var lu=Io(iu),hu=Io(ou);function pu(t){return null==t?[]:mn(t,iu(t))}var du=co(function(t,e,n){return e=e.toLowerCase(),t+(n?gu(e):e)});function gu(t){return ku(Wa(t).toLowerCase())}function yu(t){return(t=Wa(t))&&t.replace(Jt,_n).replace(be,"")}var mu=co(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),bu=co(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),vu=uo("toLowerCase");var wu=co(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var _u=co(function(t,e,n){return t+(n?" ":"")+ku(e)});var Eu=co(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),ku=uo("toUpperCase");function Iu(t,e,n){return t=Wa(t),(e=n?i:e)===i?function(t){return Ee.test(t)}(t)?function(t){return t.match(we)||[]}(t):function(t){return t.match(Ft)||[]}(t):t.match(e)||[]}var Tu=ki(function(t,e){try{return Ve(t,i,e)}catch(t){return ka(t)?t:new Qt(t)}}),Ou=Ro(function(t,e){return $e(e,function(e){e=fs(e),Ar(t,e,na(t[e],t))}),t});function Su(t){return function(){return t}}var Cu=ho(),Bu=ho(!0);function Ru(t){return t}function ju(t){return ui("function"==typeof t?t:Nr(t,l))}var Au=ki(function(t,e){return function(n){return ri(n,t,e)}}),xu=ki(function(t,e){return function(n){return ri(t,n,e)}});function Mu(t,e,n){var r=iu(e),i=Yr(e,r);null!=n||Sa(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Yr(e,iu(e)));var o=!(Sa(n)&&"chain"in n&&!n.chain),s=Ia(t);return $e(i,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=no(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Xe([this.value()],arguments))})}),t}function Nu(){}var Pu=mo(Qe),qu=mo(Je),Lu=mo(nn);function Fu(t){return Jo(t)?ln(fs(t)):function(t){return function(e){return Zr(e,t)}}(t)}var Du=vo(),Uu=vo(!0);function Gu(){return[]}function zu(){return!1}var Vu=yo(function(t,e){return t+e},0),Wu=Eo("ceil"),$u=yo(function(t,e){return t/e},1),Hu=Eo("floor");var Ju,Yu=yo(function(t,e){return t*e},1),Zu=Eo("round"),Ku=yo(function(t,e){return t-e},0);return pr.after=function(t,e){if("function"!=typeof e)throw new ie(a);return t=Ua(t),function(){if(--t<1)return e.apply(this,arguments)}},pr.ary=ta,pr.assign=$a,pr.assignIn=Ha,pr.assignInWith=Ja,pr.assignWith=Ya,pr.at=Za,pr.before=ea,pr.bind=na,pr.bindAll=Ou,pr.bindKey=ra,pr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ma(t)?t:[t]},pr.chain=Fs,pr.chunk=function(t,e,n){e=(n?Ho(t,e,n):e===i)?1:Wn(Ua(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var s=0,a=0,u=r(Ln(o/e));s<o;)u[a++]=Ri(t,s,s+=e);return u},pr.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},pr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Xe(ma(n)?no(n):[n],Vr(e,1))},pr.cond=function(t){var e=null==t?0:t.length,n=Po();return t=e?Qe(t,function(t){if("function"!=typeof t[1])throw new ie(a);return[n(t[0]),t[1]]}):[],ki(function(n){for(var r=-1;++r<e;){var i=t[r];if(Ve(i[0],this,n))return Ve(i[1],this,n)}})},pr.conforms=function(t){return function(t){var e=iu(t);return function(n){return Pr(n,t,e)}}(Nr(t,l))},pr.constant=Su,pr.countBy=Gs,pr.create=function(t,e){var n=dr(t);return null==e?n:jr(n,e)},pr.curry=function t(e,n,r){var o=To(e,v,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},pr.curryRight=function t(e,n,r){var o=To(e,w,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},pr.debounce=ia,pr.defaults=Ka,pr.defaultsDeep=Qa,pr.defer=oa,pr.delay=sa,pr.difference=ps,pr.differenceBy=ds,pr.differenceWith=gs,pr.drop=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,(e=n||e===i?1:Ua(e))<0?0:e,r):[]},pr.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,0,(e=r-(e=n||e===i?1:Ua(e)))<0?0:e):[]},pr.dropRightWhile=function(t,e){return t&&t.length?Di(t,Po(e,3),!0,!0):[]},pr.dropWhile=function(t,e){return t&&t.length?Di(t,Po(e,3),!0):[]},pr.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Ho(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=Ua(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:Ua(r))<0&&(r+=o),r=n>r?0:Ga(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},pr.filter=function(t,e){return(ma(t)?Ye:zr)(t,Po(e,3))},pr.flatMap=function(t,e){return Vr(Zs(t,e),1)},pr.flatMapDeep=function(t,e){return Vr(Zs(t,e),A)},pr.flatMapDepth=function(t,e,n){return n=n===i?1:Ua(n),Vr(Zs(t,e),n)},pr.flatten=bs,pr.flattenDeep=function(t){return null!=t&&t.length?Vr(t,A):[]},pr.flattenDepth=function(t,e){return null!=t&&t.length?Vr(t,e=e===i?1:Ua(e)):[]},pr.flip=function(t){return To(t,T)},pr.flow=Cu,pr.flowRight=Bu,pr.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},pr.functions=function(t){return null==t?[]:Yr(t,iu(t))},pr.functionsIn=function(t){return null==t?[]:Yr(t,ou(t))},pr.groupBy=Hs,pr.initial=function(t){return null!=t&&t.length?Ri(t,0,-1):[]},pr.intersection=ws,pr.intersectionBy=_s,pr.intersectionWith=Es,pr.invert=eu,pr.invertBy=nu,pr.invokeMap=Js,pr.iteratee=ju,pr.keyBy=Ys,pr.keys=iu,pr.keysIn=ou,pr.map=Zs,pr.mapKeys=function(t,e){var n={};return e=Po(e,3),Hr(t,function(t,r,i){Ar(n,e(t,r,i),t)}),n},pr.mapValues=function(t,e){var n={};return e=Po(e,3),Hr(t,function(t,r,i){Ar(n,r,e(t,r,i))}),n},pr.matches=function(t){return pi(Nr(t,l))},pr.matchesProperty=function(t,e){return di(t,Nr(e,l))},pr.memoize=aa,pr.merge=su,pr.mergeWith=au,pr.method=Au,pr.methodOf=xu,pr.mixin=Mu,pr.negate=ua,pr.nthArg=function(t){return t=Ua(t),ki(function(e){return yi(e,t)})},pr.omit=uu,pr.omitBy=function(t,e){return fu(t,ua(Po(e)))},pr.once=function(t){return ea(2,t)},pr.orderBy=function(t,e,n,r){return null==t?[]:(ma(e)||(e=null==e?[]:[e]),ma(n=r?i:n)||(n=null==n?[]:[n]),mi(t,e,n))},pr.over=Pu,pr.overArgs=ca,pr.overEvery=qu,pr.overSome=Lu,pr.partial=fa,pr.partialRight=la,pr.partition=Ks,pr.pick=cu,pr.pickBy=fu,pr.property=Fu,pr.propertyOf=function(t){return function(e){return null==t?i:Zr(t,e)}},pr.pull=Is,pr.pullAll=Ts,pr.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?vi(t,e,Po(n,2)):t},pr.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?vi(t,e,i,n):t},pr.pullAt=Os,pr.range=Du,pr.rangeRight=Uu,pr.rearg=ha,pr.reject=function(t,e){return(ma(t)?Ye:zr)(t,ua(Po(e,3)))},pr.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Po(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return wi(t,i),n},pr.rest=function(t,e){if("function"!=typeof t)throw new ie(a);return ki(t,e=e===i?e:Ua(e))},pr.reverse=Ss,pr.sampleSize=function(t,e,n){return e=(n?Ho(t,e,n):e===i)?1:Ua(e),(ma(t)?Tr:Ti)(t,e)},pr.set=function(t,e,n){return null==t?t:Oi(t,e,n)},pr.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Oi(t,e,n,r)},pr.shuffle=function(t){return(ma(t)?Or:Bi)(t)},pr.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&Ho(t,e,n)?(e=0,n=r):(e=null==e?0:Ua(e),n=n===i?r:Ua(n)),Ri(t,e,n)):[]},pr.sortBy=Qs,pr.sortedUniq=function(t){return t&&t.length?Mi(t):[]},pr.sortedUniqBy=function(t,e){return t&&t.length?Mi(t,Po(e,2)):[]},pr.split=function(t,e,n){return n&&"number"!=typeof n&&Ho(t,e,n)&&(e=n=i),(n=n===i?P:n>>>0)?(t=Wa(t))&&("string"==typeof e||null!=e&&!Aa(e))&&!(e=Pi(e))&&In(t)?Ji(jn(t),0,n):t.split(e,n):[]},pr.spread=function(t,e){if("function"!=typeof t)throw new ie(a);return e=null==e?0:Wn(Ua(e),0),ki(function(n){var r=n[e],i=Ji(n,0,e);return r&&Xe(i,r),Ve(t,this,i)})},pr.tail=function(t){var e=null==t?0:t.length;return e?Ri(t,1,e):[]},pr.take=function(t,e,n){return t&&t.length?Ri(t,0,(e=n||e===i?1:Ua(e))<0?0:e):[]},pr.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Ri(t,(e=r-(e=n||e===i?1:Ua(e)))<0?0:e,r):[]},pr.takeRightWhile=function(t,e){return t&&t.length?Di(t,Po(e,3),!1,!0):[]},pr.takeWhile=function(t,e){return t&&t.length?Di(t,Po(e,3)):[]},pr.tap=function(t,e){return e(t),t},pr.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new ie(a);return Sa(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ia(t,e,{leading:r,maxWait:e,trailing:i})},pr.thru=Ds,pr.toArray=Fa,pr.toPairs=lu,pr.toPairsIn=hu,pr.toPath=function(t){return ma(t)?Qe(t,fs):Na(t)?[t]:no(cs(Wa(t)))},pr.toPlainObject=Va,pr.transform=function(t,e,n){var r=ma(t),i=r||_a(t)||Pa(t);if(e=Po(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:Sa(t)&&Ia(o)?dr(je(t)):{}}return(i?$e:Hr)(t,function(t,r,i){return e(n,t,r,i)}),n},pr.unary=function(t){return ta(t,1)},pr.union=Cs,pr.unionBy=Bs,pr.unionWith=Rs,pr.uniq=function(t){return t&&t.length?qi(t):[]},pr.uniqBy=function(t,e){return t&&t.length?qi(t,Po(e,2)):[]},pr.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?qi(t,i,e):[]},pr.unset=function(t,e){return null==t||Li(t,e)},pr.unzip=js,pr.unzipWith=As,pr.update=function(t,e,n){return null==t?t:Fi(t,e,Wi(n))},pr.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Fi(t,e,Wi(n),r)},pr.values=pu,pr.valuesIn=function(t){return null==t?[]:mn(t,ou(t))},pr.without=xs,pr.words=Iu,pr.wrap=function(t,e){return fa(Wi(e),t)},pr.xor=Ms,pr.xorBy=Ns,pr.xorWith=Ps,pr.zip=qs,pr.zipObject=function(t,e){return zi(t||[],e||[],Cr)},pr.zipObjectDeep=function(t,e){return zi(t||[],e||[],Oi)},pr.zipWith=Ls,pr.entries=lu,pr.entriesIn=hu,pr.extend=Ha,pr.extendWith=Ja,Mu(pr,pr),pr.add=Vu,pr.attempt=Tu,pr.camelCase=du,pr.capitalize=gu,pr.ceil=Wu,pr.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=za(n))==n?n:0),e!==i&&(e=(e=za(e))==e?e:0),Mr(za(t),e,n)},pr.clone=function(t){return Nr(t,p)},pr.cloneDeep=function(t){return Nr(t,l|p)},pr.cloneDeepWith=function(t,e){return Nr(t,l|p,e="function"==typeof e?e:i)},pr.cloneWith=function(t,e){return Nr(t,p,e="function"==typeof e?e:i)},pr.conformsTo=function(t,e){return null==e||Pr(t,e,iu(e))},pr.deburr=yu,pr.defaultTo=function(t,e){return null==t||t!=t?e:t},pr.divide=$u,pr.endsWith=function(t,e,n){t=Wa(t),e=Pi(e);var r=t.length,o=n=n===i?r:Mr(Ua(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},pr.eq=pa,pr.escape=function(t){return(t=Wa(t))&&It.test(t)?t.replace(Et,En):t},pr.escapeRegExp=function(t){return(t=Wa(t))&&At.test(t)?t.replace(jt,"\\$&"):t},pr.every=function(t,e,n){var r=ma(t)?Je:Ur;return n&&Ho(t,e,n)&&(e=i),r(t,Po(e,3))},pr.find=zs,pr.findIndex=ys,pr.findKey=function(t,e){return on(t,Po(e,3),Hr)},pr.findLast=Vs,pr.findLastIndex=ms,pr.findLastKey=function(t,e){return on(t,Po(e,3),Jr)},pr.floor=Hu,pr.forEach=Ws,pr.forEachRight=$s,pr.forIn=function(t,e){return null==t?t:Wr(t,Po(e,3),ou)},pr.forInRight=function(t,e){return null==t?t:$r(t,Po(e,3),ou)},pr.forOwn=function(t,e){return t&&Hr(t,Po(e,3))},pr.forOwnRight=function(t,e){return t&&Jr(t,Po(e,3))},pr.get=Xa,pr.gt=da,pr.gte=ga,pr.has=function(t,e){return null!=t&&zo(t,e,ti)},pr.hasIn=tu,pr.head=vs,pr.identity=Ru,pr.includes=function(t,e,n,r){t=va(t)?t:pu(t),n=n&&!r?Ua(n):0;var i=t.length;return n<0&&(n=Wn(i+n,0)),Ma(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&an(t,e,n)>-1},pr.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ua(n);return i<0&&(i=Wn(r+i,0)),an(t,e,i)},pr.inRange=function(t,e,n){return e=Da(e),n===i?(n=e,e=0):n=Da(n),function(t,e,n){return t>=$n(e,n)&&t<Wn(e,n)}(t=za(t),e,n)},pr.invoke=ru,pr.isArguments=ya,pr.isArray=ma,pr.isArrayBuffer=ba,pr.isArrayLike=va,pr.isArrayLikeObject=wa,pr.isBoolean=function(t){return!0===t||!1===t||Ca(t)&&Qr(t)==z},pr.isBuffer=_a,pr.isDate=Ea,pr.isElement=function(t){return Ca(t)&&1===t.nodeType&&!ja(t)},pr.isEmpty=function(t){if(null==t)return!0;if(va(t)&&(ma(t)||"string"==typeof t||"function"==typeof t.splice||_a(t)||Pa(t)||ya(t)))return!t.length;var e=Go(t);if(e==Y||e==et)return!t.size;if(Ko(t))return!ci(t).length;for(var n in t)if(fe.call(t,n))return!1;return!0},pr.isEqual=function(t,e){return oi(t,e)},pr.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?oi(t,e,i,n):!!r},pr.isError=ka,pr.isFinite=function(t){return"number"==typeof t&&Gn(t)},pr.isFunction=Ia,pr.isInteger=Ta,pr.isLength=Oa,pr.isMap=Ba,pr.isMatch=function(t,e){return t===e||si(t,e,Lo(e))},pr.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,si(t,e,Lo(e),n)},pr.isNaN=function(t){return Ra(t)&&t!=+t},pr.isNative=function(t){if(Zo(t))throw new Qt(s);return ai(t)},pr.isNil=function(t){return null==t},pr.isNull=function(t){return null===t},pr.isNumber=Ra,pr.isObject=Sa,pr.isObjectLike=Ca,pr.isPlainObject=ja,pr.isRegExp=Aa,pr.isSafeInteger=function(t){return Ta(t)&&t>=-x&&t<=x},pr.isSet=xa,pr.isString=Ma,pr.isSymbol=Na,pr.isTypedArray=Pa,pr.isUndefined=function(t){return t===i},pr.isWeakMap=function(t){return Ca(t)&&Go(t)==ot},pr.isWeakSet=function(t){return Ca(t)&&Qr(t)==st},pr.join=function(t,e){return null==t?"":zn.call(t,e)},pr.kebabCase=mu,pr.last=ks,pr.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=Ua(n))<0?Wn(r+o,0):$n(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):sn(t,cn,o,!0)},pr.lowerCase=bu,pr.lowerFirst=vu,pr.lt=qa,pr.lte=La,pr.max=function(t){return t&&t.length?Gr(t,Ru,Xr):i},pr.maxBy=function(t,e){return t&&t.length?Gr(t,Po(e,2),Xr):i},pr.mean=function(t){return fn(t,Ru)},pr.meanBy=function(t,e){return fn(t,Po(e,2))},pr.min=function(t){return t&&t.length?Gr(t,Ru,li):i},pr.minBy=function(t,e){return t&&t.length?Gr(t,Po(e,2),li):i},pr.stubArray=Gu,pr.stubFalse=zu,pr.stubObject=function(){return{}},pr.stubString=function(){return""},pr.stubTrue=function(){return!0},pr.multiply=Yu,pr.nth=function(t,e){return t&&t.length?yi(t,Ua(e)):i},pr.noConflict=function(){return Ae._===this&&(Ae._=ge),this},pr.noop=Nu,pr.now=Xs,pr.pad=function(t,e,n){t=Wa(t);var r=(e=Ua(e))?Rn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return bo(Fn(i),n)+t+bo(Ln(i),n)},pr.padEnd=function(t,e,n){t=Wa(t);var r=(e=Ua(e))?Rn(t):0;return e&&r<e?t+bo(e-r,n):t},pr.padStart=function(t,e,n){t=Wa(t);var r=(e=Ua(e))?Rn(t):0;return e&&r<e?bo(e-r,n)+t:t},pr.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Jn(Wa(t).replace(Mt,""),e||0)},pr.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Ho(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=Da(t),e===i?(e=t,t=0):e=Da(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=Yn();return $n(t+o*(e-t+Ce("1e-"+((o+"").length-1))),e)}return _i(t,e)},pr.reduce=function(t,e,n){var r=ma(t)?tn:pn,i=arguments.length<3;return r(t,Po(e,4),n,i,Fr)},pr.reduceRight=function(t,e,n){var r=ma(t)?en:pn,i=arguments.length<3;return r(t,Po(e,4),n,i,Dr)},pr.repeat=function(t,e,n){return e=(n?Ho(t,e,n):e===i)?1:Ua(e),Ei(Wa(t),e)},pr.replace=function(){var t=arguments,e=Wa(t[0]);return t.length<3?e:e.replace(t[1],t[2])},pr.result=function(t,e,n){var r=-1,o=(e=$i(e,t)).length;for(o||(o=1,t=i);++r<o;){var s=null==t?i:t[fs(e[r])];s===i&&(r=o,s=n),t=Ia(s)?s.call(t):s}return t},pr.round=Zu,pr.runInContext=t,pr.sample=function(t){return(ma(t)?Ir:Ii)(t)},pr.size=function(t){if(null==t)return 0;if(va(t))return Ma(t)?Rn(t):t.length;var e=Go(t);return e==Y||e==et?t.size:ci(t).length},pr.snakeCase=wu,pr.some=function(t,e,n){var r=ma(t)?nn:ji;return n&&Ho(t,e,n)&&(e=i),r(t,Po(e,3))},pr.sortedIndex=function(t,e){return Ai(t,e)},pr.sortedIndexBy=function(t,e,n){return xi(t,e,Po(n,2))},pr.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Ai(t,e);if(r<n&&pa(t[r],e))return r}return-1},pr.sortedLastIndex=function(t,e){return Ai(t,e,!0)},pr.sortedLastIndexBy=function(t,e,n){return xi(t,e,Po(n,2),!0)},pr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=Ai(t,e,!0)-1;if(pa(t[n],e))return n}return-1},pr.startCase=_u,pr.startsWith=function(t,e,n){return t=Wa(t),n=null==n?0:Mr(Ua(n),0,t.length),e=Pi(e),t.slice(n,n+e.length)==e},pr.subtract=Ku,pr.sum=function(t){return t&&t.length?dn(t,Ru):0},pr.sumBy=function(t,e){return t&&t.length?dn(t,Po(e,2)):0},pr.template=function(t,e,n){var r=pr.templateSettings;n&&Ho(t,e,n)&&(e=i),t=Wa(t),e=Ja({},e,r,Oo);var o,s,a=Ja({},e.imports,r.imports,Oo),u=iu(a),c=mn(a,u),f=0,l=e.interpolate||Yt,h="__p += '",p=ne((e.escape||Yt).source+"|"+l.source+"|"+(l===St?Ut:Yt).source+"|"+(e.evaluate||Yt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Ie+"]")+"\n";t.replace(p,function(e,n,r,i,a,u){return r||(r=i),h+=t.slice(f,u).replace(Zt,kn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),h+="';\n";var g=e.variable;g||(h="with (obj) {\n"+h+"\n}\n"),h=(s?h.replace(bt,""):h).replace(vt,"$1").replace(wt,"$1;"),h="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y=Tu(function(){return Xt(u,d+"return "+h).apply(i,c)});if(y.source=h,ka(y))throw y;return y},pr.times=function(t,e){if((t=Ua(t))<1||t>x)return[];var n=P,r=$n(t,P);e=Po(e),t-=P;for(var i=gn(r,e);++n<t;)e(n);return i},pr.toFinite=Da,pr.toInteger=Ua,pr.toLength=Ga,pr.toLower=function(t){return Wa(t).toLowerCase()},pr.toNumber=za,pr.toSafeInteger=function(t){return t?Mr(Ua(t),-x,x):0===t?t:0},pr.toString=Wa,pr.toUpper=function(t){return Wa(t).toUpperCase()},pr.trim=function(t,e,n){if((t=Wa(t))&&(n||e===i))return t.replace(xt,"");if(!t||!(e=Pi(e)))return t;var r=jn(t),o=jn(e);return Ji(r,vn(r,o),wn(r,o)+1).join("")},pr.trimEnd=function(t,e,n){if((t=Wa(t))&&(n||e===i))return t.replace(Nt,"");if(!t||!(e=Pi(e)))return t;var r=jn(t);return Ji(r,0,wn(r,jn(e))+1).join("")},pr.trimStart=function(t,e,n){if((t=Wa(t))&&(n||e===i))return t.replace(Mt,"");if(!t||!(e=Pi(e)))return t;var r=jn(t);return Ji(r,vn(r,jn(e))).join("")},pr.truncate=function(t,e){var n=O,r=S;if(Sa(e)){var o="separator"in e?e.separator:o;n="length"in e?Ua(e.length):n,r="omission"in e?Pi(e.omission):r}var s=(t=Wa(t)).length;if(In(t)){var a=jn(t);s=a.length}if(n>=s)return t;var u=n-Rn(r);if(u<1)return r;var c=a?Ji(a,0,u).join(""):t.slice(0,u);if(o===i)return c+r;if(a&&(u+=c.length-u),Aa(o)){if(t.slice(u).search(o)){var f,l=c;for(o.global||(o=ne(o.source,Wa(Gt.exec(o))+"g")),o.lastIndex=0;f=o.exec(l);)var h=f.index;c=c.slice(0,h===i?u:h)}}else if(t.indexOf(Pi(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+r},pr.unescape=function(t){return(t=Wa(t))&&kt.test(t)?t.replace(_t,An):t},pr.uniqueId=function(t){var e=++le;return Wa(t)+e},pr.upperCase=Eu,pr.upperFirst=ku,pr.each=Ws,pr.eachRight=$s,pr.first=vs,Mu(pr,(Ju={},Hr(pr,function(t,e){fe.call(pr.prototype,e)||(Ju[e]=t)}),Ju),{chain:!1}),pr.VERSION="4.17.11",$e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){pr[t].placeholder=pr}),$e(["drop","take"],function(t,e){mr.prototype[t]=function(n){n=n===i?1:Wn(Ua(n),0);var r=this.__filtered__&&!e?new mr(this):this.clone();return r.__filtered__?r.__takeCount__=$n(n,r.__takeCount__):r.__views__.push({size:$n(n,P),type:t+(r.__dir__<0?"Right":"")}),r},mr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),$e(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==R||3==n;mr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Po(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),$e(["head","last"],function(t,e){var n="take"+(e?"Right":"");mr.prototype[t]=function(){return this[n](1).value()[0]}}),$e(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");mr.prototype[t]=function(){return this.__filtered__?new mr(this):this[n](1)}}),mr.prototype.compact=function(){return this.filter(Ru)},mr.prototype.find=function(t){return this.filter(t).head()},mr.prototype.findLast=function(t){return this.reverse().find(t)},mr.prototype.invokeMap=ki(function(t,e){return"function"==typeof t?new mr(this):this.map(function(n){return ri(n,t,e)})}),mr.prototype.reject=function(t){return this.filter(ua(Po(t)))},mr.prototype.slice=function(t,e){t=Ua(t);var n=this;return n.__filtered__&&(t>0||e<0)?new mr(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=Ua(e))<0?n.dropRight(-e):n.take(e-t)),n)},mr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},mr.prototype.toArray=function(){return this.take(P)},Hr(mr.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=pr[r?"take"+("last"==e?"Right":""):e],s=r||/^find/.test(e);o&&(pr.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,u=e instanceof mr,c=a[0],f=u||ma(e),l=function(t){var e=o.apply(pr,Xe([t],a));return r&&h?e[0]:e};f&&n&&"function"==typeof c&&1!=c.length&&(u=f=!1);var h=this.__chain__,p=!!this.__actions__.length,d=s&&!h,g=u&&!p;if(!s&&f){e=g?e:new mr(this);var y=t.apply(e,a);return y.__actions__.push({func:Ds,args:[l],thisArg:i}),new yr(y,h)}return d&&g?t.apply(this,a):(y=this.thru(l),d?r?y.value()[0]:y.value():y)})}),$e(["pop","push","shift","sort","splice","unshift"],function(t){var e=oe[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);pr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ma(i)?i:[],t)}return this[n](function(n){return e.apply(ma(n)?n:[],t)})}}),Hr(mr.prototype,function(t,e){var n=pr[e];if(n){var r=n.name+"";(ir[r]||(ir[r]=[])).push({name:e,func:n})}}),ir[po(i,m).name]=[{name:"wrapper",func:i}],mr.prototype.clone=function(){var t=new mr(this.__wrapped__);return t.__actions__=no(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=no(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=no(this.__views__),t},mr.prototype.reverse=function(){if(this.__filtered__){var t=new mr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},mr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=ma(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=$n(e,t+s);break;case"takeRight":t=Wn(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=o.end,u=a-s,c=r?a:s-1,f=this.__iteratees__,l=f.length,h=0,p=$n(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return Ui(t,this.__actions__);var d=[];t:for(;u--&&h<p;){for(var g=-1,y=t[c+=e];++g<l;){var m=f[g],b=m.iteratee,v=m.type,w=b(y);if(v==j)y=w;else if(!w){if(v==R)continue t;break t}}d[h++]=y}return d},pr.prototype.at=Us,pr.prototype.chain=function(){return Fs(this)},pr.prototype.commit=function(){return new yr(this.value(),this.__chain__)},pr.prototype.next=function(){this.__values__===i&&(this.__values__=Fa(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},pr.prototype.plant=function(t){for(var e,n=this;n instanceof gr;){var r=hs(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},pr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof mr){var e=t;return this.__actions__.length&&(e=new mr(this)),(e=e.reverse()).__actions__.push({func:Ds,args:[Ss],thisArg:i}),new yr(e,this.__chain__)}return this.thru(Ss)},pr.prototype.toJSON=pr.prototype.valueOf=pr.prototype.value=function(){return Ui(this.__wrapped__,this.__actions__)},pr.prototype.first=pr.prototype.head,rn&&(pr.prototype[rn]=function(){return this}),pr}();Ae._=xn,(r=function(){return xn}.call(e,n,e,t))===i||(t.exports=r)}).call(this)}).call(this,n(34)(t))},function(t,e){t.exports=require("events")},function(t,e,n){"use strict";const r=n(84);let i=function(t){let e=r(t);return{debug:e=e.bind(e),info:e,warn:e,error:e}};t.exports=e=function(t){return i(t)},e.setLoggerProvider=function(t){i=t}},function(t,e){t.exports=require("stream")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.hasOwnProperty=function(t,e){return r.call(t,e)},e.propertyIsEnumerable=function(t,e){return i.call(t,e)},e.merge=function(t,e){if(t&&e)for(var n in e)t[n]=e[n];return t},e.isIterator=function(t){return!!t&&(!!t.__shouldIterator__||"function"==typeof t.next&&"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&"function"==typeof t[Symbol.iterator]&&t[Symbol.iterator]()===t)},e.isGeneratorFunction=function(t){return"function"==typeof t&&/^function\s*\*\s*/.test(t.toString())}},function(t,e,n){(function(t){(function(e){"use strict";function n(t,e){e|=0;for(var n=Math.max(t.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=t[e+i];return r}var r=function(t){var e=n(arguments,1);return function(){var r=n(arguments);return t.apply(null,e.concat(r))}},i=function(t){return function(){var e=n(arguments),r=e.pop();t.call(this,e,r)}};function o(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var s="function"==typeof setImmediate&&setImmediate,a="object"==typeof process&&"function"==typeof process.nextTick;function u(t){setTimeout(t,0)}function c(t){return function(e){var r=n(arguments,1);t(function(){e.apply(null,r)})}}var f=c(s?setImmediate:a?process.nextTick:u);function l(t){return i(function(e,n){var r;try{r=t.apply(this,e)}catch(t){return n(t)}o(r)&&"function"==typeof r.then?r.then(function(t){h(n,null,t)},function(t){h(n,t.message?t:new Error(t))}):n(null,r)})}function h(t,e,n){try{t(e,n)}catch(t){f(p,t)}}function p(t){throw t}var d="function"==typeof Symbol;function g(t){return d&&"AsyncFunction"===t[Symbol.toStringTag]}function y(t){return g(t)?l(t):t}function m(t){return function(e){var r=n(arguments,1),o=i(function(n,r){var i=this;return t(e,function(t,e){y(t).apply(i,n.concat(e))},r)});return r.length?o.apply(this,r):o}}var b="object"==typeof global&&global&&global.Object===Object&&global,v="object"==typeof self&&self&&self.Object===Object&&self,w=b||v||Function("return this")(),_=w.Symbol,E=Object.prototype,k=E.hasOwnProperty,I=E.toString,T=_?_.toStringTag:void 0,O=Object.prototype.toString,S="[object Null]",C="[object Undefined]",B=_?_.toStringTag:void 0;function R(t){return null==t?void 0===t?C:S:B&&B in Object(t)?function(t){var e=k.call(t,T),n=t[T];try{t[T]=void 0;var r=!0}catch(t){}var i=I.call(t);return r&&(e?t[T]=n:delete t[T]),i}(t):function(t){return O.call(t)}(t)}var j="[object AsyncFunction]",A="[object Function]",x="[object GeneratorFunction]",M="[object Proxy]",N=9007199254740991;function P(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=N}function q(t){return null!=t&&P(t.length)&&!function(t){if(!o(t))return!1;var e=R(t);return e==A||e==x||e==j||e==M}(t)}var L={};function F(){}function D(t){return function(){if(null!==t){var e=t;t=null,e.apply(this,arguments)}}}var U="function"==typeof Symbol&&Symbol.iterator,G=function(t){return U&&t[U]&&t[U]()};function z(t){return null!=t&&"object"==typeof t}var V="[object Arguments]";function W(t){return z(t)&&R(t)==V}var $=Object.prototype,H=$.hasOwnProperty,J=$.propertyIsEnumerable,Y=W(function(){return arguments}())?W:function(t){return z(t)&&H.call(t,"callee")&&!J.call(t,"callee")},Z=Array.isArray,K="object"==typeof e&&e&&!e.nodeType&&e,Q=K&&"object"==typeof t&&t&&!t.nodeType&&t,X=Q&&Q.exports===K?w.Buffer:void 0,tt=(X?X.isBuffer:void 0)||function(){return!1},et=9007199254740991,nt=/^(?:0|[1-9]\d*)$/;function rt(t,e){var n=typeof t;return!!(e=null==e?et:e)&&("number"==n||"symbol"!=n&&nt.test(t))&&t>-1&&t%1==0&&t<e}var it={};it["[object Float32Array]"]=it["[object Float64Array]"]=it["[object Int8Array]"]=it["[object Int16Array]"]=it["[object Int32Array]"]=it["[object Uint8Array]"]=it["[object Uint8ClampedArray]"]=it["[object Uint16Array]"]=it["[object Uint32Array]"]=!0,it["[object Arguments]"]=it["[object Array]"]=it["[object ArrayBuffer]"]=it["[object Boolean]"]=it["[object DataView]"]=it["[object Date]"]=it["[object Error]"]=it["[object Function]"]=it["[object Map]"]=it["[object Number]"]=it["[object Object]"]=it["[object RegExp]"]=it["[object Set]"]=it["[object String]"]=it["[object WeakMap]"]=!1;var ot,st="object"==typeof e&&e&&!e.nodeType&&e,at=st&&"object"==typeof t&&t&&!t.nodeType&&t,ut=at&&at.exports===st&&b.process,ct=function(){try{var t=at&&at.require&&at.require("util").types;return t||ut&&ut.binding&&ut.binding("util")}catch(t){}}(),ft=ct&&ct.isTypedArray,lt=ft?(ot=ft,function(t){return ot(t)}):function(t){return z(t)&&P(t.length)&&!!it[R(t)]},ht=Object.prototype.hasOwnProperty;function pt(t,e){var n=Z(t),r=!n&&Y(t),i=!n&&!r&&tt(t),o=!n&&!r&&!i&&lt(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=a.length;for(var c in t)!e&&!ht.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||rt(c,u))||a.push(c);return a}var dt=Object.prototype,gt=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object),yt=Object.prototype.hasOwnProperty;function mt(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||dt))return gt(t);var e,n,r=[];for(var i in Object(t))yt.call(t,i)&&"constructor"!=i&&r.push(i);return r}function bt(t){return q(t)?pt(t):mt(t)}function vt(t){if(q(t))return function(t){var e=-1,n=t.length;return function(){return++e<n?{value:t[e],key:e}:null}}(t);var e,n,r,i,o=G(t);return o?function(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}(o):(n=bt(e=t),r=-1,i=n.length,function(){var t=n[++r];return r<i?{value:e[t],key:t}:null})}function wt(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function _t(t){return function(e,n,r){if(r=D(r||F),t<=0||!e)return r(null);var i=vt(e),o=!1,s=0,a=!1;function u(t,e){if(s-=1,t)o=!0,r(t);else{if(e===L||o&&s<=0)return o=!0,r(null);a||c()}}function c(){for(a=!0;s<t&&!o;){var e=i();if(null===e)return o=!0,void(s<=0&&r(null));s+=1,n(e.value,e.key,wt(u))}a=!1}c()}}function Et(t,e,n,r){_t(e)(t,y(n),r)}function kt(t,e){return function(n,r,i){return t(n,e,r,i)}}function It(t,e,n){n=D(n||F);var r=0,i=0,o=t.length;function s(t,e){t?n(t):++i!==o&&e!==L||n(null)}for(0===o&&n(null);r<o;r++)e(t[r],r,wt(s))}var Tt=kt(Et,1/0),Ot=function(t,e,n){(q(t)?It:Tt)(t,y(e),n)};function St(t){return function(e,n,r){return t(Ot,e,y(n),r)}}function Ct(t,e,n,r){r=r||F,e=e||[];var i=[],o=0,s=y(n);t(e,function(t,e,n){var r=o++;s(t,function(t,e){i[r]=e,n(t)})},function(t){r(t,i)})}var Bt=St(Ct),Rt=m(Bt);function jt(t){return function(e,n,r,i){return t(_t(n),e,y(r),i)}}var At=jt(Ct),xt=kt(At,1),Mt=m(xt);function Nt(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}var Pt,qt=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var a=o[Pt?s:++r];if(!1===e(i[a],a,i))break}return t};function Lt(t,e){return t&&qt(t,e,bt)}function Ft(t){return t!=t}function Dt(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):function(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}(t,Ft,n)}var Ut=function(t,e,r){"function"==typeof e&&(r=e,e=null),r=D(r||F);var i=bt(t).length;if(!i)return r(null);e||(e=i);var o={},s=0,a=!1,u=Object.create(null),c=[],f=[],l={};function h(t,e){c.push(function(){!function(t,e){if(a)return;var i=wt(function(e,i){if(s--,arguments.length>2&&(i=n(arguments,1)),e){var c={};Lt(o,function(t,e){c[e]=t}),c[t]=i,a=!0,u=Object.create(null),r(e,c)}else o[t]=i,Nt(u[t]||[],function(t){t()}),p()});s++;var c=y(e[e.length-1]);e.length>1?c(o,i):c(i)}(t,e)})}function p(){if(0===c.length&&0===s)return r(null,o);for(;c.length&&s<e;){c.shift()()}}function d(e){var n=[];return Lt(t,function(t,r){Z(t)&&Dt(t,e,0)>=0&&n.push(r)}),n}Lt(t,function(e,n){if(!Z(e))return h(n,[e]),void f.push(n);var r=e.slice(0,e.length-1),i=r.length;if(0===i)return h(n,e),void f.push(n);l[n]=i,Nt(r,function(o){if(!t[o])throw new Error("async.auto task `"+n+"` has a non-existent dependency `"+o+"` in "+r.join(", "));!function(t,e){var n=u[t];n||(n=u[t]=[]);n.push(e)}(o,function(){0===--i&&h(n,e)})})}),function(){var t,e=0;for(;f.length;)t=f.pop(),e++,Nt(d(t),function(t){0==--l[t]&&f.push(t)});if(e!==i)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),p()};function Gt(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var zt="[object Symbol]",Vt=1/0,Wt=_?_.prototype:void 0,$t=Wt?Wt.toString:void 0;function Ht(t){if("string"==typeof t)return t;if(Z(t))return Gt(t,Ht)+"";if(function(t){return"symbol"==typeof t||z(t)&&R(t)==zt}(t))return $t?$t.call(t):"";var e=t+"";return"0"==e&&1/t==-Vt?"-0":e}function Jt(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:function(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}(t,e,n)}var Yt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Zt="[\\ud800-\\udfff]",Kt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qt="\\ud83c[\\udffb-\\udfff]",Xt="[^\\ud800-\\udfff]",te="(?:\\ud83c[\\udde6-\\uddff]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",ne="(?:"+Kt+"|"+Qt+")"+"?",re="[\\ufe0e\\ufe0f]?"+ne+("(?:\\u200d(?:"+[Xt,te,ee].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*"),ie="(?:"+[Xt+Kt+"?",Kt,te,ee,Zt].join("|")+")",oe=RegExp(Qt+"(?="+Qt+")|"+ie+re,"g");function se(t){return function(t){return Yt.test(t)}(t)?function(t){return t.match(oe)||[]}(t):function(t){return t.split("")}(t)}var ae=/^\s+|\s+$/g;function ue(t,e,n){var r;if((t=null==(r=t)?"":Ht(r))&&(n||void 0===e))return t.replace(ae,"");if(!t||!(e=Ht(e)))return t;var i=se(t),o=se(e);return Jt(i,function(t,e){for(var n=-1,r=t.length;++n<r&&Dt(e,t[n],0)>-1;);return n}(i,o),function(t,e){for(var n=t.length;n--&&Dt(e,t[n],0)>-1;);return n}(i,o)+1).join("")}var ce=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,fe=/,/,le=/(=.+)?(\s*)$/,he=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm;function pe(t,e){var n={};Lt(t,function(t,e){var r,i,o=g(t),s=!o&&1===t.length||o&&0===t.length;if(Z(t))r=t.slice(0,-1),t=t[t.length-1],n[e]=r.concat(r.length>0?a:t);else if(s)n[e]=t;else{if(r=i=(i=(i=(i=(i=t).toString().replace(he,"")).match(ce)[2].replace(" ",""))?i.split(fe):[]).map(function(t){return ue(t.replace(le,""))}),0===t.length&&!o&&0===r.length)throw new Error("autoInject task functions require explicit parameters.");o||r.pop(),n[e]=r.concat(a)}function a(e,n){var i=Gt(r,function(t){return e[t]});i.push(n),y(t).apply(null,i)}}),Ut(n,e)}function de(){this.head=this.tail=null,this.length=0}function ge(t,e){t.length=1,t.head=t.tail=e}function ye(t,e,n){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=y(t),i=0,o=[],s=!1;function a(t,e,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(l.started=!0,Z(t)||(t=[t]),0===t.length&&l.idle())return f(function(){l.drain()});for(var r=0,i=t.length;r<i;r++){var o={data:t[r],callback:n||F};e?l._tasks.unshift(o):l._tasks.push(o)}s||(s=!0,f(function(){s=!1,l.process()}))}function u(t){return function(e){i-=1;for(var n=0,r=t.length;n<r;n++){var s=t[n],a=Dt(o,s,0);0===a?o.shift():a>0&&o.splice(a,1),s.callback.apply(s,arguments),null!=e&&l.error(e,s.data)}i<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}}var c=!1,l={_tasks:new de,concurrency:e,payload:n,saturated:F,unsaturated:F,buffer:e/4,empty:F,drain:F,error:F,started:!1,paused:!1,push:function(t,e){a(t,!1,e)},kill:function(){l.drain=F,l._tasks.empty()},unshift:function(t,e){a(t,!0,e)},remove:function(t){l._tasks.remove(t)},process:function(){if(!c){for(c=!0;!l.paused&&i<l.concurrency&&l._tasks.length;){var t=[],e=[],n=l._tasks.length;l.payload&&(n=Math.min(n,l.payload));for(var s=0;s<n;s++){var a=l._tasks.shift();t.push(a),o.push(a),e.push(a.data)}i+=1,0===l._tasks.length&&l.empty(),i===l.concurrency&&l.saturated();var f=wt(u(t));r(e,f)}c=!1}},length:function(){return l._tasks.length},running:function(){return i},workersList:function(){return o},idle:function(){return l._tasks.length+i===0},pause:function(){l.paused=!0},resume:function(){!1!==l.paused&&(l.paused=!1,f(l.process))}};return l}function me(t,e){return ye(t,1,e)}de.prototype.removeLink=function(t){return t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,t.prev=t.next=null,this.length-=1,t},de.prototype.empty=function(){for(;this.head;)this.shift();return this},de.prototype.insertAfter=function(t,e){e.prev=t,e.next=t.next,t.next?t.next.prev=e:this.tail=e,t.next=e,this.length+=1},de.prototype.insertBefore=function(t,e){e.prev=t.prev,e.next=t,t.prev?t.prev.next=e:this.head=e,t.prev=e,this.length+=1},de.prototype.unshift=function(t){this.head?this.insertBefore(this.head,t):ge(this,t)},de.prototype.push=function(t){this.tail?this.insertAfter(this.tail,t):ge(this,t)},de.prototype.shift=function(){return this.head&&this.removeLink(this.head)},de.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},de.prototype.toArray=function(){for(var t=Array(this.length),e=this.head,n=0;n<this.length;n++)t[n]=e.data,e=e.next;return t},de.prototype.remove=function(t){for(var e=this.head;e;){var n=e.next;t(e)&&this.removeLink(e),e=n}return this};var be=kt(Et,1);function ve(t,e,n,r){r=D(r||F);var i=y(n);be(t,function(t,n,r){i(e,t,function(t,n){e=n,r(t)})},function(t){r(t,e)})}function we(){var t=Gt(arguments,y);return function(){var e=n(arguments),r=this,i=e[e.length-1];"function"==typeof i?e.pop():i=F,ve(t,e,function(t,e,i){e.apply(r,t.concat(function(t){var e=n(arguments,1);i(t,e)}))},function(t,e){i.apply(r,[t].concat(e))})}}var _e=function(){return we.apply(null,n(arguments).reverse())},Ee=Array.prototype.concat,ke=function(t,e,r,i){i=i||F;var o=y(r);At(t,e,function(t,e){o(t,function(t){return t?e(t):e(null,n(arguments,1))})},function(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&(n=Ee.apply(n,e[r]));return i(t,n)})},Ie=kt(ke,1/0),Te=kt(ke,1),Oe=function(){var t=n(arguments),e=[null].concat(t);return function(){return arguments[arguments.length-1].apply(this,e)}};function Se(t){return t}function Ce(t,e){return function(n,r,i,o){o=o||F;var s,a=!1;n(r,function(n,r,o){i(n,function(r,i){r?o(r):t(i)&&!s?(a=!0,s=e(!0,n),o(null,L)):o()})},function(t){t?o(t):o(null,a?s:e(!1))})}}function Be(t,e){return e}var Re=St(Ce(Se,Be)),je=jt(Ce(Se,Be)),Ae=kt(je,1);function xe(t){return function(e){var r=n(arguments,1);r.push(function(e){var r=n(arguments,1);"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&Nt(r,function(e){console[t](e)}))}),y(e).apply(null,r)}}var Me=xe("dir");function Ne(t,e,r){r=wt(r||F);var i=y(t),o=y(e);function s(t){if(t)return r(t);var e=n(arguments,1);e.push(a),o.apply(this,e)}function a(t,e){return t?r(t):e?void i(s):r(null)}a(null,!0)}function Pe(t,e,r){r=wt(r||F);var i=y(t),o=function(t){if(t)return r(t);var s=n(arguments,1);if(e.apply(this,s))return i(o);r.apply(null,[null].concat(s))};i(o)}function qe(t,e,n){Pe(t,function(){return!e.apply(this,arguments)},n)}function Le(t,e,n){n=wt(n||F);var r=y(e),i=y(t);function o(t){if(t)return n(t);i(s)}function s(t,e){return t?n(t):e?void r(o):n(null)}i(s)}function Fe(t){return function(e,n,r){return t(e,r)}}function De(t,e,n){Ot(t,Fe(y(e)),n)}function Ue(t,e,n,r){_t(e)(t,Fe(y(n)),r)}var Ge=kt(Ue,1);function ze(t){return g(t)?t:i(function(e,n){var r=!0;e.push(function(){var t=arguments;r?f(function(){n.apply(null,t)}):n.apply(null,t)}),t.apply(this,e),r=!1})}function Ve(t){return!t}var We=St(Ce(Ve,Ve)),$e=jt(Ce(Ve,Ve)),He=kt($e,1);function Je(t){return function(e){return null==e?void 0:e[t]}}function Ye(t,e,n,r){var i=new Array(e.length);t(e,function(t,e,r){n(t,function(t,n){i[e]=!!n,r(t)})},function(t){if(t)return r(t);for(var n=[],o=0;o<e.length;o++)i[o]&&n.push(e[o]);r(null,n)})}function Ze(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n,o){n?r(n):(o&&i.push({index:e,value:t}),r())})},function(t){t?r(t):r(null,Gt(i.sort(function(t,e){return t.index-e.index}),Je("value")))})}function Ke(t,e,n,r){(q(e)?Ye:Ze)(t,e,y(n),r||F)}var Qe=St(Ke),Xe=jt(Ke),tn=kt(Xe,1);function en(t,e){var n=wt(e||F),r=y(ze(t));!function t(e){if(e)return n(e);r(t)}()}var nn=function(t,e,n,r){r=r||F;var i=y(n);At(t,e,function(t,e){i(t,function(n,r){return n?e(n):e(null,{key:r,val:t})})},function(t,e){for(var n={},i=Object.prototype.hasOwnProperty,o=0;o<e.length;o++)if(e[o]){var s=e[o].key,a=e[o].val;i.call(n,s)?n[s].push(a):n[s]=[a]}return r(t,n)})},rn=kt(nn,1/0),on=kt(nn,1),sn=xe("log");function an(t,e,n,r){r=D(r||F);var i={},o=y(n);Et(t,e,function(t,e,n){o(t,e,function(t,r){if(t)return n(t);i[e]=r,n()})},function(t){r(t,i)})}var un=kt(an,1/0),cn=kt(an,1);function fn(t,e){return e in t}function ln(t,e){var r=Object.create(null),o=Object.create(null);e=e||Se;var s=y(t),a=i(function(t,i){var a=e.apply(null,t);fn(r,a)?f(function(){i.apply(null,r[a])}):fn(o,a)?o[a].push(i):(o[a]=[i],s.apply(null,t.concat(function(){var t=n(arguments);r[a]=t;var e=o[a];delete o[a];for(var i=0,s=e.length;i<s;i++)e[i].apply(null,t)})))});return a.memo=r,a.unmemoized=t,a}var hn=c(a?process.nextTick:s?setImmediate:u);function pn(t,e,r){r=r||F;var i=q(e)?[]:{};t(e,function(t,e,r){y(t)(function(t,o){arguments.length>2&&(o=n(arguments,1)),i[e]=o,r(t)})},function(t){r(t,i)})}function dn(t,e){pn(Ot,t,e)}function gn(t,e,n){pn(_t(e),t,n)}var yn=function(t,e){var n=y(t);return ye(function(t,e){n(t[0],e)},e,1)},mn=function(t,e){var n=yn(t,e);return n.push=function(t,e,r){if(null==r&&(r=F),"function"!=typeof r)throw new Error("task callback must be a function");if(n.started=!0,Z(t)||(t=[t]),0===t.length)return f(function(){n.drain()});e=e||0;for(var i=n._tasks.head;i&&e>=i.priority;)i=i.next;for(var o=0,s=t.length;o<s;o++){var a={data:t[o],priority:e,callback:r};i?n._tasks.insertBefore(i,a):n._tasks.push(a)}f(n.process)},delete n.unshift,n};function bn(t,e){if(e=D(e||F),!Z(t))return e(new TypeError("First argument to race must be an array of functions"));if(!t.length)return e();for(var n=0,r=t.length;n<r;n++)y(t[n])(e)}function vn(t,e,r,i){ve(n(t).reverse(),e,r,i)}function wn(t){var e=y(t);return i(function(t,r){return t.push(function(t,e){var i;t?r(null,{error:t}):(i=arguments.length<=2?e:n(arguments,1),r(null,{value:i}))}),e.apply(this,t)})}function _n(t){var e;return Z(t)?e=Gt(t,wn):(e={},Lt(t,function(t,n){e[n]=wn.call(this,t)})),e}function En(t,e,n,r){Ke(t,e,function(t,e){n(t,function(t,n){e(t,!n)})},r)}var kn=St(En),In=jt(En),Tn=kt(In,1);function On(t){return function(){return t}}function Sn(t,e,n){var r=5,i=0,o={times:r,intervalFunc:On(i)};if(arguments.length<3&&"function"==typeof t?(n=e||F,e=t):(!function(t,e){if("object"==typeof e)t.times=+e.times||r,t.intervalFunc="function"==typeof e.interval?e.interval:On(+e.interval||i),t.errorFilter=e.errorFilter;else{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Invalid arguments for async.retry");t.times=+e||r}}(o,t),n=n||F),"function"!=typeof e)throw new Error("Invalid arguments for async.retry");var s=y(e),a=1;!function t(){s(function(e){e&&a++<o.times&&("function"!=typeof o.errorFilter||o.errorFilter(e))?setTimeout(t,o.intervalFunc(a)):n.apply(null,arguments)})}()}var Cn=function(t,e){e||(e=t,t=null);var n=y(e);return i(function(e,r){function i(t){n.apply(null,e.concat(t))}t?Sn(t,i,r):Sn(i,r)})};function Bn(t,e){pn(be,t,e)}var Rn=St(Ce(Boolean,Se)),jn=jt(Ce(Boolean,Se)),An=kt(jn,1);function xn(t,e,n){var r=y(e);function i(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}Bt(t,function(t,e){r(t,function(n,r){if(n)return e(n);e(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,Gt(e.sort(i),Je("value")))})}function Mn(t,e,n){var r=y(t);return i(function(i,o){var s,a=!1;i.push(function(){a||(o.apply(null,arguments),clearTimeout(s))}),s=setTimeout(function(){var e=t.name||"anonymous",r=new Error('Callback function "'+e+'" timed out.');r.code="ETIMEDOUT",n&&(r.info=n),a=!0,o(r)},e),r.apply(null,i)})}var Nn=Math.ceil,Pn=Math.max;function qn(t,e,n,r){var i=y(n);At(function(t,e,n,r){for(var i=-1,o=Pn(Nn((e-t)/(n||1)),0),s=Array(o);o--;)s[r?o:++i]=t,t+=n;return s}(0,t,1),e,i,r)}var Ln=kt(qn,1/0),Fn=kt(qn,1);function Dn(t,e,n,r){arguments.length<=3&&(r=n,n=e,e=Z(t)?[]:{}),r=D(r||F);var i=y(n);Ot(t,function(t,n,r){i(e,t,n,r)},function(t){r(t,e)})}function Un(t,e){var r,i=null;e=e||F,Ge(t,function(t,e){y(t)(function(t,o){r=arguments.length>2?n(arguments,1):o,i=t,e(!t)})},function(){e(i,r)})}function Gn(t){return function(){return(t.unmemoized||t).apply(null,arguments)}}function zn(t,e,r){r=wt(r||F);var i=y(e);if(!t())return r(null);var o=function(e){if(e)return r(e);if(t())return i(o);var s=n(arguments,1);r.apply(null,[null].concat(s))};i(o)}function Vn(t,e,n){zn(function(){return!t.apply(this,arguments)},e,n)}var Wn=function(t,e){if(e=D(e||F),!Z(t))return e(new Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var r=0;function i(e){var n=y(t[r++]);e.push(wt(o)),n.apply(null,e)}function o(o){if(o||r===t.length)return e.apply(null,arguments);i(n(arguments,1))}i([])},$n={apply:r,applyEach:Rt,applyEachSeries:Mt,asyncify:l,auto:Ut,autoInject:pe,cargo:me,compose:_e,concat:Ie,concatLimit:ke,concatSeries:Te,constant:Oe,detect:Re,detectLimit:je,detectSeries:Ae,dir:Me,doDuring:Ne,doUntil:qe,doWhilst:Pe,during:Le,each:De,eachLimit:Ue,eachOf:Ot,eachOfLimit:Et,eachOfSeries:be,eachSeries:Ge,ensureAsync:ze,every:We,everyLimit:$e,everySeries:He,filter:Qe,filterLimit:Xe,filterSeries:tn,forever:en,groupBy:rn,groupByLimit:nn,groupBySeries:on,log:sn,map:Bt,mapLimit:At,mapSeries:xt,mapValues:un,mapValuesLimit:an,mapValuesSeries:cn,memoize:ln,nextTick:hn,parallel:dn,parallelLimit:gn,priorityQueue:mn,queue:yn,race:bn,reduce:ve,reduceRight:vn,reflect:wn,reflectAll:_n,reject:kn,rejectLimit:In,rejectSeries:Tn,retry:Sn,retryable:Cn,seq:we,series:Bn,setImmediate:f,some:Rn,someLimit:jn,someSeries:An,sortBy:xn,timeout:Mn,times:Ln,timesLimit:qn,timesSeries:Fn,transform:Dn,tryEach:Un,unmemoize:Gn,until:Vn,waterfall:Wn,whilst:zn,all:We,allLimit:$e,allSeries:He,any:Rn,anyLimit:jn,anySeries:An,find:Re,findLimit:je,findSeries:Ae,forEach:De,forEachSeries:Ge,forEachLimit:Ue,forEachOf:Ot,forEachOfSeries:be,forEachOfLimit:Et,inject:ve,foldl:ve,foldr:vn,select:Qe,selectLimit:Xe,selectSeries:tn,wrapSync:l};e.default=$n,e.apply=r,e.applyEach=Rt,e.applyEachSeries=Mt,e.asyncify=l,e.auto=Ut,e.autoInject=pe,e.cargo=me,e.compose=_e,e.concat=Ie,e.concatLimit=ke,e.concatSeries=Te,e.constant=Oe,e.detect=Re,e.detectLimit=je,e.detectSeries=Ae,e.dir=Me,e.doDuring=Ne,e.doUntil=qe,e.doWhilst=Pe,e.during=Le,e.each=De,e.eachLimit=Ue,e.eachOf=Ot,e.eachOfLimit=Et,e.eachOfSeries=be,e.eachSeries=Ge,e.ensureAsync=ze,e.every=We,e.everyLimit=$e,e.everySeries=He,e.filter=Qe,e.filterLimit=Xe,e.filterSeries=tn,e.forever=en,e.groupBy=rn,e.groupByLimit=nn,e.groupBySeries=on,e.log=sn,e.map=Bt,e.mapLimit=At,e.mapSeries=xt,e.mapValues=un,e.mapValuesLimit=an,e.mapValuesSeries=cn,e.memoize=ln,e.nextTick=hn,e.parallel=dn,e.parallelLimit=gn,e.priorityQueue=mn,e.queue=yn,e.race=bn,e.reduce=ve,e.reduceRight=vn,e.reflect=wn,e.reflectAll=_n,e.reject=kn,e.rejectLimit=In,e.rejectSeries=Tn,e.retry=Sn,e.retryable=Cn,e.seq=we,e.series=Bn,e.setImmediate=f,e.some=Rn,e.someLimit=jn,e.someSeries=An,e.sortBy=xn,e.timeout=Mn,e.times=Ln,e.timesLimit=qn,e.timesSeries=Fn,e.transform=Dn,e.tryEach=Un,e.unmemoize=Gn,e.until=Vn,e.waterfall=Wn,e.whilst=zn,e.all=We,e.allLimit=$e,e.allSeries=He,e.any=Rn,e.anyLimit=jn,e.anySeries=An,e.find=Re,e.findLimit=je,e.findSeries=Ae,e.forEach=De,e.forEachSeries=Ge,e.forEachLimit=Ue,e.forEachOf=Ot,e.forEachOfSeries=be,e.forEachOfLimit=Et,e.inject=ve,e.foldl=ve,e.foldr=vn,e.select=Qe,e.selectLimit=Xe,e.selectSeries=tn,e.wrapSync=l,Object.defineProperty(e,"__esModule",{value:!0})})(e)}).call(this,n(34)(t))},function(t,e,n){var r=n(10),i=n(43),o=new RegExp("^[a-zA-Z0-9._-]*$");const s=249;t.exports={validateConfig:function(t,e){if(!o.test(e))throw new i([t,e,"is illegal, contains a character other than ASCII alphanumerics, '.', '_' and '-'"].join(" "))},validateTopics:function(t){if(t.some(function(t){return"partition"in t&&"number"!=typeof t.partition}))throw new i("Offset must be a number and can not contain characters")},groupPartitionsByTopic:function(t){return r(Array.isArray(t)),t.reduce(function(t,e){return e.topic in t?t[e.topic].push(e.partition):t[e.topic]=[e.partition],t},{})},createTopicPartitionList:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&t[n].forEach(function(t){e.push({topic:n,partition:t})});return e},validateTopicNames:function(t){return t.some(function(t){if(t.length<=0)throw new i("topic name is illegal, cannot be empty");if("."===t||".."===t)throw new i("topic name cannot be . or ..");if(t.length>s)throw new i(`topic name is illegal, cannot be longer than ${s} characters`);if(!o.test(t))throw new i(`topic name ${t} is illegal, contains a character other than ASCII alphanumerics .,_ and -`)}),!0}}},function(t,e){t.exports=require("assert")},function(t,e,n){"use strict";const r=n(0),i=n(3);function o(){}function s(){o.call(this)}function a(){o.call(this),this.c=0}function u(){o.call(this)}function c(){o.call(this)}function f(t){o.call(this),this.getPartition=t}r.inherits(s,o),s.prototype.getPartition=function(t){return t&&i.isArray(t)&&t.length>0?t[0]:0},r.inherits(a,o),a.prototype.getPartition=function(t){return i.isEmpty(t)?0:t[this.c++%t.length]},r.inherits(u,o),u.prototype.getPartition=function(t){return t[Math.floor(Math.random()*t.length)]},r.inherits(c,o),c.prototype.hashCode=function(t){let e=0;if(t){const n=t.toString(),r=n.length;for(let t=0;t<r;t++)e=31*e+n.charCodeAt(t)&2147483647}return 0===e?1:e},c.prototype.getPartition=function(t,e){return e=e||"",t[this.hashCode(e)%t.length]},r.inherits(f,o),t.exports.DefaultPartitioner=s,t.exports.CyclicPartitioner=a,t.exports.RandomPartitioner=u,t.exports.KeyedPartitioner=c,t.exports.CustomPartitioner=f},function(t,e,n){"use strict";var r=n(22),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=l;var o=n(15);o.inherits=n(16);var s=n(46),a=n(49);o.inherits(l,s);for(var u=i(a.prototype),c=0;c<u.length;c++){var f=u[c];l.prototype[f]||(l.prototype[f]=a.prototype[f])}function l(t){if(!(this instanceof l))return new l(t);s.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),l.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";var r=n(3),i=n(35),o=n(37);e=r.extend(e,i,o)},function(t,e,n){var r=n(39),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),o(i,s),s.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=Buffer.isBuffer},function(t,e,n){try{var r=n(0);if("function"!=typeof r.inherits)throw"";t.exports=r.inherits}catch(e){t.exports=n(94)}},function(t,e,n){"use strict";e.HighLevelProducer=n(32),e.ProducerStream=n(73),e.ConsumerGroup=n(54),e.ConsumerGroupStream=n(108),e.Consumer=n(109),e.ConsumerStream=n(110),e.Producer=n(112),e.KafkaClient=n(19),e.Offset=n(55),e.Admin=n(113),e.KeyedMessage=n(13).KeyedMessage,e.DefaultPartitioner=n(11).DefaultPartitioner,e.CyclicPartitioner=n(11).CyclicPartitioner,e.RandomPartitioner=n(11).RandomPartitioner,e.KeyedPartitioner=n(11).KeyedPartitioner,e.CustomPartitioner=n(11).CustomPartitioner},function(t,e,n){"use strict";var r,i=(r=n(1))&&"object"==typeof r&&"default"in r?r.default:r,o=n(2);function s(t){return!!t.match(/\d+/)}function a(t,e){var n=s(t),r=s(e);return n&&r?1*t-1*e:n&&!r?-1:!n&&r?1:t.localeCompare(e)}function u(t){var e,n;t=t||{},this.seen=[],e="function"==typeof t.keysFunc?t.keysFunc:!1===t.keys?Object.getOwnPropertyNames:Object.keys,this.getKeys=(n=e,function(t){var e=n(t);return e.sort(a),e}),this.maxLineLength="number"==typeof t.maxLineLength?t.maxLineLength:60,this.propSep=t.propSep||",",this.isUTCdate=!!t.isUTCdate}u.prototype={constructor:u,format:function(t){var e=i(t);if(this.alreadySeen(t))return"[Circular]";for(var n=e.toTryTypes(),r=this.defaultFormat;n.length;){var o=n.shift(),s=u.formatterFunctionName(o);if(this[s]){r=this[s];break}}return r.call(this,t).trim()},defaultFormat:function(t){return String(t)},alreadySeen:function(t){return this.seen.indexOf(t)>=0}},u.addType=function(t,e){u.prototype[u.formatterFunctionName(t)]=e},u.formatterFunctionName=function(t){return"_format_"+t.toString("_")};var c="\n";function f(t,e){return function(t,e,n){var r=!1;if(e<0&&(r=!0,e=-e),(t=String(t)).length<e){var i=new Array(e-t.length+1).join(n);return r?t+i:i+t}return t}(t,e,"0")}var l=/^\s*function\s*(\S*)\s*\(/;function h(t){if(t.name)return t.name;var e=t.toString().match(l);return null===e?"":e[1]}function p(t){for(;t;){var e=Object.getOwnPropertyDescriptor(t,"constructor");if(void 0!==e&&"function"==typeof e.value){var n=h(e.value);if(""!==n)return n}t=Object.getPrototypeOf(t)}}var d="  ";function g(t){return e=d,t.split(c).map(function(t){return e+t}).join(c);var e}function y(t,e){var n=(e=e||{}).filterKey||function(){return!0},r=e.formatKey||this.format,i=e.formatValue||this.format,s=void 0!==e.keyValueSep?e.keyValueSep:": ";this.seen.push(t);var a=0,u=[];o.forEach(t,function(t,e){if(n(e)){var o=r.call(this,e),c=i.call(this,t,e),f=o?o+s+c:c;a+=f.length,u.push(f)}},this),this.seen.pop(),(e.additionalKeys||[]).forEach(function(t){var e=t[0]+s+this.format(t[1]);a+=e.length,u.push(e)},this);var c,f,l=e.prefix||p(t)||"";l.length>0&&(l+=" "),Array.isArray(e.brackets)?(c=e.brackets[0],f=e.brackets[1]):(c="{",f="}");var h=e.value||"";return 0===u.length?h||l+c+f:a<=this.maxLineLength?l+c+" "+(h?h+" ":"")+u.join(this.propSep+" ")+" "+f:l+c+"\n"+(h?"  "+h+"\n":"")+u.map(g).join(this.propSep+"\n")+"\n"+f}function m(t){return"string"==typeof t&&t.match(/^[a-zA-Z_$][a-zA-Z_$0-9]*$/)?t:this.format(t)}function b(t,e){var n=function(t,e){var n;try{n=Object.getOwnPropertyDescriptor(t,e)||{value:t[e]}}catch(t){n={value:t}}return n}(t,e);return n.get&&n.set?"[Getter/Setter]":n.get?"[Getter]":n.set?"[Setter]":this.format(n.value)}function v(t,e){return(e=e||{}).keyValueSep=": ",e.formatKey=e.formatKey||m,e.formatValue=e.formatValue||function(e,n){return b.call(this,t,n)},y.call(this,t,e)}function w(t){return v.call(this,t,{additionalKeys:[["[[PrimitiveValue]]",t.valueOf()]]})}function _(t,e){var n=e?"UTC":"",r=t["get"+n+"FullYear"]()+"-"+f(t["get"+n+"Month"]()+1,2)+"-"+f(t["get"+n+"Date"](),2),i=f(t["get"+n+"Hours"](),2)+":"+f(t["get"+n+"Minutes"](),2)+":"+f(t["get"+n+"Seconds"](),2)+"."+f(t["get"+n+"Milliseconds"](),3),o=t.getTimezoneOffset(),s=Math.abs(o),a=Math.floor(s/60),u=s-60*a,c=(o<0?"+":"-")+f(a,2)+f(u,2);return r+" "+i+(e?"":" "+c)}function E(t,e,n){return function(r){for(var i=this.byteArrayMaxLength||50,o=r[t],s=[],a=0,u=0;u<i&&u<o;u++){var c=f((r[u]||0).toString(16),n);a+=c.length,s.push(c)}var l=r.constructor.name||e||"";return l&&(l+=" "),0===s.length?l+"[]":a<=this.maxLineLength?l+"[ "+s.join(this.propSep+" ")+" ]":l+"[\n"+s.map(g).join(this.propSep+"\n")+"\n]"}}function k(t){return y.call(this,t,{keyValueSep:" => "})}function I(t){return y.call(this,t,{keyValueSep:"",formatKey:function(){return""}})}function T(t,e){return function(n){for(var r=n.constructor.extractLane,i=0,o=[],s=0;s<e;s++){var a=this.format(r(n,s));i+=a.length,o.push(a)}return i<=this.maxLineLength?t+" [ "+o.join(this.propSep+" ")+" ]":t+" [\n"+o.map(g).join(this.propSep+"\n")+"\n]"}}function O(t,e){return new u(e).format(t)}O.Formatter=u,O.addSpaces=g,O.pad0=f,O.functionName=h,O.constructorName=p,O.formatPlainObjectKey=m,O.formatPlainObject=v,O.typeAdaptorForEachFormat=y,u.addType(new i.Type(i.UNDEFINED),function(){return"undefined"}),u.addType(new i.Type(i.NULL),function(){return"null"}),u.addType(new i.Type(i.BOOLEAN),function(t){return t?"true":"false"}),u.addType(new i.Type(i.SYMBOL),function(t){return t.toString()}),u.addType(new i.Type(i.NUMBER),function(t){return 0===t&&1/t<0?"-0":String(t)}),u.addType(new i.Type(i.STRING),function(t){return"'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'"}),u.addType(new i.Type(i.FUNCTION),function(t){return v.call(this,t,{prefix:"Function",additionalKeys:[["name",h(t)]]})}),u.addType(new i.Type(i.OBJECT),v),u.addType(new i.Type(i.OBJECT,i.NUMBER),w),u.addType(new i.Type(i.OBJECT,i.BOOLEAN),w),u.addType(new i.Type(i.OBJECT,i.STRING),function(t){var e=t.valueOf();return v.call(this,t,{filterKey:function(t){return!(t.match(/\d+/)&&parseInt(t,10)<e.length)},additionalKeys:[["[[PrimitiveValue]]",e]]})}),u.addType(new i.Type(i.OBJECT,i.REGEXP),function(t){return v.call(this,t,{value:String(t)})}),u.addType(new i.Type(i.OBJECT,i.ARRAY),function(t){return v.call(this,t,{formatKey:function(t){if(!t.match(/\d+/))return m.call(this,t)},brackets:["[","]"]})}),u.addType(new i.Type(i.OBJECT,i.ARGUMENTS),function(t){return v.call(this,t,{formatKey:function(t){if(!t.match(/\d+/))return m.call(this,t)},brackets:["[","]"],prefix:"Arguments"})}),u.addType(new i.Type(i.OBJECT,i.DATE),function(t){return v.call(this,t,{value:_(t,this.isUTCdate)})}),u.addType(new i.Type(i.OBJECT,i.ERROR),function(t){return v.call(this,t,{prefix:t.name,additionalKeys:[["message",t.message]]})}),u.addType(new i.Type(i.OBJECT,i.SET),I),u.addType(new i.Type(i.OBJECT,i.MAP),k),u.addType(new i.Type(i.OBJECT,i.WEAK_MAP),k),u.addType(new i.Type(i.OBJECT,i.WEAK_SET),I),u.addType(new i.Type(i.OBJECT,i.BUFFER),E("length","Buffer",2)),u.addType(new i.Type(i.OBJECT,i.ARRAY_BUFFER),E("byteLength","ArrayBuffer",2)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"int8"),E("length","Int8Array",2)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"uint8"),E("length","Uint8Array",2)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"uint8clamped"),E("length","Uint8ClampedArray",2)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"int16"),E("length","Int16Array",4)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"uint16"),E("length","Uint16Array",4)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"int32"),E("length","Int32Array",8)),u.addType(new i.Type(i.OBJECT,i.TYPED_ARRAY,"uint32"),E("length","Uint32Array",8)),u.addType(new i.Type(i.OBJECT,i.SIMD,"bool16x8"),T("Bool16x8",8)),u.addType(new i.Type(i.OBJECT,i.SIMD,"bool32x4"),T("Bool32x4",4)),u.addType(new i.Type(i.OBJECT,i.SIMD,"bool8x16"),T("Bool8x16",16)),u.addType(new i.Type(i.OBJECT,i.SIMD,"float32x4"),T("Float32x4",4)),u.addType(new i.Type(i.OBJECT,i.SIMD,"int16x8"),T("Int16x8",8)),u.addType(new i.Type(i.OBJECT,i.SIMD,"int32x4"),T("Int32x4",4)),u.addType(new i.Type(i.OBJECT,i.SIMD,"int8x16"),T("Int8x16",16)),u.addType(new i.Type(i.OBJECT,i.SIMD,"uint16x8"),T("Uint16x8",8)),u.addType(new i.Type(i.OBJECT,i.SIMD,"uint32x4"),T("Uint32x4",4)),u.addType(new i.Type(i.OBJECT,i.SIMD,"uint8x16"),T("Uint8x16",16)),u.addType(new i.Type(i.OBJECT,i.PROMISE),function(){return"[Promise]"}),u.addType(new i.Type(i.OBJECT,i.XHR),function(){return"[XMLHttpRequest]"}),u.addType(new i.Type(i.OBJECT,i.HTML_ELEMENT),function(t){return t.outerHTML}),u.addType(new i.Type(i.OBJECT,i.HTML_ELEMENT,"#text"),function(t){return t.nodeValue}),u.addType(new i.Type(i.OBJECT,i.HTML_ELEMENT,"#document"),function(t){return t.documentElement.outerHTML}),u.addType(new i.Type(i.OBJECT,i.HOST),function(){return"[Host]"}),t.exports=O},function(t,e,n){"use strict";const r=n(74),i=n(5)("kafka-node:KafkaClient"),o=n(4),s=n(8),a=n(30),u=n(10),c=n(3),f=n(0),l=n(45),h=n(90),p=n(98),d=n(99),g=n(20),y=n(9).validateConfig,m=n(52),b=n(36),v=n(13),w=n(42),_=w.baseSupport,E=w.apiMap,k=n(21),I=n(29),T=n(53).resourceTypeMap,O={kafkaHost:"localhost:9092",connectTimeout:1e4,requestTimeout:3e4,idleConnection:3e5,autoConnect:!0,versions:{disabled:!1,requestTimeout:500},connectRetryOptions:{retries:5,factor:2,minTimeout:1e3,maxTimeout:6e4,randomize:!0},maxAsyncRequests:10,noAckBatchOptions:null},S=function(t){o.call(this),this.options=c.defaultsDeep(t||{},O),this.sslOptions=this.options.sslOptions,this.ssl=!!this.sslOptions,!0===this.options.ssl&&(this.options.ssl={}),this.options.clientId&&y("clientId",this.options.clientId),this.clientId=this.options.clientId||"kafka-node-client",this.noAckBatchOptions=this.options.noAckBatchOptions,this.brokers={},this.longpollingBrokers={},this.topicMetadata={},this.correlationId=0,this._socketId=0,this.cbqueue=new Map,this.brokerMetadata={},this.clusterMetadata={},this.ready=!1,this._timeouts=new Set,this.initialHosts=this.options.kafkaHost.split(",").map(C),this.options.autoConnect&&this.connect()};function C(t){const e=t.substring(0,t.lastIndexOf(":")),n=t.substring(t.lastIndexOf(":")+1),r=e.match(/\[(.*)\]/);return{host:r?r[1]:e,port:n}}f.inherits(S,r),S.prototype.connect=function(){if(this.connecting)return void i.debug("connect request ignored. Client is currently connecting");this.connecting=!0;const t=a.operation(this.options.connectRetryOptions);t.attempt(e=>{if(this.closing)return i.debug("Client is closing abort retry"),void t.stop();i.debug(`Connect attempt ${e}`),s.series([t=>{this.connectToBrokers(this.initialHosts,t)},t=>{i.debug("connected to socket, trying to load initial metadata"),this.loadMetadataForTopics([],(e,n)=>{if(e)return i.debug("loadMetadataForTopics after connect failed",e),t(e);this.updateMetadatas(n,!0),t(null)})}],e=>{if(!t.retry(e)){if(this.connecting=!1,e)return i.debug("exhausted retries. Main error",t.mainError()),void this.emit("error",t.mainError());this.ready=!0,this.emit("ready")}})})},S.prototype.connectToBrokers=function(t,e){u(t&&t.length,"No hosts to connect to"),t=c.shuffle(t);let n=0,r=[],o=null;s.doWhilst(e=>{this.connectToBroker(t[n++],(t,n)=>{if(t)return i.debug("failed to connect because of ",t),r.push(t),void e(null);r.length=0,o=n,e(null)})},()=>!this.closing&&!o&&n<t.length,()=>this.closing?e(new Error("client is closing")):o?e(null,o):void(r.length?e(r.pop()):e(new Error("failed to connect to brokers"))))},S.prototype.connectToBroker=function(t,e){const n=this.options.connectTimeout;i.debug(`Trying to connect to host: ${t.host} port: ${t.port}`);let r=null;e=c.once(e);const o=n=>{if(a.closing)return;clearTimeout(r),r=null,a.closing=!0,a.end(),a.destroy(),a.unref();const i=`${t.host}:${t.port}`;delete this.brokers[i],e(n)},s=this.setupBroker(t.host,t.port,!1,this.brokers),a=s.socket;a.once("connect",()=>{i.debug("broker socket connected %j",t),this._clearTimeout(r),e(null,s)}),a.on("error",function(t){i.debug("Socket Error",t),o(t)}),r=this._createTimeout(function(){i.debug("Connection timeout error with broker %j",t),o(new m(`Connection timeout of ${n}ms exceeded`))},n)},S.prototype.getController=function(t){if(null!=this.clusterMetadata.controllerId){var e=this.brokerMetadata[this.clusterMetadata.controllerId],n=this.getBroker(e.host,e.port);return t(null,n,this.clusterMetadata.controllerId)}this.loadMetadata((e,n)=>{if(e)return t(e);if(!n[1].clusterMetadata||null==n[1].clusterMetadata.controllerId)return t(new g.BrokerNotAvailableError("Controller broker not available"));this.updateMetadatas(n);var r=n[1].clusterMetadata.controllerId,i=n[0][r],o=this.getBroker(i.host,i.port);return o&&o.isConnected()?t(null,o):t(new g.BrokerNotAvailableError("Controller broker not available"))})},S.prototype.getBroker=function(t,e,n){const r=this.getBrokers(n);return r[t+":"+e]||this.setupBroker(t,e,n,r)},S.prototype.setupBroker=function(t,e,n,r){var i=t+":"+e;return r[i]=this.createBroker(t,e,n),r[i]},S.prototype.getAvailableBroker=function(t){const e=this.getBrokers(),n=c.filter(e,function(t){return t.isConnected()});if(n.length)return i.debug("found %d connected broker(s)",n.length),t(null,c.sample(n));let r;if(c.isEmpty(e))r=c.values(this.brokerMetadata);else{const t=Object.keys(e);r=c.filter(this.brokerMetadata,function(e){return!c.includes(t,`${e.host}:${e.port}`)})}if(c.isEmpty(r))return t(new Error("Unable to find available brokers to try"));this.connectToBrokers(r,t)},S.prototype.refreshBrokers=function(){var t=this,e=c.map(this.brokerMetadata,function(t){return`${t.host}:${t.port}`});function n(n){var r=c.difference(Object.keys(n),e);r.length&&t.closeBrokers(r.map(function(t){var e=n[t];return delete n[t],e}))}n(this.brokers),n(this.longpollingBrokers)},S.prototype.refreshBrokerMetadata=function(t){this.refreshingMetadata||this.closing||(null==t&&(t=c.noop),this.refreshingMetadata=!0,s.waterfall([t=>this.getAvailableBroker(t),(t,e)=>this.loadMetadataFrom(t,e)],(e,n)=>{if(this.refreshingMetadata=!1,e)return t(e),this.emit("error",new k("refreshBrokerMetadata failed",e));this.updateMetadatas(n,!0),this.refreshBrokers(),t(e)}))},S.prototype.loadMetadataFrom=function(t,e){u(t&&t.isConnected());var n=this.nextId(),r=v.encodeMetadataRequest(this.clientId,n,[]);this.sendWhenReady(t,n,r,v.decodeMetadataResponse,e)},S.prototype.setBrokerMetadata=function(t){u(t,"brokerMetadata is empty");const e=this.brokerMetadata;this.brokerMetadata=t,this.brokerMetadataLastUpdate=Date.now(),c.isEmpty(e)||c.isEqual(e,t)||setImmediate(()=>this.emit("brokersChanged"))},S.prototype.setClusterMetadata=function(t){u(t,"clusterMetadata is empty"),this.clusterMetadata=t},S.prototype.setControllerId=function(t){this.clusterMetadata?this.clusterMetadata.controllerId=t:this.clusterMetadata={controllerId:t}},S.prototype.updateMetadatas=function(t,e){u(t&&Array.isArray(t)&&2===t.length,"metadata format is incorrect"),i.debug("updating metadatas"),this.setBrokerMetadata(t[0]),e?this.topicMetadata=t[1].metadata:c.extend(this.topicMetadata,t[1].metadata),t[1].clusterMetadata&&this.setClusterMetadata(t[1].clusterMetadata)},S.prototype.brokerForLeader=function(t,e){var n=this.getBrokers(e);if(void 0===t){if(!c.isEmpty(n))return n[Object.keys(n)[0]];if(c.isEmpty(this.brokerMetadata))return;t=Object.keys(this.brokerMetadata)[0]}var r=this.brokerMetadata[t];if(r)return n[r.host+":"+r.port]||this.setupBroker(r.host,r.port,e,n,t=>{t&&this.emit("error",t)})},S.prototype.wrapTimeoutIfNeeded=function(t,e,n,r){if(!1===this.options.requestTimeout&&null==r)return n;const i=r||this.options.requestTimeout;let o=null;const s=function(){clearTimeout(o),o=null,n.apply(null,arguments)};return o=setTimeout(()=>{this.unqueueCallback(t,e),n(new m(`Request timed out after ${i}ms`)),n=c.noop},i),s.timeoutId=o,s},S.prototype.queueCallback=function(t,e,n){n[1]=this.wrapTimeoutIfNeeded(t.socketId,e,n[1],n[2]),r.prototype.queueCallback.call(this,t,e,n)},S.prototype.getApiVersions=function(t,e){if(!t||!t.isConnected())return e(new g.BrokerNotAvailableError("Broker not available (getApiVersions)"));i.debug(`Sending versions request to ${t.socket.addr}`);const n=this.nextId(),r=v.encodeVersionsRequest(this.clientId,n);this.queueCallback(t.socket,n,[v.decodeVersionsResponse,e,this.options.versions.requestTimeout]),t.write(r)},S.prototype.getListGroups=function(t){if(!this.ready)return t(new Error("Client is not ready (getListGroups)"));const e=this.brokerMetadata;s.mapValuesLimit(e,this.options.maxAsyncRequests,(t,e,n)=>{const r=this.brokerForLeader(e);if(!r||!r.isConnected())return n(new g.BrokerNotAvailableError("Broker not available (getListGroups)"));const i=this.nextId(),o=v.encodeListGroups(this.clientId,i);this.sendWhenReady(r,i,o,v.decodeListGroups,n)},(e,n)=>{e?t(e):(n=c.values(n),t(null,c.merge.apply({},n)))})},S.prototype.getDescribeGroups=function(t,e){if(!this.ready)return e(new Error("Client is not ready (getDescribeGroups)"));s.groupByLimit(t,this.options.maxAsyncRequests,(t,e)=>{this.sendGroupCoordinatorRequest(t,(t,n)=>{e(t||null,n?n.coordinatorId:void 0)})},(t,n)=>{t?e(t):s.mapValuesLimit(n,this.options.maxAsyncRequests,(t,e,n)=>{const r=this.brokerForLeader(e);if(!r||!r.isConnected())return n(new g.BrokerNotAvailableError("Broker not available (getDescribeGroups)"));const i=this.nextId(),o=v.encodeDescribeGroups(this.clientId,i,t);this.sendWhenReady(r,i,o,v.decodeDescribeGroups,n)},(t,n)=>{if(t)return e(t);e(null,c.reduce(n,(t,e,n)=>(c.each(e,(e,r)=>{t[r]=e,t[r].brokerId=n}),t),{}))})})},S.prototype.close=function(t){i.debug("close client"),this.closing=!0,this.closeBrokers(this.brokers),this.closeBrokers(this.longpollingBrokers),this._clearAllTimeouts(),t&&setImmediate(function(){t(null)})},S.prototype.initializeBroker=function(t,e){if(!t||!t.isConnected())return e(new g.BrokerNotAvailableError("Broker not available (initializeBroker)"));this.options.versions.disabled?e(null):this.getApiVersions(t,(n,r)=>{if(n){if(!(n instanceof m))return i.error("ApiVersions failed with unexpected error",n),void e(n);i.debug("getApiVersions request timedout probably less than 0.10 using base support"),r=_}else i.debug(`Received versions response from ${t.socket.addr}`);if(c.isEmpty(r))return e(new Error(`getApiVersions response was empty for broker: ${t}`));i.debug("setting api support to %j",r),t.apiSupport=r,this.options.sasl?this.saslAuth(t,t=>{if(t)return e(t);e(null)}):e(null)})},S.prototype.saslAuth=function(t,e){const n=this.options.sasl.mechanism.toUpperCase(),r=t.apiSupport?t.apiSupport.saslHandshake.usable:void 0;"number"==typeof r?s.waterfall([e=>{i.debug(`Sending SASL/${n} handshake request to ${t}`);const o=this.nextId(),s=v.encodeSaslHandshakeRequest(this.clientId,o,r,n);this.queueCallback(t.socket,o,[v.decodeSaslHandshakeResponse,e]),t.write(s)},(e,o)=>{i.debug(`Sending SASL/${n} authentication request to ${t.socket.addr}`);const s=this.options.sasl,a=this.nextId(),u=v.encodeSaslAuthenticateRequest(this.clientId,a,r,s);let f=v.decodeSaslAuthenticateResponse;0===r&&(f=c.identity,t.socket.saslAuthCorrelationId=a),this.queueCallback(t.socket,a,[f,o]),t.write(u)}],(n,r)=>{n||(t.authenticated=!0),e(n)}):e(new g.SaslAuthenticationError(null,"Broker does not support SASL authentication"))},S.prototype.createBroker=function(t,e,n){i.debug("createBroker",t,e);var r,o=this;(r=o.ssl?p.connect(e,t,o.sslOptions):l.createConnection(e,t)).addr=t+":"+e,r.host=t,r.port=e,r.socketId=this.nextSocketId(),n&&(r.longpolling=!0),r.on("connect",function(){var t=this.error;this.error=null,t?(this.waiting=!1,o.initializeBroker(s,function(t){if(t)i.error("error initializing broker after reconnect",t);else{const t=s.getReadyEventName();o.emit(t)}o.emit("reconnect")})):o.initializeBroker(s,function(t){if(t)i.error("error initializing broker after connect",t),t instanceof g.SaslAuthenticationError&&o.emit("error",t);else{const t=s.getReadyEventName();o.emit(t)}o.emit("connect")})}),r.on("error",function(t){this.error=t,o.connecting||o.emit("socket_error",t)}),r.on("close",function(t){if(o.emit("close",this),!t&&o.closing)i.debug(`clearing ${this.addr} callback queue without error`),o.clearCallbackQueue(this);else{let t=this.error;if(!t)if(o.options.sasl&&void 0!==r.saslAuthCorrelationId){delete r.saslAuthCorrelationId;const e="Broker closed connection during SASL auth: bad credentials?";t=new g.SaslAuthenticationError(null,e)}else t=new g.BrokerNotAvailableError("Broker not available (socket closed)");o.clearCallbackQueue(this,t)}a(this)}),r.on("end",function(){a(this)}),r.buffer=new h,r.on("data",function(t){r.buffer.append(t),o.handleReceivedData(r)}),r.setKeepAlive(!0,6e4);const s=new d(r,this.noAckBatchOptions,this.options.idleConnection,this.options.sasl);function a(t){t.retrying||t.closing||(t.retrying=!0,t.retryTimer=setTimeout(function(){if(!t.closing){if(s.isIdle())return i.debug(`${o.clientId} to ${r.addr} is idle not reconnecting`),t.closing=!0,void o.deleteDisconnected(s);i.debug(`${o.clientId} reconnecting to ${t.addr}`),o.reconnectBroker(t)}},1e3))}return s},S.prototype.deleteDisconnected=function(t){if(!t.isConnected()){const e=this.getBrokers(t.socket.longpolling),n=t.socket.addr;u(e[n]===t),delete e[n]}},S.prototype.clearCallbackQueue=function(t,e){const n=t.socketId,r=this.cbqueue.get(n);r&&(r.forEach(function(t){const n=t[1];e?n(e):null!=n.timeoutId&&clearTimeout(n.timeoutId)}),this.cbqueue.delete(n))},S.prototype.loadMetadata=function(t){this.loadMetadataForTopics(null,t)},S.prototype.loadMetadataForTopics=function(t,e){const n=this.brokerForLeader();if(!n||!n.isConnected())return e(new g.BrokerNotAvailableError("Broker not available (loadMetadataForTopics)"));const r=(t,e)=>{t.isReady()?e(null):(i.debug("missing apiSupport waiting until broker is ready..."),this.waitUntilReady(t,e))};s.series([t=>{r(n,t)},e=>{const n=this.brokerForLeader(),r=this.nextId(),i=j(n,"metadata"),o=i.encoder(this.clientId,r,t);this.queueCallback(n.socket,r,[i.decoder,e]),n.write(o)}],(t,n)=>{e(t,n[1])})},S.prototype.createTopics=function(t,e){if(t.every(t=>"string"==typeof t))return r.prototype.createTopics.apply(this,arguments);this.sendControllerRequest("createTopics",[t,this.options.requestTimeout],e)},S.prototype.topicExists=function(t,e){this.loadMetadataForTopics([],(n,r)=>{if(n)return e(n);this.updateMetadatas(r);const i=c.difference(t,Object.keys(this.topicMetadata));if(0===i.length)return e(null);e(new g.TopicsNotExistError(i))})};const B=v.encodeMessageSet,R=v.Message;function j(t,e){u(!c.isEmpty(t.apiSupport),"apiSupport is empty");const n=t.apiSupport[e];if(!n)return null;const r=n.usable,i=E[e][r];return{encoder:i[0],decoder:i[1]}}S.prototype.waitUntilReady=function(t,e){i.debug("waitUntilReady "+t);let n=null;const r=()=>{i.debug("broker is now ready"),this._clearTimeout(n),n=null,e(null)},o=this.options.requestTimeout,s=t.getReadyEventName();n=this._createTimeout(()=>{this.removeListener(s,r),this._timeouts.delete(n),e(new m(`Request timed out after ${o}ms`))},o),this.once(s,r)},S.prototype._clearTimeout=function(t){clearTimeout(t),this._timeouts.delete(t)},S.prototype._clearAllTimeouts=function(){this._timeouts.forEach(function(t){clearTimeout(t)}),this._timeouts.clear()},S.prototype._createTimeout=function(t,e){const n=setTimeout(t,e);return this._timeouts.add(n),n},S.prototype.sendRequest=function(t,e){const n=this.payloadsByLeader(t.data.payloads),r=t.longpolling,o=s.ensureAsync((e,n,i)=>{const o=this.brokerForLeader(n,r);if(!o||!o.isConnected())return this.refreshBrokerMetadata(),void i(new g.BrokerNotAvailableError("Broker not available (sendRequest)"));if(!o.isReady())return void i(new Error("Broker is not ready"));if(r){if(o.socket.waiting)return void i(null);o.socket.waiting=!0}const s=this.nextId(),a=j(o,t.type),u=null!=t.data.args?a.encoder.apply(null,t.data.args):a.encoder,c=null!=t.data.decoderArgs?a.decoder.apply(null,t.data.decoderArgs):a.decoder,f=u(this.clientId,s,e);0===t.data.requireAcks?(o.writeAsync(f),i(null,{result:"no ack"})):(this.queueCallback(o.socket,s,[c,i]),o.write(f))}),a=s.ensureAsync((t,e)=>{const n=this.brokerForLeader(t,r);n.isReady()?e(null):(i.debug("missing apiSupport waiting until broker is ready..."),this.waitUntilReady(n,e))});s.mapValues(n,function(t,e,n){s.series([function(t){a(e,t)},function(n){o(t,e,n)}],function(t,e){if(t)return n(t);n(null,c.last(e))})},e)},S.prototype.sendRequestToBroker=function(t,e,n,r){const i=this.brokerMetadata[t];if(!i)return r(new Error("No broker with id "+t));const o=this.getBroker(i.host,i.port);s.waterfall([t=>{if(o.isReady())return t(null,o);this.waitUntilReady(o,e=>{t(e,o)})}],(t,o)=>{if(t)return r(t);const s=this.getBroker(i.host,i.port),a=this.nextId(),u=j(s,e);if(!u)return r(new g.ApiNotSupportedError);n.unshift(this.clientId,a);const c=u.encoder,f=u.decoder,l=c.apply(null,n);this.sendWhenReady(s,a,l,f,r)})},S.prototype.leaderLessPayloads=function(t){return c.filter(t,t=>!this.hasMetadata(t.topic,t.partition))},S.prototype.verifyPayloadsHasLeaders=function(t,e){const n=this.leaderLessPayloads(t);if(0===n.length)return e(null);i.debug("payloads has no leaders! Our metadata could be out of date try refreshingMetadata",n),this.refreshMetadata(c.map(n,"topic"),n=>{if(n)return e(n);const r=this.leaderLessPayloads(t);r.length?(i.error("leaders are still missing for %j",r),e(new g.BrokerNotAvailableError("Could not find the leader"))):e(null)})},S.prototype.wrapControllerCheckIfNeeded=function(t,e,n){if(n.isControllerWrapper)return n;var r=!1;const i=(o,s)=>{if(o instanceof b&&(this.setControllerId(null),!r))return r=!0,void this.sendControllerRequest(t,e,i);n(o,s)};return i.isControllerWrapper=!0,i},S.prototype.sendControllerRequest=function(t,e,n){this.getController((r,i,o)=>{if(r)return n(r);const s=c.clone(e),a=n;n=this.wrapControllerCheckIfNeeded(t,s,a),this.sendRequestToBroker(o,t,e,n)})},S.prototype.sendFetchRequest=function(t,e,n,o,a,u){const f=t.memberId,l=t.generationId;function h(e,n,r){const o=t.payloadMap;if(t.closing||t.connecting||t.rebalancing||t.memberId!==f||t.generationId!==l)return i.error("ignoring message due to it being from an old group - memberId: "+f,"!="+t.memberId+" - generationId: "+l+"!="+t.generationId),!1;if("message"===n){const{topic:t,partition:e,offset:n}=r;if(!o[t]||null==o[t][e])return i.error("received unexpected message",r,o),!1;if(null==n||n<o[t][e])return!1}return!0}null!=f||null!=l?(e=c.cloneDeep(e),null==u&&(u=c.noop),s.series([t=>{this.verifyPayloadsHasLeaders(e,t)},r=>{const i={type:"fetch",longpolling:!0,data:{payloads:e,args:[n,o],decoderArgs:[this._createMessageHandler(t,h),a]}};this.sendRequest(i,r)}],u)):r.prototype.sendFetchRequest.apply(this,arguments)},S.prototype.sendWhenReady=function(t,e,n,r,i){const o=()=>{this.queueCallback(t.socket,e,[r,i]),t.write(n)};t.isReady()?o():this.waitUntilReady(t,o)},S.prototype.sendProduceRequest=function(t,e,n,r){s.series([function(e){i.debug("compressing messages if needed"),function(t,e){s.each(t,function(t,e){const n=t.attributes,r=I(n);if(!r)return e(null);const i=B(t.messages,1);r.encode(i,function(r,i){if(r)return e(r);t.messages=[new R(0,n,t.key,i)],e(null)})},e)}(t,e)},e=>{this.verifyPayloadsHasLeaders(t,e)},r=>{const i={type:"produce",data:{payloads:t,args:[e,n],requireAcks:e}};this.sendRequest(i,r)}],(t,e)=>{t?("NotLeaderForPartition"!==t.message&&"UnknownTopicOrPartition"!==t.message||this.emit("brokersChanged"),r(t)):r(null,c.chain(e).last().reduce((t,e)=>c.merge(t,e),{}).value())})},S.prototype.handleReceivedData=function(t){if(void 0===t.saslAuthCorrelationId)return r.prototype.handleReceivedData.call(this,t);{if(t.buffer.length<4)return;const e=t.buffer.readInt32BE(0);if(t.buffer.length-4<e)return;const n=t.buffer.slice(4,4+e);this.invokeResponseCallback(t,t.saslAuthCorrelationId,n),delete t.saslAuthCorrelationId,t.buffer.consume(e+4)}},S.prototype.describeConfigs=function(t,e){if(!this.ready)return e(new Error("Client is not ready (describeConfigs)"));let n;if(c.forEach(t.resources,function(t){if(void 0===T[t.resourceType])return n=new Error(`Unexpected resource type ${t.resourceType} for resource ${t.resourceName}`),!1;t.resourceType=T[t.resourceType]}),n)return e(n);const r=this.brokerMetadata;s.mapValuesLimit(r,this.options.maxAsyncRequests,(e,n,r)=>{const i=this.brokerForLeader(n);if(!i||!i.isConnected())return r(new g.BrokerNotAvailableError("Broker not available (describeConfigs)"));const o=this.nextId();let s=0;i.apiSupport&&i.apiSupport.describeConfigs&&(s=i.apiSupport.describeConfigs.max),s=Math.min(s,2);const a=v.encodeDescribeConfigsRequest(this.clientId,o,t,s);this.sendWhenReady(i,o,a,v.decodeDescribeConfigsResponse(s),r)},(t,n)=>{t?e(t):(n=c.values(n),e(null,c.merge.apply({},n)))})},t.exports=S},function(t,e,n){t.exports={ApiNotSupportedError:n(77),BrokerNotAvailableError:n(78),TopicsNotExistError:n(79),FailedToRegisterConsumerError:n(80),InvalidConsumerOffsetError:n(81),FailedToRebalanceConsumerError:n(82),InvalidConfigError:n(43),SaslAuthenticationError:n(40),InvalidRequestError:n(41),ConsumerGroupErrors:[n(23),n(26),n(31),n(24),n(25),n(28),n(27)]}},function(t,e,n){var r=function(t,e){this.nested=e,t instanceof Error?e=t:void 0!==t&&Object.defineProperty(this,"message",{value:t,writable:!0,enumerable:!1,configurable:!0}),Error.captureStackTrace(this,this.constructor);var n=function(t,e){if(t.get)return{get:function(){var e=t.get.call(this);return i(e,this.nested)}};var n=t.value;return{value:i(n,e)}}(Object.getOwnPropertyDescriptor(this,"stack"),e);Object.defineProperty(this,"stack",n)};function i(t,e){return e&&(t+="\nCaused By: "+e.stack),t}(0,n(0).inherits)(r,Error),r.prototype.name="NestedError",t.exports=r},function(t,e,n){"use strict";!process.version||0===process.version.indexOf("v0.")||0===process.version.indexOf("v1.")&&0!==process.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,n)});case 4:return process.nextTick(function(){t.call(null,e,n,r)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return process.nextTick(function(){t.apply(null,i)})}}}:t.exports=process},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="GroupCoordinatorNotAvailable",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="IllegalGeneration",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="NotCoordinatorForGroup",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="GroupLoadInProgress",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="UnknownMemberId",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="RebalanceInProgress",t.exports=r},function(t,e,n){"use strict";var r=n(68),i=n(69),o=[null,{encode:r.gzip,decode:r.gunzip},i];t.exports=function(t){return o[3&t]||null}},function(t,e,n){t.exports=n(75)},function(t,e,n){"use strict";var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="HeartbeatTimeout",t.exports=r},function(t,e,n){"use strict";var r=n(0),i=n(33);function o(t,e,n){i.call(this,t,e,i.PARTITIONER_TYPES.cyclic,n)}r.inherits(o,i),o.PARTITIONER_TYPES=i.PARTITIONER_TYPES,t.exports=o},function(t,e,n){"use strict";var r=n(10),i=n(0),o=n(4),s=n(3),a=n(13),u=a.Message,c=a.KeyedMessage,f=a.ProduceRequest,l=n(11),h=l.DefaultPartitioner,p=l.RandomPartitioner,d=l.CyclicPartitioner,g=l.KeyedPartitioner,y=l.CustomPartitioner,m={default:0,random:1,cyclic:2,keyed:3,custom:4},b={0:h,1:p,2:d,3:g,4:y},v={requireAcks:1,ackTimeoutMs:100};function w(t,e,n,r){if(o.call(this),e=e||{},this.ready=!1,this.client=t,this.requireAcks=void 0===e.requireAcks?v.requireAcks:e.requireAcks,this.ackTimeoutMs=void 0===e.ackTimeoutMs?v.ackTimeoutMs:e.ackTimeoutMs,void 0!==r&&e.partitionerType!==m.custom)throw new Error("Partitioner Type must be custom if providing a customPartitioner.");if(void 0===r&&e.partitionerType===m.custom)throw new Error("No customer partitioner defined");var i=b[e.partitionerType]||b[n];this.partitioner=new i(r),this.connect()}i.inherits(w,o),w.prototype.connect=function(){var t=this;this.ready=this.client.ready,this.ready&&t.emit("ready"),this.client.on("ready",function(){t.ready||(t.ready=!0,t.emit("ready"))}),this.client.on("brokersChanged",function(){let e=Object.keys(this.topicMetadata);this.refreshMetadata(e,function(e){e&&t.emit("error",e)})}),this.client.on("error",function(e){t.emit("error",e)}),this.client.on("close",function(){})},w.prototype.send=function(t,e){var n=this.client,r=this.requireAcks,i=this.ackTimeoutMs;n.sendProduceRequest(this.buildPayloads(t,n.topicMetadata),r,i,e)},w.prototype.buildPayloads=function(t,e){const n=Object.create(null);return t.forEach(t=>{t.partition=t.hasOwnProperty("partition")?t.partition:this.partitioner.getPartition(s.map(e[t.topic],"partition"),t.key),t.attributes=t.hasOwnProperty("attributes")?t.attributes:0;let i=s.isArray(t.messages)?t.messages:[t.messages];i=i.map(function(e){return e instanceof c?e:new u(0,0,t.key,e,t.timestamp||Date.now())});let o=t.topic+t.partition,a=n[o];null==a?n[o]=new f(t.topic,t.partition,i,t.attributes):(r(a.attributes===t.attributes),Array.prototype.push.apply(a.messages,i))}),s.values(n)},w.prototype.createTopics=function(t,e,n){if(!this.ready)return n(new Error("Producer not ready!"));this.client.createTopics(t,e,n)},w.prototype.close=function(t){this.client.close(t)},w.PARTITIONER_TYPES=m,t.exports=w},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r={FetchRequest:["topic","partition","offset","maxBytes"],FetchResponse:["topic","fetchPartitions"],OffsetCommitRequest:["topic","partition","offset","metadata","committing","autoCommitIntervalMs"],OffsetCommitResponse:[],TopicAndPartition:["topic","partition"],PartitionMetadata:["topic","partition","leader","replicas","isr"],Message:["magic","attributes","key","value","timestamp"],ProduceRequest:["topic","partition","messages","attributes"],Request:["payloads","encoder","decoder","callback"]},i={GroupCoordinatorNotAvailable:n(23),IllegalGeneration:n(24),NotCoordinatorForGroup:n(25),GroupLoadInProgress:n(26),UnknownMemberId:n(27),RebalanceInProgress:n(28),NotController:n(36)};Object.keys(r).forEach(function(t){e[t]=function(){var t=arguments[0];return function(){for(var e=0;e<t.length;e++)this[t[e]]=arguments[e]}}(r[t])}),e.KEYS=r,e.ERROR_CODE={0:"NoError","-1":"Unknown",1:"OffsetOutOfRange",2:"InvalidMessage",3:"UnknownTopicOrPartition",4:"InvalidMessageSize",5:"LeaderNotAvailable",6:"NotLeaderForPartition",7:"RequestTimedOut",8:"BrokerNotAvailable",9:"ReplicaNotAvailable",10:"MessageSizeTooLarge",11:"StaleControllerEpochCode",12:"OffsetMetadataTooLargeCode",14:"GroupLoadInProgress",15:"GroupCoordinatorNotAvailable",16:"NotCoordinatorForGroup",17:"InvalidTopic",18:"RecordListTooLarge",19:"NotEnoughReplicas",20:"NotEnoughReplicasAfterAppend",21:"InvalidRequiredAcks",22:"IllegalGeneration",23:"InconsistentGroupProtocol",25:"UnknownMemberId",26:"InvalidSessionTimeout",27:"RebalanceInProgress",28:"InvalidCommitOffsetSize",29:"TopicAuthorizationFailed",30:"GroupAuthorizationFailed",31:"ClusterAuthorizationFailed",41:"NotController",42:"InvalidRequest"},e.GROUP_ERROR=i,e.REQUEST_TYPE={produce:0,fetch:1,offset:2,metadata:3,leader:4,stopReplica:5,updateMetadata:6,controlledShutdown:7,offsetCommit:8,offsetFetch:9,groupCoordinator:10,joinGroup:11,heartbeat:12,leaveGroup:13,syncGroup:14,describeGroups:15,listGroups:16,saslHandshake:17,apiVersions:18,createTopics:19,deleteTopics:20,describeConfigs:32,saslAuthenticate:36},e.KeyedMessage=function(t,n){e.Message.call(this,0,0,t,n,Date.now())}},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="NotController",t.exports=r},function(t,e,n){"use strict";var r=n(58),i=n(38),o=n(3),s=n(67),a=n(35),u=n(29),c=a.REQUEST_TYPE,f=a.ERROR_CODE,l=a.GROUP_ERROR,h=a.PartitionMetadata;const p=o.invert(c),d=n(72),g=n(40),y=n(41),m=n(8);var b=0,v=-1,w="consumer";function _(t){return t.reduce(function(t,e){return t[e.topic]=t[e.topic]||{},t[e.topic][e.partition]=e,t},{})}function E(t){return(new i).Int32BE(t.length).string(t).make()}function k(t,e,n,r){return(new i).Int16BE(n).Int16BE(r||b).Int32BE(e).Int16BE(t.length).string(t)}function I(t){return function(e,n){0==--n.topicNum&&e(),this.word16bs("topic").tap(function(t){this.buffer("topic",t.topic),t.topic=t.topic.toString()}).word32bs("partitionNum").loop(t)}}function T(t,e,n,r,i,s){n=_(n);var a=k(t,e,c.fetch,s),u=Object.keys(n);return a.Int32BE(v).Int32BE(r).Int32BE(i).Int32BE(u.length),u.forEach(function(t){a.Int16BE(t.length).string(t);var e=o.toPairs(n[t]).map(function(t){return t[1]});a.Int32BE(e.length),e.forEach(function(t){a.Int32BE(t.partition).Int64BE(t.offset).Int32BE(t.maxBytes)})}),E(a.make())}function O(t){if(null==t||0===t)return null;var e=f[t];return(e=e in l?new l[e]("Kafka Error Code: "+t):new Error(e)).errorCode=t,e}function S(t,e,n,i){if(!e)throw new Error("Missing callback");var s={},a=[];let c=0;e(null,"processingfetch"),r.parse(t).word32bs("size").word32bs("correlationId").tap(function(){i>=1&&this.word32bs("throttleTime")}).word32bs("topicNum").loop(I(function(t,i){0==--i.partitionNum&&t();s[i.topic]=s[i.topic]||{};let l=!1;this.word32bs("partition").word16bs("errorCode").word64bs("highWaterOffset").word32bs("messageSetSize").tap(function(t){this.buffer("messageSet",t.messageSetSize);const i=t.errorCode,h=t.topic,p=t.partition;if(0!==i)return a.push(t=>{const n=new Error(f[i]);n.topic=h,n.partition=p,e(n),t()});const g=t.highWaterOffset,{magicByte:y}=r.parse(t.messageSet).skip(16).word8bs("magicByte").vars;if(null!=y&&y>1)return a.push(t=>{const n=new Error("Not a message set. Magic byte is "+y);n.topic=h,n.partition=p,e(n),t()});!function t(e,n,i,s,a,c,f,l){const h=i.length;f[e].highWaterOffset=c;for(;i.length>0;){var p=26,g=!1;if(r.parse(i).word64bs("offset").word32bs("messageSize").tap(function(t){t.messageSize>i.length-12&&(g=!0)}).word32bs("crc").word8bs("magicByte").word8bs("attributes").tap(function(t){t.magicByte>0&&(this.word64bs("timestamp"),p+=8)}).word32bs("key").tap(function(t){-1!==t.key?(p+=t.key,this.buffer("key",t.key)):t.key=null}).word32bs("value").tap(function(r){if(-1!==r.value?(p+=r.value,this.buffer("value",r.value)):r.value=null,0===r.attributes&&r.messageSize>h){const t=r.offset+(l||0);return s(r=>{a(new d({topic:e,offset:t,partition:n})),r(null)})}if(!g&&null!==r.offset){const h=r.offset+(l||0),p=r.value,d=r.key;var i=u(r.attributes);if(!i){const t={topic:e,value:p,offset:h,partition:n,highWaterOffset:c,key:d};return r.timestamp&&(t.timestamp=new Date(r.timestamp)),s(e=>{a(null,t),e(null)})}s(r=>{i.decode(p,function(i,s){if(i)return a(i),void r(null);t(e,n,s,t=>{t(o.noop)},a,c,f,h),process.nextTick(()=>r(null))})})}}),g)break;i=i.slice(p)}}(h,p,t.messageSet,t=>{a.push(t),n&&++c>=n&&(c=0,a.push(t=>process.nextTick(t)))},(t,n)=>{if(t)l=!0;else if(l)return;!t&&n?(s[h][p]=n.offset,e(null,"message",n)):e(t)},g,s,0)})})),m.series(a,t=>{t&&e(t),e(null,"done",s)})}function C(t,e,n,r){var i=k(t,e,c.metadata,r);return r>0&&(Array.isArray(n)&&0===n.length||null===n)?(i.Int32BE(-1),E(i.make())):(0===r&&null===n&&(n=[]),i.Int32BE(n.length),n.forEach(function(t){i.Int16BE(t.length).string(t)}),E(i.make()))}function B(t,e){var n={},i={},s={},a=-1,u=[];function c(t,e){if(0==e.partitionNum--)return t();s[e.topic]=s[e.topic]||{},this.word16bs("errorCode").word32bs("partition").word32bs("leader").word32bs("replicasNum").tap(function(t){var e=this.buffer("replicas",4*t.replicasNum).vars.replicas;this.vars.replicas=A(t.replicasNum,e)}).word32bs("isrNum").tap(function(t){var e=this.buffer("isr",4*t.isrNum).vars.isr;this.vars.isr=A(t.isrNum,e),0===t.errorCode||9===t.errorCode?s[t.topic][t.partition]=new h(t.topic,t.partition,t.leader,t.replicas,t.isr):u.push(f[t.errorCode])})}return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("brokerNum").loop(function(t,r){if(0==r.brokerNum--)return t();this.word32bs("nodeId").word16bs("host").tap(function(t){this.buffer("host",t.host),t.host=t.host.toString()}).word32bs("port").tap(function(t){e<1||(this.word16bs("rack"),-1===t.rack?t.rack="":(this.buffer("rack",t.rack),t.rack=t.rack.toString()))}).tap(function(t){n[t.nodeId]={nodeId:t.nodeId,host:t.host,port:t.port}})}).tap(function(t){e<1||(this.word32bs("controllerId"),a=t.controllerId)}).word32bs("topicNum").loop(function(t,n){if(0==n.topicNum--)return t();this.word16bs("topicError").word16bs("topic").tap(function(t){this.buffer("topic",t.topic),t.topic=t.topic.toString(),e<1||this.word8bs("isInternal")}).word32bs("partitionNum").tap(function(t){if(0!==t.topicError)return u.push(f[t.topicError]);this.loop(c)})}),o.isEmpty(u)||(i.error=u),i.metadata=s,e>0&&(i.clusterMetadata={controllerId:a}),[n,i]}function R(t,e,n,r,i){var o=k(t,e,c.createTopics,i);return o.Int32BE(n.length),n.forEach(function(t){o.Int16BE(t.topic.length).string(t.topic),t.replicaAssignment?(o.Int32BE(-1),o.Int16BE(-1)):(o.Int32BE(t.partitions),o.Int16BE(t.replicationFactor)),t.replicaAssignment?(o.Int32BE(t.replicaAssignment.length),t.replicaAssignment.forEach(function(t){o.Int32BE(t.partition),o.Int32BE(t.replicas.length),t.replicas.forEach(function(t){o.Int32BE(t)})})):o.Int32BE(0),t.configEntries?(o.Int32BE(t.configEntries.length),t.configEntries.forEach(function(t){o.Int16BE(t.name.length).string(t.name),null==t.value?o.Int16BE(-1):o.Int16BE(t.value.length).string(t.value)})):o.Int32BE(0)}),o.Int32BE(r),i>0&&o.Int8(0),E(o.make())}function j(t,e){var n,i=[];return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(function(t,r){if(0==r.topicNum--)return t();this.word16bs("topic").tap(function(t){this.buffer("topic",t.topic),t.topic=t.topic.toString()}).word16bs("errorCode").tap(function(t){e>0&&(this.word16bs("errorMessage"),-1!==t.errorMessage&&(this.buffer("errorMessage",t.errorMessage),t.errorMessage=t.errorMessage.toString())),0!==t.errorCode&&(7!==t.errorCode&&41!==t.errorCode?e>0?i.push({topic:t.topic,error:t.errorMessage}):i.push({topic:t.topic,error:"received error code "+t.errorCode+" for topic"}):n=O(t.errorCode))})}),n||i}function A(t,e){for(var n=[],i=0;i<t;i++)n.push(r.parse(e).word32bs("r").vars.r),e=e.slice(4);return n}function x(t,e,n,r,i,s,a){s=_(s);var u=k(t,e,c.offsetCommit,a),f=Object.keys(s);return u.Int16BE(n.length).string(n).Int32BE(r).Int16BE(i.length).string(i).Int64BE(-1).Int32BE(f.length),f.forEach(function(t){u.Int16BE(t.length).string(t);var e=o.toPairs(s[t]).map(function(t){return t[1]});u.Int32BE(e.length),e.forEach(function(t){u.Int32BE(t.partition).Int64BE(t.offset).Int16BE(t.metadata.length).string(t.metadata)})}),E(u.make())}function M(t,e,n,r,i,s){n=_(n);var a=k(t,e,c.produce,s),u=Object.keys(n);return a.Int16BE(r).Int32BE(i).Int32BE(u.length),u.forEach(function(t){a.Int16BE(t.length).string(t);var e=o.toPairs(n[t]).map(function(t){return t[1]});a.Int32BE(e.length),e.forEach(function(t){var e=N(t.messages,2===s?1:0);a.Int32BE(t.partition).Int32BE(e.length).string(e)})}),E(a.make())}function N(t,e){var n=new i;return t.forEach(function(t){var r=function(t,e){null==e&&(e=0);var n=(new i).Int8(e).Int8(t.attributes);1===e&&n.Int64BE(t.timestamp);var r=t.key;P(n,r);var o=t.value;P(n,o),n=n.make();var a=s.signed(n);return(new i).Int32BE(a).string(n).make()}(t,e);n.Int64BE(0).Int32BE(r.length).string(r)}),n.make()}function P(t,e){null!=e?(Buffer.isBuffer(e)?t.Int32BE(e.length):("string"!=typeof e&&(e=e.toString()),t.Int32BE(Buffer.byteLength(e))),t.string(e)):t.Int32BE(-1)}function q(t){this.Int16BE(t.name.length).string(t.name).string(function(t){var e=(new i).Int16BE(t.version).Int32BE(t.subscription.length);if(t.subscription.forEach(function(t){e.Int16BE(t.length).string(t)}),t.userData){var n=JSON.stringify(t.userData),r=Buffer.from(n,"utf8");e.Int32BE(r.length).string(r)}else e.Int32BE(-1);return E(e.make())}(t))}function L(t){var e={partitions:{}};return r.parse(t).word16bs("version").tap(function(t){e.version=t.version}).word32bs("partitionAssignment").loop(function(t,n){if(0==n.partitionAssignment--)return t();var r,i=[];this.word16bs("topic").tap(function(t){this.buffer("topic",t.topic),r=t.topic.toString()}).word32bs("partitionsNum").loop(function(t,e){if(0==e.partitionsNum--)return t();this.word32bs("partition").tap(function(t){i.push(t.partition)})}),e.partitions[r]=i}).word32bs("userData").tap(function(t){if(null!=t.userData&&-1!==t.userData){this.buffer("userData",t.userData);try{e.userData=JSON.parse(t.userData.toString())}catch(t){e.userData="JSON Parse error"}}}),e}function F(t){var e=[],n=r.parse(t).word16bs("version").word32bs("subscriptionNum").loop(function(t,n){if(0==n.subscriptionNum--)return t();this.word16bs("topic").tap(function(){this.buffer("topic",n.topic),e.push(n.topic.toString())})}).word32bs("userData").tap(function(t){if(-1!==t.userData){this.buffer("userData",t.userData);try{t.userData=JSON.parse(t.userData.toString())}catch(e){t.userData="JSON parse error"}}else t.userData=void 0}).vars;return{subscription:e,version:n.version,userData:n.userData}}e.encodeSaslHandshakeRequest=function(t,e,n,r){var i=k(t,e,c.saslHandshake,n);return i.Int16BE(r.length).string(r.toUpperCase()),E(i.make())},e.decodeSaslHandshakeResponse=function(t){var e=[],n=null;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){n=t.errorCode}).word32bs("numMechanisms").loop(function(t,n){if(0==n.numMechanisms--)return t();this.word16be("mechanismSize").tap(function(t){this.buffer("mechanism",t.mechanismSize),e.push(t.mechanism)})}),null==n||0===n?e:new g(n,"Handshake failed.")},e.encodeSaslAuthenticateRequest=function(t,e,n,r){var o=r.username||"",s=r.password||"",a=null;if("PLAIN"!==r.mechanism.toUpperCase())return new Error("unsupported SASL auth type: "+r.mechanism.toUpperCase());if(a=(new i).string(o).Int8(0).string(o).Int8(0).string(s).make(),0===n)return E(a);var u=k(t,e,c.saslAuthenticate,0);return u.Int32BE(a.length).string(a),E(u.make())},e.decodeSaslAuthenticateResponse=function(t){var e=null,n=null,i=null;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").word16bs("errorMessageLength").tap(function(t){e=t.errorCode,this.buffer("errorMessage",t.errorMessageLength),n=t.errorMessage.toString()}).word32bs("authBytesLength").tap(function(t){this.buffer("authBytes",t.authBytesLength),i=t.authBytes.toString()}),null==e||0===e?i:new g(e,n)},e.encodeFetchRequest=function(t,e){return function(n,r,i){return T(n,r,i,t,e)}},e.decodeFetchResponse=function(t,e){return function(n){return S(n,t,e,0)}},e.encodeFetchRequestV1=function(t,e){return function(n,r,i){return T(n,r,i,t,e,1)}},e.decodeFetchResponseV1=function(t,e){return function(n){return S(n,t,e,1)}},e.encodeFetchRequestV2=function(t,e){return function(n,r,i){return T(n,r,i,t,e,2)}},e.encodeOffsetCommitRequest=function(t){return function(e,n,r){return function(t,e,n,r){r=_(r);var i=k(t,e,c.offsetCommit),s=Object.keys(r);return i.Int16BE(n.length).string(n).Int32BE(s.length),s.forEach(function(t){i.Int16BE(t.length).string(t);var e=o.toPairs(r[t]).map(function(t){return t[1]});i.Int32BE(e.length),e.forEach(function(t){i.Int32BE(t.partition).Int64BE(t.offset).Int16BE(t.metadata.length).string(t.metadata)})}),E(i.make())}(e,n,t,r)}},e.encodeOffsetCommitV1Request=function(t,e,n,r,i,o){return x(t,e,n,r,i,o,1)},e.encodeOffsetCommitV2Request=function(t,e,n,r,i,o){return x(t,e,n,r,i,o,2)},e.decodeOffsetCommitResponse=function(t){var e={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,n){0==--n.partitionNum&&t(),e[n.topic]=e[n.topic]||{},this.word32bs("partition").word16bs("errorcode").tap(function(t){e[t.topic].partition=t.partition,e[t.topic].errorCode=t.errorcode})})),e},e.encodeOffsetFetchRequest=function(t){return function(e,n,r){return function(t,e,n,r){r=_(r);var i=k(t,e,c.offsetFetch),s=Object.keys(r);return i.Int16BE(n.length).string(n).Int32BE(s.length),s.forEach(function(t){i.Int16BE(t.length).string(t);var e=o.toPairs(r[t]).map(function(t){return t[1]});i.Int32BE(e.length),e.forEach(function(t){i.Int32BE(t.partition)})}),E(i.make())}(e,n,t,r)}},e.encodeOffsetFetchV1Request=function(t,e,n,r){var i=k(t,e,c.offsetFetch,1),o=Object.keys(r);return i.Int16BE(n.length).string(n).Int32BE(o.length),o.forEach(function(t){i.Int16BE(t.length).string(t).Int32BE(r[t].length),r[t].forEach(function(t){i.Int32BE(t)})}),E(i.make())},e.decodeOffsetFetchResponse=function(t){var e={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,n){0==--n.partitionNum&&t(),e[n.topic]=e[n.topic]||{},this.word32bs("partition").word64bs("offset").word16bs("metadata").tap(function(t){-1!==t.metadata&&this.buffer("metadata",t.metadata)}).word16bs("errorCode").tap(function(t){e[t.topic][t.partition]=0===t.errorCode?t.offset:-1})})),e},e.decodeOffsetFetchV1Response=function(t){var e={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,n){0==--n.partitionNum&&t(),e[n.topic]=e[n.topic]||{},this.word32bs("partition").word64bs("offset").word16bs("metadata").tap(function(t){-1!==t.metadata&&this.buffer("metadata",t.metadata)}).word16bs("errorCode").tap(function(t){0===t.metadata.length&&0===t.offset?e[t.topic][t.partition]=-1:e[t.topic][t.partition]=0===t.errorCode?t.offset:-1})})),e},e.encodeMetadataRequest=function(t,e,n){return C(t,e,n,0)},e.decodeMetadataResponse=function(t){return B(t,0)},e.encodeMetadataV1Request=function(t,e,n){return C(t,e,n,1)},e.decodeMetadataV1Response=function(t){return B(t,1)},e.encodeCreateTopicRequest=function(t,e,n,r){return R(t,e,n,r,0)},e.encodeCreateTopicRequestV1=function(t,e,n,r){return R(t,e,n,r,1)},e.decodeCreateTopicResponse=function(t){return j(t,0)},e.decodeCreateTopicResponseV1=function(t){return j(t,1)},e.encodeProduceRequest=function(t,e){return function(n,r,i){return M(n,r,i,t,e,0)}},e.encodeProduceV1Request=function(t,e){return function(n,r,i){return M(n,r,i,t,e,1)}},e.encodeProduceV2Request=function(t,e){return function(n,r,i){return M(n,r,i,t,e,2)}},e.decodeProduceResponse=function(t){var e,n={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,r){0==--r.partitionNum&&t(),n[r.topic]=n[r.topic]||{},this.word32bs("partition").word16bs("errorCode").word64bs("offset").tap(function(t){t.errorCode?e=new Error(f[t.errorCode]):n[t.topic][t.partition]=t.offset})})),e||n},e.decodeProduceV1Response=function(t){var e,n={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,r){0==--r.partitionNum&&t(),n[r.topic]=n[r.topic]||{},this.word32bs("partition").word16bs("errorCode").word64bs("offset").tap(function(t){t.errorCode?e=new Error(f[t.errorCode]):n[t.topic][t.partition]=t.offset})})).word32bs("throttleTime"),e||n},e.decodeProduceV2Response=function(t){var e,n={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,r){0==--r.partitionNum&&t(),n[r.topic]=n[r.topic]||{},this.word32bs("partition").word16bs("errorCode").word64bs("offset").word64bs("timestamp").tap(function(t){t.errorCode?e=new Error(f[t.errorCode]):n[t.topic][t.partition]=t.offset})})).word32bs("throttleTime"),e||n},e.encodeOffsetRequest=function(t,e,n){n=_(n);var r=k(t,e,c.offset),i=Object.keys(n);return r.Int32BE(v).Int32BE(i.length),i.forEach(function(t){r.Int16BE(t.length).string(t);var e=o.toPairs(n[t]).map(function(t){return t[1]});r.Int32BE(e.length),e.forEach(function(t){r.Int32BE(t.partition).Int64BE(t.time).Int32BE(t.maxNum)})}),E(r.make())},e.decodeOffsetResponse=function(t){var e={};function n(t,n){--n.offsetNum<=0&&t(),e[n.topic][n.partition]=e[n.topic][n.partition]||[],this.word64bs("offset").tap(function(t){null!=t.offset&&e[t.topic][t.partition].push(t.offset)})}return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("topicNum").loop(I(function(t,r){0==--r.partitionNum&&t(),e[r.topic]=e[r.topic]||{},this.word32bs("partition").word16bs("errorCode").word32bs("offsetNum").loop(n)})),e},e.encodeMessageSet=N,e.encodeJoinGroupRequest=function(t,e,n,r,i,o){var s=k(t,e,c.joinGroup);return s.Int16BE(n.length).string(n).Int32BE(i).Int16BE(r.length).string(r).Int16BE(w.length).string(w).Int32BE(o.length),o.forEach(q.bind(s)),E(s.make())},e.decodeJoinGroupResponse=function(t){var e,n={members:[]};return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){e=O(t.errorCode)}).word32bs("generationId").tap(function(t){n.generationId=t.generationId}).word16bs("groupProtocol").tap(function(t){this.buffer("groupProtocol",t.groupProtocol),n.groupProtocol=t.groupProtocol=t.groupProtocol.toString()}).word16bs("leaderId").tap(function(t){this.buffer("leaderId",t.leaderId),n.leaderId=t.leaderId=t.leaderId.toString()}).word16bs("memberId").tap(function(t){this.buffer("memberId",t.memberId),n.memberId=t.memberId=t.memberId.toString()}).word32bs("memberNum").loop(function(t,r){return e?t():0==r.memberNum--?t():void this.word16bs("groupMemberId").tap(function(t){this.buffer("groupMemberId",t.groupMemberId),t.memberId=t.groupMemberId.toString()}).word32bs("memberMetadata").tap(function(t){t.memberMetadata>-1&&(this.buffer("memberMetadata",t.memberMetadata),(i=F(this.vars.memberMetadata)).id=t.memberId,n.members.push(i))});var i}),e||n},e.encodeGroupCoordinatorRequest=function(t,e,n){var r=k(t,e,c.groupCoordinator);return r.Int16BE(n.length).string(n),E(r.make())},e.decodeGroupCoordinatorResponse=function(t){var e;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").word32bs("coordinatorId").word16bs("coordinatorHost").tap(function(t){this.buffer("coordinatorHost",t.coordinatorHost),t.coordinatorHost=t.coordinatorHost.toString()}).word32bs("coordinatorPort").tap(function(t){e=0===t.errorCode?{coordinatorHost:t.coordinatorHost,coordinatorPort:t.coordinatorPort,coordinatorId:t.coordinatorId}:O(t.errorCode)}),e},e.encodeGroupHeartbeatRequest=function(t,e,n,r,i){var o=k(t,e,c.heartbeat);return o.Int16BE(n.length).string(n).Int32BE(r).Int16BE(i.length).string(i),E(o.make())},e.decodeGroupHeartbeatResponse=function(t){var e=null;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){e=O(t.errorCode)}),e},e.encodeSyncGroupRequest=function(t,e,n,r,o,s){var a=k(t,e,c.syncGroup);return a.Int16BE(n.length).string(n).Int32BE(r).Int16BE(o.length).string(o),s&&s.length?(a.Int32BE(s.length),s.forEach(function(t){a.Int16BE(t.memberId.length).string(t.memberId).string(function(t){var e=Object.keys(t.topicPartitions).length,n=(new i).Int16BE(t.version).Int32BE(e);for(var r in t.topicPartitions)if(t.topicPartitions.hasOwnProperty(r)){var o=t.topicPartitions[r];n.Int16BE(r.length).string(r).Int32BE(o.length),o.forEach(function(t){n.Int32BE(t)})}if(t.userData){var s=JSON.stringify(t.userData),a=Buffer.from(s,"utf8");n.Int32BE(a.length).string(a)}else n.Int32BE(-1);return E(n.make())}(t))})):a.Int32BE(0),E(a.make())},e.decodeSyncGroupResponse=function(t){var e;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){e=O(t.errorCode)}).word32bs("memberAssignment").tap(function(t){e||(this.buffer("memberAssignment",t.memberAssignment),e=L(t.memberAssignment))}),e},e.encodeLeaveGroupRequest=function(t,e,n,r){var i=k(t,e,c.leaveGroup);return i.Int16BE(n.length).string(n).Int16BE(r.length).string(r),E(i.make())},e.decodeLeaveGroupResponse=function(t){var e=null;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){e=O(t.errorCode)}),e},e.encodeDescribeGroups=function(t,e,n){const r=k(t,e,c.describeGroups);return r.Int32BE(n.length),n.forEach(t=>{r.Int16BE(t.length).string(t)}),E(r.make())},e.decodeDescribeGroups=function(t){let e,n={};return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("describeNum").loop(function(t,r){if(0==r.describeNum--)return t();let i={members:[]};this.word16bs("errorCode").tap(t=>{e=O(t.errorCode)}).word16bs("groupId").tap(t=>{this.buffer("groupId",t.groupId),i.groupId=t.groupId.toString()}).word16bs("state").tap(t=>{this.buffer("state",t.state),i.state=t.state.toString()}).word16bs("protocolType").tap(t=>{this.buffer("protocolType",t.protocolType),i.protocolType=t.protocolType.toString()}).word16bs("protocol").tap(t=>{this.buffer("protocol",t.protocol),i.protocol=t.protocol.toString(),n[i.groupId]=i}).word32bs("membersNum").loop(function(t,e){if(0==e.membersNum--)return t();let r={};this.word16bs("memberId").tap(t=>{this.buffer("memberId",t.memberId),r.memberId=t.memberId.toString()}).word16bs("clientId").tap(t=>{this.buffer("clientId",t.clientId),r.clientId=t.clientId.toString()}).word16bs("clientHost").tap(t=>{this.buffer("clientHost",t.clientHost),r.clientHost=t.clientHost.toString()}).word32bs("memberMetadata").tap(t=>{if(t.memberMetadata>-1){this.buffer("memberMetadata",t.memberMetadata);let e=F(t.memberMetadata);e.id=r.memberId,r.memberMetadata=e}}).word32bs("memberAssignment").tap(t=>{this.buffer("memberAssignment",t.memberAssignment),r.memberAssignment=L(t.memberAssignment),i.members.push(r),n[i.groupId]=i})})}),e||n},e.encodeListGroups=function(t,e){return E(k(t,e,c.listGroups).make())},e.decodeListGroups=function(t){let e,n={};return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(t=>{e=O(t.errorCode)}).word32bs("groupNum").loop(function(t,e){if(0==e.groupNum--)return t();this.word16bs("groupId").tap(function(t){this.buffer("groupId",t.groupId),t.groupId=t.groupId.toString()}).word16bs("protocolType").tap(function(t){this.buffer("protocolType",t.protocolType),n[t.groupId]=t.protocolType.toString()})}),e||n},e.encodeVersionsRequest=function(t,e){return E(k(t,e,c.apiVersions).make())},e.decodeVersionsResponse=function(t){const e=n(42).maxSupport,i=Object.create(null);let o=null;return r.parse(t).word32bs("size").word32bs("correlationId").word16bs("errorCode").tap(function(t){o=O(t.errorCode)}).word32bs("apiNum").loop(function(t,n){if(0==n.apiNum--||o)return t();let r,s,a;this.word16bs("apiKey").tap(t=>{r=t.apiKey}).word16bs("minVersion").tap(t=>{s=t.minVersion}).word16bs("maxVersion").tap(t=>{a=t.maxVersion});const u=r in p?p[r]:r;i[u]={min:s,max:a,usable:null!=e[u]&&Math.min(e[u],a)}}),o||i},e.encodeDescribeConfigsRequest=function(t,e,n,r){let i=k(t,e,c.describeConfigs,r);const o=n.resources;return i.Int32BE(o.length),o.forEach(function(t){i.Int8(t.resourceType),i.Int16BE(t.resourceName.length),i.string(t.resourceName),null===t.configNames||Array.isArray(t.configNames)&&0===t.configNames.length?i.Int32BE(-1):(i.Int32BE(t.configNames.length),t.configNames.forEach(function(t){i.Int16BE(t.length).string(t)}))}),r>0&&i.Int8(n.includeSynonyms||0),E(i.make())},e.decodeDescribeConfigsResponse=function(t){return function(e){return function(t,e){let n,i=[];return r.parse(t).word32bs("size").word32bs("correlationId").word32bs("throttleTime").word32bs("resourceNum").loop(function(t,r){if(0==r.resourceNum--)return t();let o={configEntries:[]};this.word16bs("errorCode").word16bs("errorMessage").tap(function(t){0!==t.errorCode&&(-1===t.errorMessage?t.errorMessage="":(this.buffer("errorMessage",t.errorMessage),t.errorMessage=t.errorMessage.toString()),n=42===t.errorCode?new y(t.errorMessage):O(t.errorCode))}).word8bs("resourceType").word16bs("resourceName").tap(function(t){this.buffer("resourceName",t.resourceName),o.resourceType=t.resourceType.toString(),o.resourceName=t.resourceName.toString()}).word32bs("configEntriesNum").loop(function(t,n){if(-1===n.configEntriesNum||0==n.configEntriesNum--)return t();let r={synonyms:[]};function i(t,e){if(-1===e.configSynonymsNum||0==e.configSynonymsNum--)return t();let n={};this.word16bs("configSynonymName").tap(function(t){this.buffer("configSynonymName",t.configSynonymName),n.configSynonymName=t.configSynonymName.toString()}).word16bs("configSynonymValue").tap(function(t){-1===t.configSynonymValue?n.configSynonymValue="":(this.buffer("configSynonymValue",t.configSynonymValue),n.configSynonymValue=t.configSynonymValue.toString())}).word8bs("configSynonymSource").tap(function(){n.configSynonymSource=e.configSynonymSource.toString(),r.synonyms.push(n)})}this.word16bs("configName").tap(function(t){this.buffer("configName",t.configName),r.configName=t.configName.toString()}).word16bs("configValue").tap(function(t){-1===t.configValue?t.configValue="":(this.buffer("configValue",t.configValue),t.configValue=t.configValue.toString()),r.configValue=t.configValue}).word8bs("readOnly").word8bs("configSource").word8bs("isSensitive").tap(function(){e>0&&(this.word32bs("configSynonymsNum"),this.loop(i))}).tap(function(t){r.readOnly=Boolean(t.readOnly),r.configSource=t.configSource,r.isSensitive=Boolean(t.isSensitive),o.configEntries.push(r)})}).tap(function(){i.push(o)})}),n||i}(e,t)}}},function(t,e,n){var r="./lib/";process.env.BUFFERMAKER_COVERAGE&&(r="./lib-cov/"),t.exports=n(63)(r+"BufferMaker")},function(t,e){t.exports=require("buffer")},function(t,e,n){var r=function(t,e){Error.captureStackTrace(this,this),this.errorCode=t,this.message=e};n(0).inherits(r,Error),r.prototype.name="SaslAuthenticationError",t.exports=r},function(t,e,n){const r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="InvalidRequest",t.exports=r},function(t,e,n){"use strict";const r=n(37),i=n(3),o={produce:[[r.encodeProduceRequest,r.decodeProduceResponse],[r.encodeProduceV1Request,r.decodeProduceV1Response],[r.encodeProduceV2Request,r.decodeProduceV2Response]],fetch:[[r.encodeFetchRequest,r.decodeFetchResponse],[r.encodeFetchRequestV1,r.decodeFetchResponseV1],[r.encodeFetchRequestV2,r.decodeFetchResponseV1]],offset:[[r.encodeOffsetRequest,r.decodeOffsetResponse]],metadata:[[r.encodeMetadataRequest,r.decodeMetadataResponse],[r.encodeMetadataV1Request,r.decodeMetadataV1Response]],leader:null,stopReplica:null,updateMetadata:null,controlledShutdown:null,offsetCommit:[[r.encodeOffsetCommitRequest,r.decodeOffsetCommitResponse],[r.encodeOffsetCommitV1Request,r.decodeOffsetCommitResponse],[r.encodeOffsetCommitV2Request,r.decodeOffsetCommitResponse]],offsetFetch:[[r.encodeOffsetFetchRequest,r.decodeOffsetFetchResponse],[r.encodeOffsetFetchV1Request,r.decodeOffsetFetchV1Response]],groupCoordinator:[[r.encodeGroupCoordinatorRequest,r.decodeGroupCoordinatorResponse]],joinGroup:[[r.encodeJoinGroupRequest,r.decodeJoinGroupResponse]],heartbeat:[[r.encodeGroupHeartbeatRequest,r.decodeGroupHeartbeatResponse]],leaveGroup:[[r.encodeLeaveGroupRequest,r.decodeLeaveGroupResponse]],syncGroup:[[r.encodeJoinGroupRequest,r.decodeJoinGroupResponse]],describeGroups:[[r.encodeDescribeGroups,r.decodeDescribeGroups]],listGroups:[[r.encodeListGroups,r.decodeListGroups]],saslHandshake:[[r.encodeSaslHandshakeRequest,r.decodeSaslHandshakeResponse],[r.encodeSaslHandshakeRequest,r.decodeSaslHandshakeResponse]],apiVersions:[[r.encodeVersionsRequest,r.decodeVersionsResponse]],createTopics:[[r.encodeCreateTopicRequest,r.decodeCreateTopicResponse],[r.encodeCreateTopicRequestV1,r.decodeCreateTopicResponseV1]],deleteTopics:null,describeConfigs:[[r.encodeDescribeConfigsRequest,r.decodeDescribeConfigsResponse]],saslAuthenticate:[[r.encodeSaslAuthenticationRequest,r.decodeSaslAuthenticationResponse]]};t.exports={apiMap:o,maxSupport:i.mapValues(o,function(t){return null!=t?t.length-1:null}),baseSupport:Object.assign(i.mapValues(o,function(t){return null!=t?{min:0,max:0,usable:0}:null}),{fetch:{min:0,max:1,usable:1},produce:{min:0,max:1,usable:1},offsetCommit:{min:0,max:2,usable:2},offsetFetch:{min:0,max:1,usable:1}})}},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="InvalidConfigError",t.exports=r},function(t,e,n){var r;function i(t){function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=s[u];n=i.call(t,o),s.splice(u,1),u--}return n}),e.formatArgs.call(t,s),(n.log||e.log||console.log.bind(console)).apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(86),e.names=[],e.skips=[],e.formatters={}},function(t,e){t.exports=require("net")},function(t,e,n){"use strict";var r=n(22);t.exports=b;var i,o=n(93);b.ReadableState=m;n(4).EventEmitter;var s=function(t,e){return t.listeners(e).length},a=n(47),u=n(14).Buffer,c=global.Uint8Array||function(){};var f=n(15);f.inherits=n(16);var l=n(0),h=void 0;h=l&&l.debuglog?l.debuglog("stream"):function(){};var p,d=n(95),g=n(48);f.inherits(b,a);var y=["error","close","destroy","pause","resume"];function m(t,e){t=t||{};var r=e instanceof(i=i||n(12));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var o=t.highWaterMark,s=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:r&&(s||0===s)?s:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=n(50).StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(i=i||n(12),!(this instanceof b))return new b(t);this._readableState=new m(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function v(t,e,n,r,i){var o,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,k(t)}(t,s)):(i||(o=function(t,e){var n;r=e,u.isBuffer(r)||r instanceof c||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(s,e)),o?t.emit("error",o):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),r?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):w(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!n?(e=s.decoder.write(e),s.objectMode||0!==e.length?w(t,s,e,!1):T(t,s)):w(t,s,e,!1))):r||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function w(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),T(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),n=!0),v(this,t,e,!1,n)},b.prototype.unshift=function(t){return v(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=n(50).StringDecoder),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var _=8388608;function E(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=_?t=_:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(h("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?r.nextTick(I,t):I(t))}function I(t){h("emit readable"),t.emit("readable"),B(t)}function T(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(h("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function S(t){h("readable nexttick read 0"),t.read(0)}function C(t,e){e.reading||(h("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),B(t),e.flowing&&!e.reading&&t.read(0)}function B(t){var e=t._readableState;for(h("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,s=t>o.length?o.length:t;if(s===o.length?i+=o:i+=o.slice(0,t),0===(t-=s)){s===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(s));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,s=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,s),0===(t-=s)){s===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(s));break}++i}return e.length-=i,n}(t,e);return r}(t,e.buffer,e.decoder),n);var n}function j(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,r.nextTick(A,e,t))}function A(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function x(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){h("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return h("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?j(this):k(this),null;if(0===(t=E(t,e))&&e.ended)return 0===e.length&&j(this),null;var r,i=e.needReadable;return h("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&h("length less than watermark",i=!0),e.ended||e.reading?h("reading or ended",i=!1):i&&(h("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=E(n,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&j(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=t;break;case 1:i.pipes=[i.pipes,t];break;default:i.pipes.push(t)}i.pipesCount+=1,h("pipe count=%d opts=%j",i.pipesCount,e);var a=(!e||!1!==e.end)&&t!==process.stdout&&t!==process.stderr?c:b;function u(e,r){h("onunpipe"),e===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,h("cleanup"),t.removeListener("close",y),t.removeListener("finish",m),t.removeListener("drain",f),t.removeListener("error",g),t.removeListener("unpipe",u),n.removeListener("end",c),n.removeListener("end",b),n.removeListener("data",d),l=!0,!i.awaitDrain||t._writableState&&!t._writableState.needDrain||f())}function c(){h("onend"),t.end()}i.endEmitted?r.nextTick(a):n.once("end",a),t.on("unpipe",u);var f=function(t){return function(){var e=t._readableState;h("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,B(t))}}(n);t.on("drain",f);var l=!1;var p=!1;function d(e){h("ondata"),p=!1,!1!==t.write(e)||p||((1===i.pipesCount&&i.pipes===t||i.pipesCount>1&&-1!==x(i.pipes,t))&&!l&&(h("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function g(e){h("onerror",e),b(),t.removeListener("error",g),0===s(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",m),b()}function m(){h("onfinish"),t.removeListener("close",y),b()}function b(){h("unpipe"),n.unpipe(t)}return n.on("data",d),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",g),t.once("close",y),t.once("finish",m),t.emit("pipe",n),i.flowing||(h("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var s=x(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=a.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&k(this):r.nextTick(S,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(h("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,r.nextTick(C,t,e))}(this,t)),this},b.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",function(){if(h("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(i){(h("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))}),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<y.length;o++)t.on(y[o],this.emit.bind(this,y[o]));return this._read=function(e){h("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=R},function(t,e,n){t.exports=n(6)},function(t,e,n){"use strict";var r=n(22);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return o||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(22);function i(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=y;var o,s=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:r.nextTick;y.WritableState=g;var a=n(15);a.inherits=n(16);var u={deprecate:n(96)},c=n(47),f=n(14).Buffer,l=global.Uint8Array||function(){};var h,p=n(48);function d(){}function g(t,e){o=o||n(12),t=t||{};var a=e instanceof o;this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var u=t.highWaterMark,c=t.writableHighWaterMark,f=this.objectMode?16:16384;this.highWaterMark=u||0===u?u:a&&(c||0===c)?c:f,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===t.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,o){--e.pendingcb,n?(r.nextTick(o,i),r.nextTick(E,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(o(i),t._writableState.errorEmitted=!0,t.emit("error",i),E(t,e))}(t,n,i,e,o);else{var a=w(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||v(t,n),i?s(b,t,n,a,o):b(t,n,a,o)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function y(t){if(o=o||n(12),!(h.call(y,this)||this instanceof o))return new y(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function m(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function b(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),E(t,e)}function v(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,o=new Array(r),s=e.corkedRequestsFree;s.entry=n;for(var a=0,u=!0;n;)o[a]=n,n.isBuf||(u=!1),n=n.next,a+=1;o.allBuffers=u,m(t,e,!0,e.length,o,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new i(e),e.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,f=n.encoding,l=n.callback;if(m(t,e,!1,e.objectMode?1:c.length,c,f,l),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function w(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){t._final(function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),E(t,e)})}function E(t,e){var n=w(e);return n&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,r.nextTick(_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}a.inherits(y,c),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(h=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(t){return!!h.call(this,t)||this===y&&(t&&t._writableState instanceof g)}})):h=function(t){return t instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(t,e,n){var i,o=this._writableState,s=!1,a=!o.objectMode&&(i=t,f.isBuffer(i)||i instanceof l);return a&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),a?e="buffer":e||(e=o.defaultEncoding),"function"!=typeof n&&(n=d),o.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),r.nextTick(e,n)}(this,n):(a||function(t,e,n,i){var o=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),r.nextTick(i,s),o=!1),o}(this,o,t,n))&&(o.pendingcb++,s=function(t,e,n,r,i,o){if(!n){var s=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n));return e}(e,r,i);r!==s&&(n=!0,i="buffer",r=s)}var a=e.objectMode?1:r.length;e.length+=a;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else m(t,e,!1,a,r,i,o);return u}(this,o,a,t,e,n)),s},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||v(this,t))},y.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,E(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,i,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),y.prototype.destroy=p.destroy,y.prototype._undestroy=p.undestroy,y.prototype._destroy=function(t,e){this.end(),e(t)}},function(t,e,n){"use strict";var r=n(14).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=f,this.end=l,e=3;break;default:return this.write=h,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function f(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function l(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function h(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=s(e[r]))>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=s;var r=n(12),i=n(15);function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function s(t){if(!(this instanceof s))return new s(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,n){u(t,e,n)}):u(this,null,null)}function u(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(16),i.inherits(s,r),s.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},s.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},s.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},s.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},s.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(t,e,n){"use strict";var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="TimeoutError",t.exports=r},function(t,e,n){"use strict";t.exports={RESOURCE_TYPES:{topic:"topic",broker:"broker"},resourceTypeMap:{topic:2,broker:4}}},function(t,e,n){"use strict";const r=n(5)("kafka-node:ConsumerGroup"),i=n(0),o=n(4),s=n(19),a=n(55),u=n(3),c=n(8),f=n(9).validateConfig,l=n(103),h=n(104),p=n(9).createTopicPartitionList,d=n(20),g=n(21),y=n(10),m=n(105),b={latest:-1,earliest:-2,none:!1},v={groupId:"kafka-node-group",autoCommit:!0,autoCommitIntervalMs:5e3,fetchMaxWaitMs:100,paused:!1,maxNumSegments:1e3,fetchMinBytes:1,fetchMaxBytes:1048576,maxTickMessages:1e3,fromOffset:"latest",outOfRangeOffset:"earliest",sessionTimeout:3e4,retries:10,retryFactor:1.8,retryMinTimeout:1e3,commitOffsetsOnFirstJoin:!0,connectOnReady:!0,migrateHLC:!1,onRebalance:null,topicPartitionCheckInterval:3e4,protocol:["roundrobin"],encoding:"utf8"};function w(t,e){o.call(this);const n=this;if(this.options=u.defaults(t||{},v),this.options.heartbeatInterval||(this.options.heartbeatInterval=Math.floor(this.options.sessionTimeout/3)),!0===t.ssl&&(t.ssl={}),!(this.options.fromOffset in b))throw new Error(`fromOffset ${this.options.fromOffset} should be either: ${Object.keys(b).join(", ")}`);if(!(this.options.outOfRangeOffset in b))throw new Error(`outOfRangeOffset ${this.options.outOfRangeOffset} should be either: ${Object.keys(b).join(", ")}`);if(t.clientId=t.id,this.client=new s(t),u.isString(e)&&(e=[e]),y(Array.isArray(e),"Array of topics is required"),y(e.length,"Array of topics shall not be empty"),this.topics=e,this.recovery=new l(this),this.setupProtocols(this.options.protocol),this.options.connectOnReady&&!this.options.migrateHLC&&this.client.once("ready",this.connect.bind(this)),this.options.migrateHLC)throw new Error("This version of KafkaClient cannot be used to migrate from Zookeeper use older version of kafka-node instead");this.client.on("error",function(t){r.error("Error from %s",n.client.clientId,t),n.emit("error",t)});const i=u.debounce(function(){r.debug("brokersChanged refreshing metadata"),n.client.refreshMetadata(n.topics,function(t){t?n.emit("error",t):n.reconnectIfNeeded()})},200);this.client.on("brokersChanged",function(){n.pause(),i()}),this.client.on("reconnect",function(){setImmediate(function(){n.reconnectIfNeeded()})}),this.on("offsetOutOfRange",t=>{this.pause(),"none"!==this.options.outOfRangeOffset?(t.time=b[this.options.outOfRangeOffset],this.getOffset().fetch([t],(e,n)=>{if(e)return void this.emit("error",new d.InvalidConsumerOffsetError(`Fetching ${this.options.outOfRangeOffset} offset failed`,e));const i=u.head(n[t.topic][t.partition]),o=u.find(this.topicPayloads,{topic:t.topic,partition:t.partition}).offset;r.debug("replacing %s-%s stale offset of %d with %d",t.topic,t.partition,o,i),this.setOffset(t.topic,t.partition,i),this.resume()})):this.emit("error",new d.InvalidConsumerOffsetError(`Offset out of range for topic "${t.topic}" partition ${t.partition}`))}),this._pendingFetches=0,this.on("processingfetch",()=>this._onFetchProcessing()),this.on("done",t=>this._onFetchDone(t)),this.options.groupId&&f("options.groupId",this.options.groupId),this.isLeader=!1,this.coordinatorId=null,this.generationId=null,this.ready=!1,this.topicPayloads=[],this.payloadMap={}}function _(t){return u.mapValues(t,Object.keys)}i.inherits(w,o),w.prototype.reconnectIfNeeded=function(){r.debug("trying to reconnect if needed"),this.paused=!1,this.ready||this.connecting?this.connecting||this.fetch():(this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connect())},w.prototype.setupProtocols=function(t){Array.isArray(t)||(t=[t]),this.protocols=t.map(function(t){if("string"==typeof t){if(!(t in m))throw new Error("Unknown built in assignment protocol "+t);t=u.assign({},m[t])}else!function(t){y(t,"protocol is null"),y(t.assign,"assign function is not defined in the protocol"),y(t.name,"name must be given to protocol"),y(t.version>=0,"version must be >= 0")}(t);return t.subscription=this.topics,t},this)},w.prototype.setCoordinatorId=function(t){this.client.coordinatorId=String(t)},w.prototype.assignPartitions=function(t,e,n){if(r.debug("Assigning Partitions to members",e),r.debug("Using group protocol",t),t=u.find(this.protocols,{name:t})){var i=this,o=u(e).map("subscription").flatten().uniq().value();c.waterfall([function(t){r.debug("loadingMetadata for topics:",o),i.client.loadMetadataForTopics(o,t)},function(n,s){var a=_(n[1].metadata);i.topicPartitionLength=function(t,e){const n={};u.forOwn(t,function(t,e){n[e]=t.length});for(const t of e){if(t in n)throw new Error(`Topic ${t} is not empty`);n[t]=0}return n}(a,u.difference(o,Object.keys(a))),r.debug("mapTopicToPartitions",a),t.assign(a,e,s)}],n)}else n(new Error("Unknown group protocol: "+t))},w.prototype.scheduleTopicPartitionCheck=function(){!this.isLeader||this.topicPartitionCheckTimer||this.closed||(r.debug(`${this.client.clientId} is leader scheduled new topic/partition check`),this.topicPartitionCheckTimer=setTimeout(()=>{this.topicPartitionCheckTimer=null,this.closed||(r.debug("checking for new topics and partitions"),this._checkTopicPartitionChange((t,e)=>{if(t)return this.scheduleTopicPartitionCheck(),this.emit("error",new g("topic/partition change check failed",t));e?(r.debug("Topic/Partitions has changed"),c.series([t=>this.options.autoCommit&&null!=this.generationId&&this.memberId?this.commit(!0,t):t(null),t=>this.leaveGroup(t),t=>{this.connect(),t(null)}])):(r.debug("no new Topic/Partitions"),this.scheduleTopicPartitionCheck())}))},this.options.topicPartitionCheckInterval))},w.prototype._checkTopicPartitionChange=function(t){this.client.loadMetadataForTopics(this.topics,(e,n)=>{if(e)return t(e);const r=_(n[1].metadata),i=u.some(this.topicPartitionLength,function(t,e){return t!==u.get(r,`['${e}'].length`,0)});t(null,i)})},w.prototype.handleJoinGroup=function(t,e){if(r.debug("joinGroupResponse %j from %s",t,this.client.clientId),t.memberId&&t.generationId){if(this.isLeader=t.leaderId===t.memberId,this.generationId=t.generationId,this.memberId=t.memberId,this.isLeader)return this.assignPartitions(t.groupProtocol,t.members,e);e(null,void 0)}else e(new Error("Invalid joinGroupResponse: "+JSON.stringify(t)))},w.prototype.saveDefaultOffsets=function(t,e){var n=this;const r=u(t).cloneDeep().map(t=>(t.time=b[this.options.fromOffset],t));n.getOffset().fetch(r,function(t,r){if(t)return e(t);n.defaultOffsets=u.mapValues(r,function(t){return u.mapValues(t,u.head)}),e(null)})},w.prototype.handleSyncGroup=function(t,e){r.debug("SyncGroup Response");var n=this;if(Object.keys(t.partitions).length){r.debug("%s owns topics: ",n.client.clientId,t.partitions);const i=p(t.partitions),o=n.options.fromOffset in b;let s;c.waterfall([function(e){n.fetchOffset(t.partitions,e)},function(t,e){if(r.debug("%s fetchOffset Response: %j",n.client.clientId,t),s=i.some(function(e){return-1===t[e.topic][e.partition]})){if(r.debug("No saved offsets"),"none"===n.options.fromOffset)return e(new Error(`${n.client.clientId} owns topics and partitions which contains no saved offsets for group '${n.options.groupId}'`));c.parallel([function(t){if(o)return n.saveDefaultOffsets(i,t);t(null)}],function(i){if(i)return e(i);r.debug("%s defaultOffset Response for %s: %j",n.client.clientId,n.options.fromOffset,n.defaultOffsets),e(null,t)})}else r.debug("Has saved offsets"),e(null,t)},function(t,e){n.topicPayloads=n.buildPayloads(i).map(function(e){var r=t[e.topic][e.partition];return-1===r&&(r=o?n.getDefaultOffset(e,0):0),e.offset=r,e}),n.payloadMap=n.buildPayloadMap(n.topicPayloads),s&&n.options.commitOffsetsOnFirstJoin?n.commit(!0,t=>{e(t,!t||null)}):e(null,!0)}],e)}else n.topicPayloads=[],n.payloadMap={},e(null,!1)},w.prototype.getDefaultOffset=function(t,e){return u.get(this.defaultOffsets,[t.topic,t.partition],e)},w.prototype.getOffset=function(){return this.offset?this.offset:(this.offset=new a(this.client),this.offset.on("error",u.noop),this.offset)},w.prototype.connect=function(){if(this.connecting)r.warn("Connect ignored. Currently connecting.");else if(this.closed)r.warn("Connect ignored. Consumer closed.");else{r.debug("Connecting %s",this.client.clientId);var t=this;this.connecting=!0,this.emit("rebalancing"),c.waterfall([function(e){"function"!=typeof t.options.onRebalance?e(null):t.options.onRebalance(null!=t.generationId&&null!=t.memberId,function(t){if(t)return e(t);e(null)})},function(e){t.options.autoCommit&&null!=t.generationId&&t.memberId?t.commit(!0,function(t){if(t)return e(t);e(null)}):e(null)},function(e){if(t.client.coordinatorId)return e(null,null);t.client.sendGroupCoordinatorRequest(t.options.groupId,e)},function(e,n){var i;r.debug("GroupCoordinator Response:",e),e&&t.setCoordinatorId(e.coordinatorId),t.client.sendJoinGroupRequest(t.options.groupId,null==(i=t.memberId)?"":i,t.options.sessionTimeout,t.protocols,n)},function(e,n){t.handleJoinGroup(e,n)},function(e,n){r.debug("SyncGroup Request from %s",t.memberId),t.client.sendSyncGroupRequest(t.options.groupId,t.generationId,t.memberId,e,n)},function(e,n){t.handleSyncGroup(e,n)}],function(e,n){if(t.connecting=!1,t.rebalancing=!1,e)return t.recovery.tryToRecoverFrom(e,"connect");t.ready=!0,t.recovery.clearError(),r.debug("generationId",t.generationId),r.debug("startFetch is",n),t._resetFetchState(),n&&(t.clearPendingFetches(),t.fetch()),t.scheduleTopicPartitionCheck(),t.startHeartbeats(),t.emit("connect"),t.emit("rebalanced")})}},w.prototype.clearPendingFetches=function(){u.forEach(this.client.getBrokers(!0),t=>{t.socket.waiting&&(t.socket.waiting=!1,this.client.clearCallbackQueue(t.socket))})},w.prototype.scheduleReconnect=function(t){y(t),this.rebalancing=!0,this.reconnectTimer&&clearTimeout(this.reconnectTimer);var e=this;this.reconnectTimer=setTimeout(function(){e.reconnectTimer=null,e.connect()},t)},w.prototype.startHeartbeats=function(){y(this.options.sessionTimeout>0),y(this.ready,"consumerGroup is not ready");const t=this.options.heartbeatInterval||Math.floor(this.options.sessionTimeout/3);r.debug("%s started heartbeats at every %d ms",this.client.clientId,t),this.stopHeartbeats();let e=this.sendHeartbeat();this.heartbeatInterval=setInterval(()=>{e.verifyResolved()&&(e=this.sendHeartbeat())},t)},w.prototype.stopHeartbeats=function(){this.heartbeatInterval&&clearInterval(this.heartbeatInterval)},w.prototype.leaveGroup=function(t){r.debug("%s leaving group",this.client.clientId);var e=this;this.stopHeartbeats(),null!=e.generationId&&e.memberId?this.client.sendLeaveGroupRequest(this.options.groupId,this.memberId,function(n){e.generationId=null,t(n)}):t(null)},w.prototype.sendHeartbeat=function(){y(this.memberId,"invalid memberId"),y(this.generationId>=0,"invalid generationId");var t=this;const e=new h(this.client,function(e){e&&(r.warn("%s Heartbeat error:",t.client.clientId,e),t.recovery.tryToRecoverFrom(e,"heartbeat"))});return e.send(this.options.groupId,this.generationId,this.memberId),e},w.prototype.fetchOffset=function(t,e){this.client.sendOffsetFetchV1Request(this.options.groupId,t,e)},w.prototype.sendOffsetCommitRequest=function(t,e){this.generationId&&this.memberId?this.client.sendOffsetCommitV2Request(this.options.groupId,this.generationId,this.memberId,t,e):e(null,"Nothing to be committed")},w.prototype.addTopics=function(t,e){t=Array.isArray(t)?t:[t],this.client.ready?c.series([e=>this.client.topicExists(t,e),t=>this.options.autoCommit&&null!=this.generationId&&this.memberId?this.commit(!0,t):t(null),t=>this.leaveGroup(t),e=>{this.topics=this.topics.concat(t),this.setupProtocols(this.options.protocol),this.connect(),e(null)}],n=>n?e(n):e(null,`Add Topics ${t.join(",")} Successfully`)):this.client.once("ready",()=>this.addTopics(t,e))},w.prototype.removeTopics=function(t,e){t="string"==typeof t?[t]:t,c.series([e=>this.client.topicExists(t,e),t=>this.options.autoCommit&&null!=this.generationId&&this.memberId?this.commit(!0,t):t(null),t=>this.leaveGroup(t),e=>{this.topics=u.difference(this.topics,t),this.setupProtocols(this.options.protocol),this.connect(),e(null)}],n=>n?e(n):e(null,`Remove Topics ${t.join(",")} Successfully`))},w.prototype.buildPayloads=function(t){var e=this;return t.map(function(t){return"object"!=typeof t&&(t={topic:t}),t.partition=t.partition||0,t.offset=t.offset||0,t.maxBytes=e.options.fetchMaxBytes,t.metadata="m",t})},w.prototype.buildPayloadMap=function(t){const e={};return t.forEach(({topic:t,partition:n,offset:r})=>{e[t]=e[t]||{},e[t][n]=r}),e},w.prototype.updateOffsets=function(t,e){this.topicPayloads.forEach(n=>{if(!u.isEmpty(t[n.topic])&&void 0!==t[n.topic][n.partition]){var r=t[n.topic][n.partition];-1===r&&(r=0),n.offset=e?r:r+1,this.needToCommit=!0}this.payloadMap[n.topic]=this.payloadMap[n.topic]||{},this.payloadMap[n.topic][n.partition]=n.offset}),this.options.autoCommit&&!e&&this.autoCommit(!1,function(t){t&&r.debug("auto commit offset",t)})},w.prototype._onFetchDone=function(t){this.updateOffsets(t),--this._pendingFetches>0||(this._isFetchPending=!1,this.paused||setImmediate(()=>this.fetch()))},w.prototype._resetFetchState=function(){this._pendingFetches=0,this._isFetchPending=!1},w.prototype._onFetchProcessing=function(){this._pendingFetches++},w.prototype.fetch=function(){!this.ready||this.rebalancing||this.paused||this.closing||this._isFetchPending||(this._isFetchPending=!0,this.client.sendFetchRequest(this,this.topicPayloads,this.options.fetchMaxWaitMs,this.options.fetchMinBytes,this.options.maxTickMessages,t=>{t&&this._resetFetchState()}))},w.prototype.setOffset=function(t,e,n){this.topicPayloads.every(function(r){return r.topic!==t||r.partition!=e||(r.offset=n,!1)})},w.prototype.pause=function(){this.paused=!0},w.prototype.resume=function(){this.paused=!1,this.fetch()},w.prototype.commit=w.prototype.autoCommit=function(t,e){if(1===arguments.length&&(e=t,t=!1),!t){if(this.committing)return e(null,"Offset committing");if(!this.needToCommit)return e(null,"Commit not needed")}this.needToCommit=!1,this.committing=!0,setTimeout(function(){this.committing=!1}.bind(this),this.options.autoCommitIntervalMs).unref();var n=this.topicPayloads.filter(function(t){return-1!==t.offset});n.length?this.sendOffsetCommitRequest(n,e):e(null,"Nothing to be committed")},w.prototype.close=function(t,e){var n=this;this.ready=!1,this.stopHeartbeats(),clearTimeout(this.topicPartitionCheckTimer),"function"==typeof t&&(e=t,t=!1),c.series([function(e){t?n.commit(!0,e):e(null)},function(t){n.leaveGroup(function(e){e&&r.error("Leave group failed with",e),t(null)})},function(t){n.client.close(t)}],function(t){if(t)return e(t);n.closed=!0,e(null)})},t.exports=w},function(t,e,n){"use strict";var r=n(0),i=n(8),o=n(4);function s(t){o.call(this);var e=this;this.client=t,this.ready=this.client.ready,this.client.on("ready",function(){e.ready=!0,e.emit("ready")}),this.client.once("connect",function(){e.emit("connect")}),this.client.on("error",function(t){e.emit("error",t)})}function a(t,e,n,r){t.ready?i.waterfall([n=>{t.client.loadMetadataForTopics(e,n)},(e,n)=>{var i=[],o=e[1].metadata;if(Object.keys(o).forEach(function(t){var e=o[t];Object.keys(e).forEach(function(e){i.push({topic:t,partition:e,time:r})})}),0===i.length)return n(new Error("Topic(s) does not exist"));t.fetch(i,n)},function(t,e){Object.keys(t).forEach(function(e){var n=t[e];Object.keys(n).forEach(function(t){n[t]=n[t][0]})}),e(null,t)}],n):-1===r?t.once("ready",()=>t.fetchLatestOffsets(e,n)):-2===r&&t.once("ready",()=>t.fetchEarliestOffsets(e,n))}r.inherits(s,o),s.prototype.fetch=function(t,e){this.ready?this.client.sendOffsetRequest(this.buildPayloads(t),e):this.once("ready",()=>this.fetch(t,e))},s.prototype.buildPayloads=function(t){return t.map(function(t){return t.partition=t.partition||0,t.time=t.time||Date.now(),t.maxNum=t.maxNum||1,t.metadata="m",t})},s.prototype.buildOffsetFetchV1Payloads=function(t){return t.reduce(function(t,e){return t[e.topic]=t[e.topic]||[],t[e.topic].push(e.partition||0),t},{})},s.prototype.commit=function(t,e,n){this.ready?this.client.sendOffsetCommitRequest(t,this.buildPayloads(e),n):this.once("ready",()=>this.commit(t,e,n))},s.prototype.fetchCommits=s.prototype.fetchCommitsV1=function(t,e,n){this.ready?this.client.setCoordinatorIdAndSendOffsetFetchV1Request(t,this.buildOffsetFetchV1Payloads(e),n):this.once("ready",()=>this.fetchCommitsV1(t,e,n))},s.prototype.fetchLatestOffsets=function(t,e){a(this,t,e,-1)},s.prototype.fetchEarliestOffsets=function(t,e){a(this,t,e,-2)},t.exports=s},function(t,e,n){"use strict";function r(t){this._head=0,this._tail=0,this._capacityMask=3,this._list=new Array(4),Array.isArray(t)&&this._fromArray(t)}r.prototype.peekAt=function(t){var e=t;if(e===(0|e)){var n=this.size();if(!(e>=n||e<-n))return e<0&&(e+=n),e=this._head+e&this._capacityMask,this._list[e]}},r.prototype.get=function(t){return this.peekAt(t)},r.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},r.prototype.peekFront=function(){return this.peek()},r.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(r.prototype,"length",{get:function(){return this.size()}}),r.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.unshift=function(t){if(void 0===t)return this.size();var e=this._list.length;return this._head=this._head-1+e&this._capacityMask,this._list[this._head]=t,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.shift=function(){var t=this._head;if(t!==this._tail){var e=this._list[t];return this._list[t]=void 0,this._head=t+1&this._capacityMask,t<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),e}},r.prototype.push=function(t){if(void 0===t)return this.size();var e=this._tail;return this._list[e]=t,this._tail=e+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},r.prototype.pop=function(){var t=this._tail;if(t!==this._head){var e=this._list.length;this._tail=t-1+e&this._capacityMask;var n=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&t>1e4&&t<=e>>>2&&this._shrinkArray(),n}},r.prototype.removeOne=function(t){var e=t;if(e===(0|e)&&this._head!==this._tail){var n=this.size(),r=this._list.length;if(!(e>=n||e<-n)){e<0&&(e+=n),e=this._head+e&this._capacityMask;var i,o=this._list[e];if(t<n/2){for(i=t;i>0;i--)this._list[e]=this._list[e=e-1+r&this._capacityMask];this._list[e]=void 0,this._head=this._head+1+r&this._capacityMask}else{for(i=n-1-t;i>0;i--)this._list[e]=this._list[e=e+1+r&this._capacityMask];this._list[e]=void 0,this._tail=this._tail-1+r&this._capacityMask}return o}}},r.prototype.remove=function(t,e){var n,r=t,i=e;if(r===(0|r)&&this._head!==this._tail){var o=this.size(),s=this._list.length;if(!(r>=o||r<-o||e<1)){if(r<0&&(r+=o),1===e||!e)return(n=new Array(1))[0]=this.removeOne(r),n;if(0===r&&r+e>=o)return n=this.toArray(),this.clear(),n;var a;for(r+e>o&&(e=o-r),n=new Array(e),a=0;a<e;a++)n[a]=this._list[this._head+r+a&this._capacityMask];if(r=this._head+r&this._capacityMask,t+e===o){for(this._tail=this._tail-e+s&this._capacityMask,a=e;a>0;a--)this._list[r=r+1+s&this._capacityMask]=void 0;return n}if(0===t){for(this._head=this._head+e+s&this._capacityMask,a=e-1;a>0;a--)this._list[r=r+1+s&this._capacityMask]=void 0;return n}if(t<o/2){for(this._head=this._head+t+e+s&this._capacityMask,a=t;a>0;a--)this.unshift(this._list[r=r-1+s&this._capacityMask]);for(r=this._head-1+s&this._capacityMask;i>0;)this._list[r=r-1+s&this._capacityMask]=void 0,i--}else{for(this._tail=r,r=r+e+s&this._capacityMask,a=o-(e+t);a>0;a--)this.push(this._list[r++]);for(r=this._tail;i>0;)this._list[r=r+1+s&this._capacityMask]=void 0,i--}return this._head<2&&this._tail>1e4&&this._tail<=s>>>2&&this._shrinkArray(),n}}},r.prototype.splice=function(t,e){var n=t;if(n===(0|n)){var r=this.size();if(n<0&&(n+=r),!(n>r)){if(arguments.length>2){var i,o,s,a=arguments.length,u=this._list.length,c=2;if(!r||n<r/2){for(o=new Array(n),i=0;i<n;i++)o[i]=this._list[this._head+i&this._capacityMask];for(0===e?(s=[],n>0&&(this._head=this._head+n+u&this._capacityMask)):(s=this.remove(n,e),this._head=this._head+n+u&this._capacityMask);a>c;)this.unshift(arguments[--a]);for(i=n;i>0;i--)this.unshift(o[i-1])}else{var f=(o=new Array(r-(n+e))).length;for(i=0;i<f;i++)o[i]=this._list[this._head+n+e+i&this._capacityMask];for(0===e?(s=[],n!=r&&(this._tail=this._head+n+u&this._capacityMask)):(s=this.remove(n,e),this._tail=this._tail-f+u&this._capacityMask);c<a;)this.push(arguments[c++]);for(i=0;i<f;i++)this.push(o[i])}return s}return this.remove(n,e)}}},r.prototype.clear=function(){this._head=0,this._tail=0},r.prototype.isEmpty=function(){return this._head===this._tail},r.prototype.toArray=function(){return this._copyArray(!1)},r.prototype._fromArray=function(t){for(var e=0;e<t.length;e++)this.push(t[e])},r.prototype._copyArray=function(t){var e,n=[],r=this._list,i=r.length;if(t||this._head>this._tail){for(e=this._head;e<i;e++)n.push(r[e]);for(e=0;e<this._tail;e++)n.push(r[e])}else for(e=this._head;e<this._tail;e++)n.push(r[e]);return n},r.prototype._growArray=function(){this._head&&(this._list=this._copyArray(!0),this._head=0),this._tail=this._list.length,this._list.length*=2,this._capacityMask=this._capacityMask<<1|1},r.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},t.exports=r},function(t,e,n){"use strict";n.r(e),n.d(e,"PipeConsumer",function(){return o}),n.d(e,"createConsumer",function(){return s}),n.d(e,"createProducer",function(){return a}),n.d(e,"createTransformer",function(){return u});var r=n(17),i=n(0);n.d(e,"Client",function(){return r.KafkaClient});class o extends r.Consumer{pipe(t){return this.on("message",t),this}}const s=(t,e,n={},r={})=>new o(t,[{...n,topic:e}],r),a=(t,e,n={},o={})=>{const s=new r.Producer(t,o),a=Object(i.promisify)(s.send.bind(s));return t=>a([{...n,topic:e,messages:t}])},u=(t,e,n,r)=>{const i=a(t,n),o=s(t,e);return o.pipe(t=>i([r(t)])),o}},function(t,e,n){var r=n(59),i=n(4).EventEmitter,o=n(61),s=n(62),a=n(6).Stream;function u(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(256,n)*t[n];return e}function c(t){for(var e=0,n=0;n<t.length;n++)e+=Math.pow(256,t.length-n-1)*t[n];return e}function f(t){var e=c(t);return 128==(128&t[0])&&(e-=Math.pow(256,t.length)),e}function l(t){var e=u(t);return 128==(128&t[t.length-1])&&(e-=Math.pow(256,t.length)),e}function h(t){var e={};return[1,2,4,8].forEach(function(n){var r=8*n;e["word"+r+"le"]=e["word"+r+"lu"]=t(n,u),e["word"+r+"ls"]=t(n,l),e["word"+r+"be"]=e["word"+r+"bu"]=t(n,c),e["word"+r+"bs"]=t(n,f)}),e.word8=e.word8u=e.word8be,e.word8s=e.word8bs,e}(e=t.exports=function(t,n){if(Buffer.isBuffer(t))return e.parse(t);var r=e.stream();return t&&t.pipe?t.pipe(r):t&&(t.on(n||"data",function(t){r.write(t)}),t.on("end",function(){r.end()})),r}).stream=function(t){if(t)return e.apply(null,arguments);var n=null;function u(t,e,r){n={bytes:t,skip:r,cb:function(t){n=null,e(t)}},f()}var c=null;function f(){if(n)if("function"==typeof n)n();else{var t,e=c+n.bytes;if(p.length>=e)null==c?(t=p.splice(0,e),n.skip||(t=t.slice())):(n.skip||(t=p.slice(c,e)),c=e),n.skip?n.cb():n.cb(t)}else y&&(g=!0)}var l=r.light(function(t){function e(){g||t.next()}var r=h(function(t,n){return function(r){u(t,function(t){d.set(r,n(t)),e()})}});return r.tap=function(e){t.nest(e,d.store)},r.into=function(e,n){d.get(e)||d.set(e,{});var r=d;d=s(r.get(e)),t.nest(function(){n.apply(this,arguments),this.tap(function(){d=r})},d.store)},r.flush=function(){d.store={},e()},r.loop=function(n){var r=!1;t.nest(!1,function i(){this.vars=d.store,n.call(this,function(){r=!0,e()},d.store),this.tap(function(){r?t.next():i.call(this)}.bind(this))},d.store)},r.buffer=function(t,n){"string"==typeof n&&(n=d.get(n)),u(n,function(n){d.set(t,n),e()})},r.skip=function(t){"string"==typeof t&&(t=d.get(t)),u(t,function(){e()})},r.scan=function(t,r){if("string"==typeof r)r=new Buffer(r);else if(!Buffer.isBuffer(r))throw new Error("search must be a Buffer or a string");var i=0;n=function(){var o=p.indexOf(r,c+i),s=o-c-i;-1!==o?(n=null,null!=c?(d.set(t,p.slice(c,c+i+s)),c+=i+s+r.length):(d.set(t,p.slice(0,i+s)),p.splice(0,i+s+r.length)),e(),f()):s=Math.max(p.length-r.length-c-i,0),i+=s},f()},r.peek=function(e){c=0,t.nest(function(){e.call(this,d.store),this.tap(function(){c=null})})},r});l.writable=!0;var p=o();l.write=function(t){p.push(t),f()};var d=s(),g=!1,y=!1;return l.end=function(){y=!0},l.pipe=a.prototype.pipe,Object.getOwnPropertyNames(i.prototype).forEach(function(t){l[t]=i.prototype[t]}),l},e.parse=function(t){var e=h(function(i,o){return function(s){if(n+i<=t.length){var a=t.slice(n,n+i);n+=i,r.set(s,o(a))}else r.set(s,null);return e}}),n=0,r=s();return e.vars=r.store,e.tap=function(t){return t.call(e,r.store),e},e.into=function(t,n){r.get(t)||r.set(t,{});var i=r;return r=s(i.get(t)),n.call(e,r.store),r=i,e},e.loop=function(t){for(var n=!1,i=function(){n=!0};!1===n;)t.call(e,i,r.store);return e},e.buffer=function(i,o){"string"==typeof o&&(o=r.get(o));var s=t.slice(n,Math.min(t.length,n+o));return n+=o,r.set(i,s),e},e.skip=function(t){return"string"==typeof t&&(t=r.get(t)),n+=t,e},e.scan=function(i,o){if("string"==typeof o)o=new Buffer(o);else if(!Buffer.isBuffer(o))throw new Error("search must be a Buffer or a string");r.set(i,null);for(var s=0;s+n<=t.length-o.length+1;s++){for(var a=0;a<o.length&&t[n+s+a]===o[a];a++);if(a===o.length)break}return r.set(i,t.slice(n,n+s)),n+=s+o.length,e},e.peek=function(t){var i=n;return t.call(e,r.store),n=i,e},e.flush=function(){return r.store={},e},e.eof=function(){return n>=t.length},e}},function(t,e,n){var r=n(60),i=n(4).EventEmitter;function o(t){var e=o.saw(t,{}),n=t.call(e.handlers,e);return void 0!==n&&(e.handlers=n),e.record(),e.chain()}t.exports=o,o.light=function(t){var e=o.saw(t,{}),n=t.call(e.handlers,e);return void 0!==n&&(e.handlers=n),e.chain()},o.saw=function(t,e){var n=new i;return n.handlers=e,n.actions=[],n.chain=function(){var t=r(n.handlers).map(function(e){if(this.isRoot)return e;var r=this.path;"function"==typeof e&&this.update(function(){return n.actions.push({path:r,args:[].slice.call(arguments)}),t})});return process.nextTick(function(){n.emit("begin"),n.next()}),t},n.pop=function(){return n.actions.shift()},n.next=function(){var t=n.pop();if(t){if(!t.trap){var e=n.handlers;t.path.forEach(function(t){e=e[t]}),e.apply(n.handlers,t.args)}}else n.emit("end")},n.nest=function(e){var r=[].slice.call(arguments,1),i=!0;if("boolean"==typeof e){i=e;e=r.shift()}var s=o.saw(t,{}),a=t.call(s.handlers,s);void 0!==a&&(s.handlers=a),void 0!==n.step&&s.record(),e.apply(s.chain(),r),!1!==i&&s.on("end",n.next)},n.record=function(){!function(t){t.step=0,t.pop=function(){return t.actions[t.step++]},t.trap=function(e,n){var r=Array.isArray(e)?e:[e];t.actions.push({path:r,step:t.step,cb:n,trap:!0})},t.down=function(e){var n=(Array.isArray(e)?e:[e]).join("/"),r=t.actions.slice(t.step).map(function(e){return!(e.trap&&e.step<=t.step)&&e.path.join("/")==n}).indexOf(!0);r>=0?t.step+=r:t.step=t.actions.length;var i=t.actions[t.step-1];i&&i.trap?(t.step=i.step,i.cb()):t.next()},t.jump=function(e){t.step=e,t.next()}}(n)},["trap","down","jump"].forEach(function(t){n[t]=function(){throw new Error("To use the trap, down and jump features, please call record() first to start recording actions.")}}),n}},function(t,e){function n(t){if(!(this instanceof n))return new n(t);this.value=t}function r(t,e,n){var r=[],o=[],s=!0;return function t(a){var u=n?i(a):a,c={},f={node:u,node_:a,path:[].concat(r),parent:o.slice(-1)[0],key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(t){f.isRoot||(f.parent.node[f.key]=t),f.node=t},delete:function(){delete f.parent.node[f.key]},remove:function(){Array.isArray(f.parent.node)?f.parent.node.splice(f.key,1):delete f.parent.node[f.key]},before:function(t){c.before=t},after:function(t){c.after=t},pre:function(t){c.pre=t},post:function(t){c.post=t},stop:function(){s=!1}};if(!s)return f;if("object"==typeof u&&null!==u){f.isLeaf=0==Object.keys(u).length;for(var l=0;l<o.length;l++)if(o[l].node_===a){f.circular=o[l];break}}else f.isLeaf=!0;f.notLeaf=!f.isLeaf,f.notRoot=!f.isRoot;var h=e.call(f,f.node);if(void 0!==h&&f.update&&f.update(h),c.before&&c.before.call(f,f.node),"object"==typeof f.node&&null!==f.node&&!f.circular){o.push(f);var p=Object.keys(f.node);p.forEach(function(e,i){r.push(e),c.pre&&c.pre.call(f,f.node[e],e);var o=t(f.node[e]);n&&Object.hasOwnProperty.call(f.node,e)&&(f.node[e]=o.node),o.isLast=i==p.length-1,o.isFirst=0==i,c.post&&c.post.call(f,o),r.pop()}),o.pop()}return c.after&&c.after.call(f,f.node),f}(t).node}function i(t){var e;return"object"==typeof t&&null!==t?(e=Array.isArray(t)?[]:t instanceof Date?new Date(t):t instanceof Boolean?new Boolean(t):t instanceof Number?new Number(t):t instanceof String?new String(t):Object.create(Object.getPrototypeOf(t)),Object.keys(t).forEach(function(n){e[n]=t[n]}),e):t}t.exports=n,n.prototype.get=function(t){for(var e=this.value,n=0;n<t.length;n++){var r=t[n];if(!Object.hasOwnProperty.call(e,r)){e=void 0;break}e=e[r]}return e},n.prototype.set=function(t,e){for(var n=this.value,r=0;r<t.length-1;r++){var i=t[r];Object.hasOwnProperty.call(n,i)||(n[i]={}),n=n[i]}return n[t[r]]=e,e},n.prototype.map=function(t){return r(this.value,t,!0)},n.prototype.forEach=function(t){return this.value=r(this.value,t,!1),this.value},n.prototype.reduce=function(t,e){var n=1===arguments.length,r=n?this.value:e;return this.forEach(function(e){this.isRoot&&n||(r=t.call(this,r,e))}),r},n.prototype.deepEqual=function(t){if(1!==arguments.length)throw new Error("deepEqual requires exactly one object to compare against");var e=!0,r=t;return this.forEach(function(i){var o=function(){e=!1}.bind(this);if(!this.isRoot){if("object"!=typeof r)return o();r=r[this.key]}var s=r;this.post(function(){r=s});var a=function(t){return Object.prototype.toString.call(t)};if(this.circular)n(t).get(this.circular.path)!==s&&o();else if(typeof s!=typeof i)o();else if(null===s||null===i||void 0===s||void 0===i)s!==i&&o();else if(s.__proto__!==i.__proto__)o();else if(s===i);else if("function"==typeof s)s instanceof RegExp?s.toString()!=i.toString()&&o():s!==i&&o();else if("object"==typeof s)if("[object Arguments]"===a(i)||"[object Arguments]"===a(s))a(s)!==a(i)&&o();else if(s instanceof Date||i instanceof Date)s instanceof Date&&i instanceof Date&&s.getTime()===i.getTime()||o();else{var u=Object.keys(s),c=Object.keys(i);if(u.length!==c.length)return o();for(var f=0;f<u.length;f++){var l=u[f];Object.hasOwnProperty.call(i,l)||o()}}}),e},n.prototype.paths=function(){var t=[];return this.forEach(function(e){t.push(this.path)}),t},n.prototype.nodes=function(){var t=[];return this.forEach(function(e){t.push(this.node)}),t},n.prototype.clone=function(){var t=[],e=[];return function n(r){for(var o=0;o<t.length;o++)if(t[o]===r)return e[o];if("object"==typeof r&&null!==r){var s=i(r);return t.push(r),e.push(s),Object.keys(r).forEach(function(t){s[t]=n(r[t])}),t.pop(),e.pop(),s}return r}(this.value)},Object.keys(n.prototype).forEach(function(t){n[t]=function(e){var r=[].slice.call(arguments,1),i=n(e);return i[t].apply(i,r)}})},function(t,e){function n(t){if(!(this instanceof n))return new n(t);this.buffers=t||[],this.length=this.buffers.reduce(function(t,e){return t+e.length},0)}t.exports=n,n.prototype.push=function(){for(var t=0;t<arguments.length;t++)if(!Buffer.isBuffer(arguments[t]))throw new TypeError("Tried to push a non-buffer");for(t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.push(e),this.length+=e.length}return this.length},n.prototype.unshift=function(){for(var t=0;t<arguments.length;t++)if(!Buffer.isBuffer(arguments[t]))throw new TypeError("Tried to unshift a non-buffer");for(t=0;t<arguments.length;t++){var e=arguments[t];this.buffers.unshift(e),this.length+=e.length}return this.length},n.prototype.copy=function(t,e,n,r){return this.slice(n,r).copy(t,e,0,r-n)},n.prototype.splice=function(t,e){var r=this.buffers,i=t>=0?t:this.length-t,o=[].slice.call(arguments,2);void 0===e?e=this.length-i:e>this.length-i&&(e=this.length-i);for(t=0;t<o.length;t++)this.length+=o[t].length;for(var s=new n,a=0,u=0;u<r.length&&a+r[u].length<i;u++)a+=r[u].length;if(i-a>0){var c=i-a;if(c+e<r[u].length){s.push(r[u].slice(c,c+e));var f=r[u],l=new Buffer(c);for(t=0;t<c;t++)l[t]=f[t];var h=new Buffer(f.length-c-e);for(t=c+e;t<f.length;t++)h[t-e-c]=f[t];if(o.length>0){var p=o.slice();p.unshift(l),p.push(h),r.splice.apply(r,[u,1].concat(p)),u+=p.length,o=[]}else r.splice(u,1,l,h),u+=2}else s.push(r[u].slice(c)),r[u]=r[u].slice(0,c),u++}for(o.length>0&&(r.splice.apply(r,[u,0].concat(o)),u+=o.length);s.length<e;){var d=r[u],g=d.length,y=Math.min(g,e-s.length);y===g?(s.push(d),r.splice(u,1)):(s.push(d.slice(0,y)),r[u]=r[u].slice(y))}return this.length-=s.length,s},n.prototype.slice=function(t,e){var n=this.buffers;void 0===e&&(e=this.length),void 0===t&&(t=0),e>this.length&&(e=this.length);for(var r=0,i=0;i<n.length&&r+n[i].length<=t;i++)r+=n[i].length;for(var o=new Buffer(e-t),s=0,a=i;s<e-t&&a<n.length;a++){var u=n[a].length,c=0===s?t-r:0,f=s+u>=e-t?Math.min(c+(e-t)-s,u):u;n[a].copy(o,s,c,f),s+=f-c}return o},n.prototype.pos=function(t){if(t<0||t>=this.length)throw new Error("oob");for(var e=t,n=0,r=null;;){if(e<(r=this.buffers[n]).length)return{buf:n,offset:e};e-=r.length,n++}},n.prototype.get=function(t){var e=this.pos(t);return this.buffers[e.buf].get(e.offset)},n.prototype.set=function(t,e){var n=this.pos(t);return this.buffers[n.buf].set(n.offset,e)},n.prototype.indexOf=function(t,e){if("string"==typeof t)t=new Buffer(t);else if(!(t instanceof Buffer))throw new Error("Invalid type for a search string");if(!t.length)return 0;if(!this.length)return-1;var n,r=0,i=0,o=0,s=0;if(e){var a=this.pos(e);r=a.buf,i=a.offset,s=e}for(;;){for(;i>=this.buffers[r].length;)if(i=0,++r>=this.buffers.length)return-1;if(this.buffers[r][i]==t[o]){if(0==o&&(n={i:r,j:i,pos:s}),++o==t.length)return n.pos}else 0!=o&&(r=n.i,i=n.j,s=n.pos,o=0);i++,s++}},n.prototype.toBuffer=function(){return this.slice()},n.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)}},function(t,e){t.exports=function(t){function e(t,e){var r=n.store,i=t.split(".");i.slice(0,-1).forEach(function(t){void 0===r[t]&&(r[t]={}),r=r[t]});var o=i[i.length-1];return 1==arguments.length?r[o]:r[o]=e}var n={get:function(t){return e(t)},set:function(t,n){return e(t,n)},store:t||{}};return n}},function(t,e,n){var r={"./lib/BufferMaker":64,"./test/BufferMaker":66};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=63},function(t,e,n){var r=n(65),i=function(){this.plan=[]},o={UInt8:{bytes:1},Int8:{bytes:1},Int16BE:{bytes:2},Int32BE:{bytes:4},Int16LE:{bytes:2},Int32LE:{bytes:4},UInt16BE:{bytes:2},UInt32BE:{bytes:4},FloatLE:{bytes:4},DoubleLE:{bytes:8},FloatBE:{bytes:4},DoubleBE:{bytes:8},UInt16LE:{bytes:2},UInt32LE:{bytes:4},Int64BE:{bytes:8},string:{}};function s(t){i.prototype[t]=function(e){return this.plan.push({type:t,value:e}),this}}for(var a in o)s(a);i.prototype.make=function(){var t,e,n=0,i=0;for(e=0;e<this.plan.length;e++)"string"===(t=this.plan[e]).type?Buffer.isBuffer(t.value)?n+=t.value.length:n+=Buffer.byteLength(t.value):n+=o[t.type].bytes;var s=new Buffer(n);for(e=0;e<this.plan.length;e++)switch((t=this.plan[e]).type){case"Int64BE":var a=r.fromString(t.value+"");s.writeInt32BE(a.getHighBits(),i),s.writeInt32BE(a.getLowBits(),i+4),i+=8;break;case"string":"string"==typeof t.value?(s.write(t.value,i),i+=Buffer.byteLength(t.value)):(t.value.copy(s,i,0),i+=t.value.length);break;default:s["write"+t.type](t.value,i),i+=o[t.type].bytes}return s},t.exports=i},function(t,e,n){var r;
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 * 
 * Long.js is based on goog.math.Long from the Closure Library.
 * Copyright 2009 The Closure Library Authors. All Rights Reserved.
 * Released under the Apache License, Version 2.0
 * see: https://code.google.com/p/closure-library/ for details
 */
/**
 * @license Long.js (c) 2013 Daniel Wirtz <dcode@dcode.io>
 * Released under the Apache License, Version 2.0
 * see: https://github.com/dcodeIO/Long.js for details
 * 
 * Long.js is based on goog.math.Long from the Closure Library.
 * Copyright 2009 The Closure Library Authors. All Rights Reserved.
 * Released under the Apache License, Version 2.0
 * see: https://code.google.com/p/closure-library/ for details
 */
!function(n){var i=function(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n},o={},s={};i.fromInt=function(t,e){var n,r;return e?0<=(t>>>=0)&&t<256&&(r=s[t])?r:(n=new i(t,(0|t)<0?-1:0,!0),0<=t&&t<256&&(s[t]=n),n):-128<=(t|=0)&&t<128&&(r=o[t])?r:(n=new i(t,t<0?-1:0,!1),-128<=t&&t<128&&(o[t]=n),n)},i.fromNumber=function(t,e){return e=!!e,isNaN(t)||!isFinite(t)?i.ZERO:!e&&t<=-c?i.MIN_SIGNED_VALUE:e&&t<=0?i.MIN_UNSIGNED_VALUE:!e&&t+1>=c?i.MAX_SIGNED_VALUE:e&&t>=u?i.MAX_UNSIGNED_VALUE:t<0?i.fromNumber(-t,!1).negate():new i(t%a|0,t/a|0,e)},i.fromBits=function(t,e,n){return new i(t,e,n)},i.from28Bits=function(t,e,n,r){return i.fromBits(t|e<<28,e>>>4|n<<24,r)},i.fromString=function(t,e,n){if(0==t.length)throw new Error("number format error: empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return i.ZERO;if("number"==typeof e&&(n=e,e=!1),(n=n||10)<2||36<n)throw new Error("radix out of range: "+n);if("-"==t.charAt(0))return i.fromString(t.substring(1),e,n).negate();if(t.indexOf("-")>=0)throw new Error('number format error: interior "-" character: '+t);for(var r=i.fromNumber(Math.pow(n,8)),o=i.ZERO,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),u=parseInt(t.substring(s,s+a),n);if(a<8){var c=i.fromNumber(Math.pow(n,a));o=o.multiply(c).add(i.fromNumber(u))}else o=(o=o.multiply(r)).add(i.fromNumber(u))}return o};var a=4294967296,u=a*a,c=u/2,f=i.fromInt(1<<24);i.ZERO=i.fromInt(0),i.ONE=i.fromInt(1),i.NEG_ONE=i.fromInt(-1),i.MAX_SIGNED_VALUE=i.fromBits(-1,2147483647,!1),i.MAX_UNSIGNED_VALUE=i.fromBits(-1,-1,!0),i.MAX_VALUE=i.MAX_SIGNED_VALUE,i.MIN_SIGNED_VALUE=i.fromBits(0,-2147483648,!1),i.MIN_UNSIGNED_VALUE=i.fromBits(0,0,!0),i.MIN_VALUE=i.MIN_SIGNED_VALUE,i.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},i.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*a+(this.low>>>0):this.high*a+(this.low>>>0)},i.prototype.toString=function(t){if((t=t||10)<2||36<t)throw new Error("radix out of range: "+t);if(this.isZero())return"0";var e;if(this.isNegative()){if(this.equals(i.MIN_SIGNED_VALUE)){var n=i.fromNumber(t),r=this.div(n);return e=r.multiply(n).subtract(this),r.toString(t)+e.toInt().toString(t)}return"-"+this.negate().toString(t)}var o=i.fromNumber(Math.pow(t,6));e=this;for(var s="";;){var a=e.div(o),u=e.subtract(a.multiply(o)).toInt().toString(t);if((e=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},i.prototype.getHighBits=function(){return this.high},i.prototype.getHighBitsUnsigned=function(){return this.high>>>0},i.prototype.getLowBits=function(){return this.low},i.prototype.getLowBitsUnsigned=function(){return this.low>>>0},i.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(i.MIN_SIGNED_VALUE)?64:this.negate().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},i.prototype.isZero=function(){return 0==this.high&&0==this.low},i.prototype.isNegative=function(){return!this.unsigned&&this.high<0},i.prototype.isOdd=function(){return 1==(1&this.low)},i.prototype.isEven=function(){return 0==(1&this.low)},i.prototype.equals=function(t){return(this.unsigned==t.unsigned||this.high>>>31==t.high>>>31)&&(this.high==t.high&&this.low==t.low)},i.prototype.notEquals=function(t){return!this.equals(t)},i.prototype.lessThan=function(t){return this.compare(t)<0},i.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},i.prototype.greaterThan=function(t){return this.compare(t)>0},i.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},i.prototype.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high==this.high&&t.low>>>0>this.low>>>0?-1:1:this.subtract(t).isNegative()?-1:1},i.prototype.negate=function(){return!this.unsigned&&this.equals(i.MIN_SIGNED_VALUE)?i.MIN_SIGNED_VALUE:this.not().add(i.ONE)},i.prototype.add=function(t){var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=0,f=0,l=0,h=0;return l+=(h+=o+(65535&t.low))>>>16,f+=(l+=r+u)>>>16,c+=(f+=n+a)>>>16,c+=e+s,i.fromBits((l&=65535)<<16|(h&=65535),(c&=65535)<<16|(f&=65535),this.unsigned)},i.prototype.subtract=function(t){return this.add(t.negate())},i.prototype.multiply=function(t){if(this.isZero())return i.ZERO;if(t.isZero())return i.ZERO;if(this.equals(i.MIN_VALUE))return t.isOdd()?i.MIN_VALUE:i.ZERO;if(t.equals(i.MIN_VALUE))return this.isOdd()?i.MIN_VALUE:i.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(f)&&t.lessThan(f))return i.fromNumber(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,h=0,p=0,d=0;return p+=(d+=o*c)>>>16,h+=(p+=r*c)>>>16,p&=65535,h+=(p+=o*u)>>>16,l+=(h+=n*c)>>>16,h&=65535,l+=(h+=r*u)>>>16,h&=65535,l+=(h+=o*a)>>>16,l+=e*c+n*u+r*a+o*s,i.fromBits((p&=65535)<<16|(d&=65535),(l&=65535)<<16|(h&=65535),this.unsigned)},i.prototype.div=function(t){if(t.isZero())throw new Error("division by zero");if(this.isZero())return i.ZERO;if(this.equals(i.MIN_SIGNED_VALUE)){if(t.equals(i.ONE)||t.equals(i.NEG_ONE))return min;if(t.equals(i.MIN_VALUE))return i.ONE;if((r=this.shiftRight(1).div(t).shiftLeft(1)).equals(i.ZERO))return t.isNegative()?i.ONE:i.NEG_ONE;var e=this.subtract(t.multiply(r));return r.add(e.div(t))}if(t.equals(i.MIN_VALUE))return i.ZERO;if(this.isNegative())return t.isNegative()?this.negate().div(t.negate()):this.negate().div(t).negate();if(t.isNegative())return this.div(t.negate()).negate();var n=i.ZERO;for(e=this;e.greaterThanOrEqual(t);){for(var r=Math.max(1,Math.floor(e.toNumber()/t.toNumber())),o=Math.ceil(Math.log(r)/Math.LN2),s=o<=48?1:Math.pow(2,o-48),a=i.fromNumber(r,this.unsigned),u=a.multiply(t);u.isNegative()||u.greaterThan(e);)u=(a=i.fromNumber(r-=s,this.unsigned)).multiply(t);a.isZero()&&(a=i.ONE),n=n.add(a),e=e.subtract(u)}return n},i.prototype.modulo=function(t){return this.subtract(this.div(t).multiply(t))},i.prototype.not=function(){return i.fromBits(~this.low,~this.high,this.unsigned)},i.prototype.and=function(t){return i.fromBits(this.low&t.low,this.high&t.high,this.unsigned)},i.prototype.or=function(t){return i.fromBits(this.low|t.low,this.high|t.high,this.unsigned)},i.prototype.xor=function(t){return i.fromBits(this.low^t.low,this.high^t.high,this.unsigned)},i.prototype.shiftLeft=function(t){if(0==(t&=63))return this;var e=this.low;if(t<32){var n=this.high;return i.fromBits(e<<t,n<<t|e>>>32-t,this.unsigned)}return i.fromBits(0,e<<t-32,this.unsigned)},i.prototype.shiftRight=function(t){if(0==(t&=63))return this;var e=this.high;if(t<32){var n=this.low;return i.fromBits(n>>>t|e<<32-t,e>>t,this.unsigned)}return i.fromBits(e>>t-32,e>=0?0:-1,this.unsigned)},i.prototype.shiftRightUnsigned=function(t){if(0==(t&=63))return this;var e=this.high;if(t<32){var n=this.low;return i.fromBits(n>>>t|e<<32-t,e>>>t,this.unsigned)}return i.fromBits(32==t?e:e>>>t-32,0,this.unsigned)},i.prototype.toSigned=function(){var t=this.clone();return t.unsigned=!1,t},i.prototype.toUnsigned=function(){var t=this.clone();return t.unsigned=!0,t},i.prototype.clone=function(){return new i(this.low,this.high,this.unsigned)},t.exports?t.exports=i:void 0===(r=function(){return i}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){n(114);var r=n(38);describe("BufferMaker",function(){describe("when used for little endian scenarios",function(){describe("when used for non integers",function(){it("can create floats",function(){var t=new Buffer(4);t.writeFloatLE(3405691582,0),(new r).FloatLE(3405691582).make().should.eql(t)}),it("can create doubles",function(){var t=new Buffer(8);t.writeDoubleLE(3405691582,0),(new r).DoubleLE(3405691582).make().should.eql(t)})}),describe("when used for unsigned integers",function(){it("can create a two-byte (16-bit) buffer",function(){var t=new Buffer(2);t.writeUInt16LE(5,0),(new r).UInt16LE(5).make().should.eql(t)}),it("can create a four-byte (32-bit) buffer",function(){var t=new Buffer(4);t.writeUInt32LE(5,0),(new r).UInt32LE(5).make().should.eql(t)})}),describe("when used for signed integers",function(){it("can create a two-byte (16-bit) buffer",function(){var t=new Buffer(2);t.writeInt16LE(5,0),(new r).Int16LE(5).make().should.eql(t)}),it("can create a four-byte (32-bit) buffer",function(){var t=new Buffer(4);t.writeInt32LE(5,0),(new r).Int32LE(5).make().should.eql(t)})})}),describe("when used for big endian scenarios",function(){describe("when used for non integers",function(){it("can create floats",function(){var t=new Buffer(4);t.writeFloatBE(3405691582,0),(new r).FloatBE(3405691582).make().should.eql(t)}),it("can create doubles",function(){var t=new Buffer(8);t.writeDoubleBE(3405691582,0),(new r).DoubleBE(3405691582).make().should.eql(t)})}),describe("when used for unsigned input",function(){it("can create a one byte buffer",function(){var t=new Buffer(1);t.writeUInt8(5,0),(new r).UInt8(5).make().should.eql(t)}),it("can create a two-byte (16-bit) buffer",function(){var t=new Buffer(2);t.writeUInt16BE(5,0),(new r).UInt16BE(5).make().should.eql(t)}),it("can create a four-byte (32-bit) buffer",function(){var t=new Buffer(4);t.writeUInt32BE(5,0),(new r).UInt32BE(5).make().should.eql(t)}),it("can create a buffer from a binary string",function(){var t=new r,e=new Buffer("four");t.UInt32BE(e.length).string(e).make().should.eql(new Buffer([0,0,0,4,"f".charCodeAt(0),"o".charCodeAt(0),"u".charCodeAt(0),"r".charCodeAt(0)]))})}),describe("when used for signed input",function(){it("can create a one byte buffer",function(){var t=new Buffer(1);t.writeInt8(5,0),(new r).Int8(5).make().should.eql(t)}),it("can create a two-byte (16-bit) buffer",function(){var t=new Buffer(2);t.writeInt16BE(5,0),(new r).Int16BE(5).make().should.eql(t)}),it("can create a four-byte (32-bit) buffer",function(){var t=new Buffer(4);t.writeInt32BE(5,0),(new r).Int32BE(5).make().should.eql(t)}),it("can create an eight-byte (64-bit) buffer",function(){var t=new Buffer(8);t.writeInt32BE(0,0),t.writeInt32BE(5,4),(new r).Int64BE(5).make().should.eql(t)}),it("can create an eight-byte (64-bit) buffer from a negative number",function(){for(var t=(new r).Int64BE(-1).make(),e=new Buffer(8),n=0;n<8;n++)e.writeUInt8(255,n);t.should.eql(e)}),it("can create an eight-byte (64-bit) buffer from a negative number as a string",function(){for(var t=(new r).Int64BE("-1").make(),e=new Buffer(8),n=0;n<8;n++)e.writeUInt8(255,n);t.should.eql(e)})}),it("can create a buffer from a binary string",function(){var t=new r,e=new Buffer("four");t.UInt32BE(e.length).string(e).make().should.eql(new Buffer([0,0,0,4,"f".charCodeAt(0),"o".charCodeAt(0),"u".charCodeAt(0),"r".charCodeAt(0)]))}),it("can create a buffer from a string with some 2-byte utf8 in it",function(){var t=new Buffer("fo ur"),e=(new r).string("fo ur").make();e.should.eql(t),e.toString("utf8").should.equal("fo ur"),e.length.should.equal(6),t.length.should.equal(6)}),it("can properly report length of chinese strings",function(){var t=(new r).string("中国").make(),e=new Buffer("中国");t.should.eql(e),t.toString("utf8").should.equal("中国"),t.length.should.equal(6)}),it("can create a buffer from a string",function(){var t=new Buffer(8);t.write("12345678"),(new r).string("12345678").make().should.eql(t)}),it("can create a buffer from a weird string",function(){var t=new Buffer(10);t.write("1234 5678"),(new r).string("1234 5678").make().should.eql(t)}),it("can create a buffer from a buffer",function(){var t=new Buffer(8);t.write("12345678");var e=(new r).string(t).make();(new r).string("12345678").make().should.eql(e)})})})},function(t,e,n){var r=n(39).Buffer,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];function o(t){if(r.isBuffer(t))return t;var e="function"==typeof r.alloc&&"function"==typeof r.from;if("number"==typeof t)return e?r.alloc(t):new r(t);if("string"==typeof t)return e?r.from(t):new r(t);throw new Error("input must be buffer, number, or string, received "+typeof t)}function s(t,e){t=o(t),r.isBuffer(e)&&(e=e.readUInt32BE(0));for(var n=-1^~~e,s=0;s<t.length;s++)n=i[255&(n^t[s])]^n>>>8;return-1^n}function a(){return t=s.apply(null,arguments),(e=o(4)).writeInt32BE(t,0),e;var t,e}"undefined"!=typeof Int32Array&&(i=new Int32Array(i)),a.signed=function(){return s.apply(null,arguments)},a.unsigned=function(){return s.apply(null,arguments)>>>0},t.exports=a},function(t,e){t.exports=require("zlib")},function(t,e,n){"use strict";var r=n(70),i=n(8),o=r("snappy");if(null==o){var s=function(){throw new Error("Snappy codec is not installed")};t.exports={encode:s,decode:s}}else{var a=[130,83,78,65,80,80,89,0],u=a.length,c=Buffer.from(a).toString("hex");e.encode=o.compress,e.decode=function(t,e){if(function(t){return t.toString("hex",0,u)===c}(t)){for(var n,r=16,s=t.length,a=[];r<s;)n=t.readUInt32BE(r),r+=4,a.push(t.slice(r,r+n)),r+=n;return i.mapSeries(a,o.uncompress,function(t,n){return t?e(t):e(null,Buffer.concat(n))})}return o.uncompress(t,e)}}},function(t,e,n){t.exports=function(t,e){try{return t[0]in{".":1}&&(t=process.cwd()+t.substr(1)),n(71)(t)}catch(t){if("MODULE_NOT_FOUND"!==t.code&&e&&e.rethrow)throw t}return null}},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=71},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message="object"==typeof t?`Found a message larger than the maximum fetch size of this consumer on topic ${t.topic} partition ${t.partition} at fetch offset ${t.offset}. Increase the fetch size, or decrease the maximum message size the broker will allow.`:t};n(0).inherits(r,Error),r.prototype.name="MessageSizeTooLarge",t.exports=r},function(t,e,n){"use strict";const r=n(6).Writable,i=n(19),o=n(32),s=n(5)("kafka-node:ProducerStream"),a=n(3),u={kafkaClient:{kafkaHost:"127.0.0.1:9092"},producer:{partitionerType:3}},c=100;t.exports=class extends r{constructor(t){null==t&&(t={}),super({objectMode:!0,decodeStrings:!1,highWaterMark:t.highWaterMark||c}),a.defaultsDeep(t,u),this.client=new i(t.kafkaClient),this.producer=new o(this.client,t.producer,t.producer.customPartitioner),this.producer.on("error",t=>this.emit("error",t))}sendPayload(t,e){a.isArray(t)||(t=[t]),this.producer.ready?this.producer.send(t,e):this.producer.once("ready",()=>this.producer.send(t,e))}close(t){this.producer.close(t)}_write(t,e,n){s.debug("_write"),this.sendPayload(t,n)}_writev(t,e){s.debug("_writev");const n=a.map(t,"chunk");this.sendPayload(n,e)}}},function(t,e,n){"use strict";var r=n(10),i=n(0),o=n(3),s=n(8),a=n(30),u=n(4),c=n(20),f=n(29),l=n(13),h=l.encodeMessageSet,p=l.Message,d=n(83),g=n(5)("kafka-node:BaseClient"),y=n(9).validateTopicNames;function m(){throw new TypeError("BaseClient cannot be instantiated directly")}function b(t,e){return"buffer"!==t&&null!=e?e.toString(t):e}i.inherits(m,u),m.prototype.setupBrokerProfiles=function(t){this.brokerProfiles=Object.create(null);var e=this,n=e.ssl?"SSL":"PLAINTEXT";Object.keys(t).forEach(function(i){var s,a=t[i];if(a.endpoints&&a.endpoints.length){var u=o.find(a.endpoints,function(t){var e=a.listener_security_protocol_map,r=d.parse(t).protocol.replace(":","").toUpperCase();return void 0!==e?e[r]===n:r===n});if(null==u)throw new Error(["No kafka endpoint found for broker: ",i," with protocol ",n].join(""));var c=d.parse(u);s=c.hostname+":"+c.port,a.host=c.hostname,a.port=c.port}else s=a.host+":"+a.port;r(a.host&&a.port,"kafka host or port is empty"),e.brokerProfiles[s]=a,e.brokerProfiles[s].id=i})},m.prototype.closeBrokers=function(t){o.each(t,function(t){t.socket.closing=!0,t.socket.end(),setImmediate(function(){t.socket.destroy(),t.socket.unref()})})},m.prototype._createMessageHandler=function(t,e){return(n,r,i)=>{if(e&&!e(n,r,i))return;if(n)return"OffsetOutOfRange"===n.message?t.emit("offsetOutOfRange",n):"NotLeaderForPartition"===n.message||"UnknownTopicOrPartition"===n.message?this.emit("brokersChanged"):t.emit("error",n);var o=t.options.encoding;const s=t.options.keyEncoding;"message"===r?(i.value=b(o,i.value),i.key=b(s||o,i.key),t.emit("message",i)):t.emit(r,i)}},m.prototype.sendFetchRequest=function(t,e,n,r,i){var o=l.encodeFetchRequest(n,r),s=l.decodeFetchResponse(this._createMessageHandler(t),i);this.send(e,o,s,function(e){e&&(Array.prototype.unshift.call(arguments,"error"),t.emit.apply(t,arguments))})},m.prototype.sendProduceRequest=function(t,e,n,r){var i=l.encodeProduceRequest(e,n),o=l.decodeProduceResponse,a=this;o.requireAcks=e,s.each(t,function(t,e){var n=t.attributes,r=f(n);if(!r)return e();var i=h(t.messages);r.encode(i,function(r,i){if(r)return e(r);t.messages=[new p(0,n,"",i)],e()})},function(e){if(e)return r(e);a.send(t,i,o,function(t,e){t?("NotLeaderForPartition"!==t.message&&"UnknownTopicOrPartition"!==t.message||a.emit("brokersChanged"),r(t)):r(null,e)})})},m.prototype.sendOffsetCommitRequest=function(t,e,n){var r=l.encodeOffsetCommitRequest(t),i=l.decodeOffsetCommitResponse;this.send(e,r,i,n)},m.prototype.sendOffsetCommitV2Request=function(t,e,n,r,i){var o=l.encodeOffsetCommitV2Request,s=l.decodeOffsetCommitResponse;this.sendGroupRequest(o,s,arguments)},m.prototype.sendOffsetFetchV1Request=function(t,e,n){var r=l.encodeOffsetFetchV1Request,i=l.decodeOffsetFetchV1Response;this.sendGroupRequest(r,i,arguments)},m.prototype.setCoordinatorIdAndSendOffsetFetchV1Request=function(t,e,n){this.sendGroupCoordinatorRequest(t,(r,i)=>{if(r)return n(new c.BrokerNotAvailableError("Broker not available"));this.coordinatorId=String(i.coordinatorId),this.sendOffsetFetchV1Request(t,e,n)})},m.prototype.sendOffsetFetchRequest=function(t,e,n){var r=l.encodeOffsetFetchRequest(t),i=l.decodeOffsetFetchResponse;this.send(e,r,i,n)},m.prototype.sendOffsetRequest=function(t,e){var n=l.encodeOffsetRequest,r=l.decodeOffsetResponse;this.send(t,n,r,e)},m.prototype.refreshBrokerMetadata=function(){},m.prototype.sendWhenReady=function(t,e,n,r,i){this.queueCallback(t.socket,e,[r,i]),t.write(n)},m.prototype.sendGroupRequest=function(t,e,n){var r=(n=o.values(n)).pop(),i=this.nextId();n.unshift(this.clientId,i);var s=t.apply(null,n),a=this.brokerForLeader(this.coordinatorId),u=null;if(a?a.isConnected()||(u="Broker socket is closed"+(a.socket.error?" - "+a.socket.error.message:"")):u="Could not find broker",u)return this.refreshBrokerMetadata(),r(new c.BrokerNotAvailableError("Broker not available: "+u));this.sendWhenReady(a,i,s,e,r)},m.prototype.sendGroupCoordinatorRequest=function(t,e){this.sendGroupRequest(l.encodeGroupCoordinatorRequest,l.decodeGroupCoordinatorResponse,arguments)},m.prototype.sendJoinGroupRequest=function(t,e,n,r,i){this.sendGroupRequest(l.encodeJoinGroupRequest,l.decodeJoinGroupResponse,arguments)},m.prototype.sendSyncGroupRequest=function(t,e,n,r,i){this.sendGroupRequest(l.encodeSyncGroupRequest,l.decodeSyncGroupResponse,arguments)},m.prototype.sendHeartbeatRequest=function(t,e,n,r){this.sendGroupRequest(l.encodeGroupHeartbeatRequest,l.decodeGroupHeartbeatResponse,arguments)},m.prototype.sendLeaveGroupRequest=function(t,e,n){this.sendGroupRequest(l.encodeLeaveGroupRequest,l.decodeLeaveGroupResponse,arguments)},m.prototype.loadMetadataForTopics=function(t,e){var n=this.nextId(),r=l.encodeMetadataRequest(this.clientId,n,t),i=this.brokerForLeader();if(!i||!i.isConnected())return e(new c.BrokerNotAvailableError("Broker not available"));this.sendWhenReady(i,n,r,l.decodeMetadataResponse,e)},m.prototype.createTopics=function(t,e,n){t="string"==typeof t?[t]:t,"function"==typeof e&&void 0===n&&(n=e,e=!0);try{y(t)}catch(t){if(e)return n(t);throw t}n=o.once(n);const r=(t,e)=>{this.loadMetadataForTopics(t,function(t,n){if(t)return e(t);e(null,Object.keys(n[1].metadata))})},i=a.operation({minTimeout:200,maxTimeout:2e3});i.attempt(e=>{g.debug("create topics currentAttempt",e),r(t,function(e,r){if(e&&i.retry(e))return;g.debug("kafka reported topics",r);const s=o.difference(t,r);if(0===s.length)return g.debug(`Topics created ${r}`),n(null,r);g.debug(`Topics left ${s.join(", ")}`),i.retry(new Error(`Topics not created ${s}`))||n(i.mainError())})}),e||n(null)},m.prototype.addTopics=function(t,e){var n=this;this.topicExists(t,function(r){if(r)return e(r);n.loadMetadataForTopics(t,function(r,i){if(r)return e(r);n.updateMetadatas(i),e(null,t)})})},m.prototype.nextId=function(){return this.correlationId>=2147483647&&(this.correlationId=0),this.correlationId++},m.prototype.nextSocketId=function(){return this._socketId++},m.prototype.refreshBrokers=function(){var t=this,e=Object.keys(this.brokerProfiles);function n(n){var r=o.difference(Object.keys(n),e);r.length&&t.closeBrokers(r.map(function(t){var e=n[t];return delete n[t],e}))}n(this.brokers),n(this.longpollingBrokers)},m.prototype.refreshMetadata=function(t,e){var n=this;if(!t.length)return e();!function(t,e){var r=a.operation({minTimeout:200,maxTimeout:1e3});r.attempt(function(i){g.debug("refresh metadata currentAttempt",i),n.loadMetadataForTopics(t,function(t,i){if(t=t||i[1].error,Array.isArray(t)&&(t=new Error(String(t))),!r.retry(t)){if(t)return g.debug("refresh metadata error",t.message),e(t);n.updateMetadatas(i),e()}})})}(t,e)},m.prototype.send=function(t,e,n,r){var i=this,s=t;if(!(t=this.checkMetadatas(t))[0].length||t[1].length){if(t[1].length){var a=t[1].map(function(t){return t.topic});this.loadMetadataForTopics(a,function(o,a){if(o)return r(o);var u=a[1].error;return u?r(u):(i.updateMetadatas(a),(t=i.checkMetadatas(s))[1].length?(i.refreshBrokerMetadata(),r(new c.BrokerNotAvailableError("Could not find the leader"))):void i.sendToBroker(t[1].concat(t[0]),e,n,r))})}}else this.sendToBroker(o.flatten(t),e,n,r)},m.prototype.sendToBroker=function(t,e,n,r){var i="encodeFetchRequest"===e.name;for(var s in t=this.payloadsByLeader(t),i||(r=function(t,e){var n={},r=Object.keys(t).length;return function(t,i){if(t)return e&&e(t);o.merge(n,i),0==(r-=1)&&e&&e(null,n)}}(t,r)),t)if(t.hasOwnProperty(s)){var a=this.nextId(),u=this.brokerForLeader(s,i),f=null;if(u?u.isConnected()||(f="Broker socket is closed"+(u.socket.error?" - "+u.socket.error.message:"")):f="Could not find broker",f)return this.refreshBrokerMetadata(),r(new c.BrokerNotAvailableError("Broker not available: "+f),t[s]);if(i){if(u.socket.waiting)continue;u.socket.waiting=!0}var l=e(this.clientId,a,t[s]);0===n.requireAcks?(u.writeAsync(l),r(null,{result:"no ack"})):this.sendWhenReady(u,a,l,n,r)}},m.prototype.checkMetadatas=function(t){if(o.isEmpty(this.topicMetadata))return[[],t];var e=[[],[]];return t.forEach(function(t){this.hasMetadata(t.topic,t.partition)?e[0].push(t):e[1].push(t)}.bind(this)),e},m.prototype.hasMetadata=function(t,e){var n=this.brokerMetadata,r=this.leaderByPartition(t,e);return void 0!==r&&n[r]},m.prototype.updateMetadatas=function(t){for(var e in o.extend(this.topicMetadata,t[1].metadata),this.topicMetadata)this.topicMetadata.hasOwnProperty(e)&&(this.topicPartitions[e]=Object.keys(this.topicMetadata[e]).map(function(t){return parseInt(t,10)}))},m.prototype.removeTopicMetadata=function(t,e){t.forEach(function(t){this.topicMetadata[t]&&delete this.topicMetadata[t]}.bind(this)),e(null,t.length)},m.prototype.payloadsByLeader=function(t){return t.reduce(function(t,e){var n=this.leaderByPartition(e.topic,e.partition);return t[n]=t[n]||[],t[n].push(e),t}.bind(this),{})},m.prototype.leaderByPartition=function(t,e){var n=this.topicMetadata;return n[t]&&n[t][e]&&n[t][e].leader},m.prototype.brokerForLeader=function(t,e){var n=this.getBrokers(e);if(void 0===t){if(!o.isEmpty(n))return n[Object.keys(n)[0]];if(o.isEmpty(this.brokerMetadata))return;t=Object.keys(this.brokerMetadata)[0]}var r=o.find(this.brokerProfiles,{id:t});if(r)return n[r.host+":"+r.port]||this.setupBroker(r.host,r.port,e,n)},m.prototype.getBrokers=function(t){return t?this.longpollingBrokers:this.brokers},m.prototype.reconnectBroker=function(t){t.retrying=!1,t.error&&t.destroy();var e=this.getBrokers(t.longpolling);this.setupBroker(t.host,t.port,t.longpolling,e).socket.error=t.error},m.prototype.handleReceivedData=function(t){var e=t.buffer;if(e.length&&!(e.length<4)){var n=e.readUInt32BE(0)+4;if(e.length>=n){t.longpolling&&(t.waiting=!1);var r=e.shallowSlice(0,n),i=r.readUInt32BE(4);this.invokeResponseCallback(t,i,r),e.consume(n),t.buffer.length&&setImmediate(function(){this.handleReceivedData(t)}.bind(this))}}},m.prototype.invokeResponseCallback=function(t,e,n){var r=this.unqueueCallback(t,e);if(r){var[i,o]=r,s=i(n);s instanceof Error?o.call(this,s):o.call(this,null,s)}else g.error(`missing handlers for Correlation ID: ${e}`)},m.prototype.queueCallback=function(t,e,n){var r=t.socketId,i=this.cbqueue.get(r);i||(i=new Map,this.cbqueue.set(r,i)),i.set(e,n)},m.prototype.unqueueCallback=function(t,e){var n=t.socketId,r=this.cbqueue.get(n);try{if(!r)return null;if(!r.has(e))return null;var i=r.get(e);return r.delete(e),i}finally{r&&!r.size&&this.cbqueue.delete(n)}},m.prototype.clearCallbackQueue=function(t,e){var n=t.socketId,r=t.longpolling,i=this.cbqueue.get(n);i&&(r||i.forEach(function(t){(0,t[1])(e)}),this.cbqueue.delete(n))},t.exports=m},function(t,e,n){var r=n(76);e.operation=function(t){var n=e.timeouts(t);return new r(n,{forever:t&&t.forever,unref:t&&t.unref})},e.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in t)e[n]=t[n];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<e.retries;i++)r.push(this.createTimeout(i,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(i,e)),r.sort(function(t,e){return t-e}),r},e.createTimeout=function(t,e){var n=e.randomize?Math.random()+1:1,r=Math.round(n*e.minTimeout*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout)},e.wrap=function(t,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],t)"function"==typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var s=r[o],a=t[s];t[s]=function(){var r=e.operation(n),i=Array.prototype.slice.call(arguments),o=i.pop();i.push(function(t){r.retry(t)||(t&&(arguments[0]=r.mainError()),o.apply(this,arguments))}),r.attempt(function(){a.apply(t,i)})},t[s].options=n}}},function(t,e){function n(t,e){"boolean"==typeof e&&(e={forever:e}),this._timeouts=t,this._options=e||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;this._errors.push(t);var e=this._timeouts.shift();if(void 0===e){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),e=this._timeouts.shift()}var n=this,r=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),this._options.unref&&n._timeout.unref()),n._fn(n._attempts)},e);return this._options.unref&&r.unref(),!0},n.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._fn(this._attempts)},n.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)},n.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var t={},e=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,s=(t[o]||0)+1;t[o]=s,s>=n&&(e=i,n=s)}return e}},function(t,e,n){var r=function(){Error.captureStackTrace(this,this),this.message="The API is not supported by the receiving broker"};n(0).inherits(r,Error),r.prototype.name="ApiNotSupportedError",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="BrokerNotAvailableError",t.exports=r},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.topics=t,this.message="The topic(s) "+t.toString()+" do not exist"};n(0).inherits(r,Error),r.prototype.name="TopicsNotExistError",t.exports=r},function(t,e,n){var r=n(0),i=n(21),o=function(t,e){i.call(this,t,e),this.message=t};r.inherits(o,i),o.prototype.name="FailedToRegisterConsumerError",t.exports=o},function(t,e,n){"use strict";const r=n(0),i=n(21),o=function(t,e){i.apply(this,arguments)};r.inherits(o,i),o.prototype.name="InvalidConsumerOffsetError",t.exports=o},function(t,e,n){var r=function(t){Error.captureStackTrace(this,this),this.message=t};n(0).inherits(r,Error),r.prototype.name="FailedToRebalanceConsumerError",t.exports=r},function(t,e){t.exports=require("url")},function(t,e,n){"undefined"!=typeof process&&"renderer"===process.type?t.exports=n(85):t.exports=n(87)},function(t,e,n){function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(44)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),!n)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r)},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())},function(t,e){var n=1e3,r=60*n,i=60*r,o=24*i,s=365.25*o;function a(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,e){e=e||{};var u,c=typeof t;if("string"===c&&t.length>0)return function(t){if((t=String(t)).length>100)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var a=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"days":case"day":case"d":return a*o;case"hours":case"hour":case"hrs":case"hr":case"h":return a*i;case"minutes":case"minute":case"mins":case"min":case"m":return a*r;case"seconds":case"second":case"secs":case"sec":case"s":return a*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(t);if("number"===c&&!1===isNaN(t))return e.long?a(u=t,o,"day")||a(u,i,"hour")||a(u,r,"minute")||a(u,n,"second")||u+" ms":function(t){if(t>=o)return Math.round(t/o)+"d";if(t>=i)return Math.round(t/i)+"h";if(t>=r)return Math.round(t/r)+"m";if(t>=n)return Math.round(t/n)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},function(t,e,n){var r=n(88),i=n(0);(e=t.exports=n(44)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),r=0;r<n.length;r++)t.inspectOpts[n[r]]=e.inspectOpts[n[r]]},e.log=function(){return s.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var r=this.color,i="  [3"+r+";1m"+n+" [0m";t[0]=i+t[0].split("\n").join("\n"+i),t.push("[3"+r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(new Date).toUTCString()+" "+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=a,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):r.isatty(o)},e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter(function(t){return/^debug_/i.test(t)}).reduce(function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,function(t,e){return e.toUpperCase()}),r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[n]=r,t},{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&i.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===o?process.stdout:2===o?process.stderr:function(t){var e;switch(process.binding("tty_wrap").guessHandleType(t)){case"TTY":(e=new r.WriteStream(t))._type="tty",e._handle&&e._handle.unref&&e._handle.unref();break;case"FILE":var i=n(89);(e=new i.SyncWriteStream(t,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":var o=n(45);(e=new o.Socket({fd:t,readable:!1,writable:!0})).readable=!1,e.read=null,e._type="pipe",e._handle&&e._handle.unref&&e._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return e.fd=t,e._isStdio=!0,e}(o);function a(){return process.env.DEBUG}e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map(function(t){return t.trim()}).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(a())},function(t,e){t.exports=require("tty")},function(t,e){t.exports=require("fs")},function(t,e,n){var r=n(91),i=n(0),o=n(14).Buffer;function s(t){if(!(this instanceof s))return new s(t);if(this._bufs=[],this.length=0,"function"==typeof t){this._callback=t;var e=function(t){this._callback&&(this._callback(t),this._callback=null)}.bind(this);this.on("pipe",function(t){t.on("error",e)}),this.on("unpipe",function(t){t.removeListener("error",e)})}else this.append(t);r.call(this)}i.inherits(s,r),s.prototype._offset=function(t){var e,n=0,r=0;if(0===t)return[0,0];for(;r<this._bufs.length;r++){if(t<(e=n+this._bufs[r].length)||r==this._bufs.length-1)return[r,t-n];n=e}},s.prototype.append=function(t){var e=0;if(o.isBuffer(t))this._appendBuffer(t);else if(Array.isArray(t))for(;e<t.length;e++)this.append(t[e]);else if(t instanceof s)for(;e<t._bufs.length;e++)this.append(t._bufs[e]);else null!=t&&("number"==typeof t&&(t=t.toString()),this._appendBuffer(o.from(t)));return this},s.prototype._appendBuffer=function(t){this._bufs.push(t),this.length+=t.length},s.prototype._write=function(t,e,n){this._appendBuffer(t),"function"==typeof n&&n()},s.prototype._read=function(t){if(!this.length)return this.push(null);t=Math.min(t,this.length),this.push(this.slice(0,t)),this.consume(t)},s.prototype.end=function(t){r.prototype.end.call(this,t),this._callback&&(this._callback(null,this.slice()),this._callback=null)},s.prototype.get=function(t){return this.slice(t,t+1)[0]},s.prototype.slice=function(t,e){return"number"==typeof t&&t<0&&(t+=this.length),"number"==typeof e&&e<0&&(e+=this.length),this.copy(null,0,t,e)},s.prototype.copy=function(t,e,n,r){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof r||r>this.length)&&(r=this.length),n>=this.length)return t||o.alloc(0);if(r<=0)return t||o.alloc(0);var i,s,a=!!t,u=this._offset(n),c=r-n,f=c,l=a&&e||0,h=u[1];if(0===n&&r==this.length){if(!a)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(t,l),l+=this._bufs[s].length;return t}if(f<=this._bufs[u[0]].length-h)return a?this._bufs[u[0]].copy(t,e,h,h+f):this._bufs[u[0]].slice(h,h+f);for(a||(t=o.allocUnsafe(c)),s=u[0];s<this._bufs.length;s++){if(!(f>(i=this._bufs[s].length-h))){this._bufs[s].copy(t,l,h,h+f);break}this._bufs[s].copy(t,l,h),l+=i,f-=i,h&&(h=0)}return t},s.prototype.shallowSlice=function(t,e){t=t||0,e=e||this.length,t<0&&(t+=this.length),e<0&&(e+=this.length);var n=this._offset(t),r=this._offset(e),i=this._bufs.slice(n[0],r[0]+1);return 0==r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!=n[1]&&(i[0]=i[0].slice(n[1])),new s(i)},s.prototype.toString=function(t,e,n){return this.slice(e,n).toString(t)},s.prototype.consume=function(t){for(;this._bufs.length;){if(!(t>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(t),this.length-=t;break}t-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},s.prototype.duplicate=function(){for(var t=0,e=new s;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},s.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var t={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var e in t)!function(e){s.prototype[e]=function(n){return this.slice(n,n+t[e])[e](0)}}(e)}(),t.exports=s},function(t,e,n){t.exports=n(92).Duplex},function(t,e,n){var r=n(6);"disable"===process.env.READABLE_STREAM&&r?(t.exports=r,(e=t.exports=r.Readable).Readable=r.Readable,e.Writable=r.Writable,e.Duplex=r.Duplex,e.Transform=r.Transform,e.PassThrough=r.PassThrough,e.Stream=r):((e=t.exports=n(46)).Stream=r||e,e.Readable=e,e.Writable=n(49),e.Duplex=n(12),e.Transform=n(51),e.PassThrough=n(97))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(14).Buffer,i=n(0);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i,o=r.allocUnsafe(t>>>0),s=this.head,a=0;s;)e=s.data,n=o,i=a,e.copy(n,i),a+=s.data.length,s=s.next;return o},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e,n){t.exports=n(0).deprecate},function(t,e,n){"use strict";t.exports=o;var r=n(51),i=n(15);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(16),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e){t.exports=require("tls")},function(t,e,n){"use strict";var r=n(100),i=n(101);const o=n(0),s=n(4);var a=function(t,e,n,o){s.call(this),this.socket=t,this.idleConnectionMs=n,this.needAuthentication=!!o,this.authenticated=!1;var a=this,u=new r,c=new i(e);u.pipe(c),c.on("readable",function(){var t=null;for(a._lastWrite=Date.now();t=c.read();)a.socket.write(t)}),this.readableSocket=u};o.inherits(a,s),a.prototype.getReadyEventName=function(){const t=this.socket.longpolling?"-longpolling":"";return`${this.socket.addr}${t}-ready`},a.prototype.isConnected=function(){return!this.socket.destroyed&&!this.socket.closing&&!this.socket.error},a.prototype.isReady=function(){return null!=this.apiSupport&&(!this.needAuthentication||this.authenticated)},a.prototype.isIdle=function(){return Date.now()-this._lastWrite>=this.idleConnectionMs},a.prototype.write=function(t){this._lastWrite=Date.now(),this.socket.write(t)},a.prototype.writeAsync=function(t){this.readableSocket.push(t)},a.prototype.toString=function(){return`[${this.constructor.name} ${this.socket.addr} (connected: ${this.isConnected()}) (ready: ${this.isReady()}) (idle: ${this.isIdle()}) (needAuthentication: ${this.needAuthentication}) (authenticated: ${this.authenticated})]`},t.exports=a},function(t,e,n){"use strict";var r=n(0),i=n(6).Readable,o=function(t){i.call(this,t)};r.inherits(o,i),o.prototype._read=function(t){},t.exports=o},function(t,e,n){"use strict";var r=n(0),i=n(6).Transform,o=n(102),s=function(t){i.call(this,t),this.noAckBatchSize=t?t.noAckBatchSize:null,this.noAckBatchAge=t?t.noAckBatchAge:null,this._KafkaBuffer=new o(this.noAckBatchSize,this.noAckBatchAge)};r.inherits(s,i),s.prototype._transform=function(t,e,n){this._KafkaBuffer.addChunk(t,this._transformNext.bind(this)),n()},s.prototype._transformNext=function(){this.push(this._KafkaBuffer.getBatch()),this._KafkaBuffer.truncateBatch()},t.exports=s},function(t,e,n){"use strict";var r=function(t,e){this._batch_size=t,this._batch_age=e,this._batch_age_timer=null,this._buffer=null};r.prototype.addChunk=function(t,e){null==this._buffer?this._buffer=Buffer.from(t):this._buffer=Buffer.concat([this._buffer,t]),void 0!==e&&null!=e&&(null==this._batch_size||null==this._batch_age||this._buffer&&this._buffer.length>this._batch_size?e():this._setupTimer(e))},r.prototype._setupTimer=function(t){var e=this;null!=this._batch_age_timer&&clearTimeout(this._batch_age_timer),this._batch_age_timer=setTimeout(function(){e._buffer&&e._buffer.length>0&&t()},this._batch_age)},r.prototype.getBatch=function(){return this._buffer},r.prototype.truncateBatch=function(){this._buffer=null},t.exports=r},function(t,e,n){"use strict";const r=n(30),i=n(5)("kafka-node:ConsumerGroupRecovery"),o=n(10),s=n(3),a=n(23),u=n(25),c=n(24),f=n(26),l=n(27),h=n(28),p=n(31),d=n(52),g=n(20).BrokerNotAvailableError,y=["ETIMEDOUT","ECONNRESET","ESOCKETTIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EADDRNOTAVAIL"],m=[{errors:[a,c,f,h,p,d]},{errors:[u,g],handler:function(){delete this.client.coordinatorId}},{errors:[l],handler:function(){this.memberId=null}}];function b(t){this.consumerGroup=t,this.options=t.options}b.prototype.tryToRecoverFrom=function(t,e){i.debug("tryToRecoverFrom",e,t),this.consumerGroup.ready=!1,this.consumerGroup.stopHeartbeats();var n=!1,r=function(t){return!!(t&&t.code&&t.errno)&&s.includes(y,t.code)}(t)||m.some(function(e){return!!function(t,e){return e.some(function(e){return t instanceof e})}(t,e.errors)&&(e.handler&&e.handler.call(this.consumerGroup,t),!0)},this);r&&(n=this.getRetryTimeout(t)),r&&n?(i.debug("RECOVERY from %s: %s retrying in %s ms",e,this.consumerGroup.client.clientId,n,t),this.consumerGroup.scheduleReconnect(n)):this.consumerGroup.emit("error",t),this.lastError=t},b.prototype.clearError=function(){this.lastError=null},b.prototype.getRetryTimeout=function(t){o(t),this._timeouts||(this._timeouts=r.timeouts({retries:this.options.retries,factor:this.options.retryFactor,minTimeout:this.options.retryMinTimeout})),null!=this._retryIndex&&null!=this.lastError&&t.errorCode===this.lastError.errorCode||(this._retryIndex=0);var e=this._retryIndex++;return!(e>=this._timeouts.length)&&this._timeouts[e]},t.exports=b},function(t,e,n){"use strict";const r=n(31),i=n(5)("kafka-node:ConsumerGroupHeartbeat");t.exports=class{constructor(t,e){this.client=t,this.handler=e,this.pending=!0}send(t,e,n){this.client.sendHeartbeatRequest(t,e,n,t=>{this.canceled?i.debug("heartbeat yielded after being canceled",t):(this.pending=!1,this.handler(t))})}verifyResolved(){return!this.pending||(this.canceled=!0,this.pending=!1,this.handler(new r("Heartbeat timed out")),!1)}}},function(t,e,n){"use strict";t.exports={roundrobin:n(106),range:n(107)}},function(t,e,n){"use strict";var r=n(3),i=n(9).groupPartitionsByTopic,o=n(5)("kafka-node:Roundrobin"),s=0;t.exports={assign:function(t,e,n){o.debug("topicPartition: %j",t),o.debug("groupMembers: %j",e);var a=r(e).map("id"),u=a.value().sort();o.debug("members",u);var c=a.reduce(function(t,e){return t[e]=[],t},{}),f=e.reduce(function(t,e){return t[e.id]=e.subscription,t},{});o.debug("subscribers",f);var l=r(t).map(function(t,e){return t.map(function(t){return{topic:e,partition:t}})}).flatten().value();o.debug("round robin on topic partition pairs: ",l);var h,p,d,g=(p=-1,d=(h=u).length,{peek:function(){return h[(p+1)%d]},next:function(){return p=++p%d,h[p]}});l.forEach(function(t){for(var e=t.topic;!r.includes(f[g.peek()],e);)g.next();c[g.next()].push(t)}),n(null,r.map(c,function(t,e){var n={};return n.memberId=e,n.topicPartitions=i(t),n.version=s,n}))},name:"roundrobin",version:s}},function(t,e,n){"use strict";const r=n(5)("kafka-node:Range"),i=0,o=n(3),s=n(9).groupPartitionsByTopic;function a(t,e){return o.times(e,function(e){return{topic:t,partition:e}})}t.exports={assign:function(t,e,n){r.debug("topicPartition: %j",t);var u=o(e).map("id").reduce(function(t,e){return t[e]=[],t},{});const c=function(t){return t.reduce(function(t,e){return e.subscription.forEach(function(n){n in t?t[n].push(e.id):t[n]=[e.id]}),t},{})}(e);for(var f in c)if(c.hasOwnProperty(f)){r.debug("For topic %s",f),c[f].sort(),r.debug("   members: ",c[f]);var l=t[f].length;r.debug("   numberOfPartitionsForTopic",l);var h=c[f].length;r.debug("   numberOfMembersForTopic",h);var p=Math.floor(l/h);r.debug("   numberPartitionsPerMember",p);for(var d=l%h,g=a(f,l),y=0,m=h;y<m;y++){var b=p*y+Math.min(y,d),v=p+(y+1>d?0:1),w=u[c[f][y]];w.push.apply(w,g.slice(b,b+v))}}r.debug(u),n(null,function(t,e){return o.map(t,function(t,n){return{memberId:n,topicPartitions:s(t),version:e}})}(u,i))},name:"range",version:i}},function(t,e,n){"use strict";const r=n(6).Readable,i=n(54),o=n(3),s=n(5)("kafka-node:ConsumerGroupStream"),a=n(8),u=100,c=n(56),f={autoCommit:!0};function l(t){const e=[];return o.forEach(t,function(t,n){o.forEach(t,function(t,r){null!=t&&e.push({topic:n,partition:r,offset:t,metadata:"m"})})}),e}t.exports=class extends r{constructor(t,e){super({objectMode:!0,highWaterMark:t.highWaterMark||u}),o.defaultsDeep(t||{},f);const n=this;this.autoCommit=t.autoCommit,t.connectOnReady=!1,t.autoCommit=!1;const r=t.onRebalance;t.onRebalance=function(t,e){const i=o.once(function(t){t?e(t):n.commit(null,!0,e)});if("function"==typeof r)try{r(t,i)}catch(t){i(t)}else i()},this.consumerGroup=new i(t,e),this.messageBuffer=new c,this.commitQueue={},this.consumerGroup.on("error",t=>this.emit("error",t)),this.consumerGroup.on("connect",()=>this.emit("connect")),this.consumerGroup.on("message",t=>{this.messageBuffer.push(t),this.consumerGroup.pause()}),this.consumerGroup.on("done",t=>{setImmediate(()=>this.transmitMessages())})}emit(t,e){"data"===t&&this.autoCommit&&!o.isEmpty(e)&&setImmediate(()=>this.commit(e)),super.emit.apply(this,arguments)}_read(){s.debug("_read called"),this.consumerGroup.ready||(s.debug("consumerGroup is not ready, calling consumerGroup.connect"),this.consumerGroup.connect()),this._reading=!0,this.transmitMessages()}commit(t,e,n){if(null!=t&&-1!==t.offset&&o.set(this.commitQueue,[t.topic,t.partition],t.offset+1),this.committing&&!e)return s.debug("skipping committing"),n&&n(null);const r=l(this.commitQueue);this.commitQueued(r,e,n)}commitQueued(t,e,n){if(e||(this.committing=!0,this.autoCommitTimer=setTimeout(()=>{s.debug("setting committing to false"),this.committing=!1;const t=l(this.commitQueue);o.isEmpty(t)||this.commitQueued(t)},this.consumerGroup.options.autoCommitIntervalMs)),o.isEmpty(t))return s.debug("commit ignored. no commits to make."),n&&n(null);s.debug("committing",t),this.consumerGroup.sendOffsetCommitRequest(t,e=>{if(e)return s.error("commit request failed",e),n?n(e):void this.emit("error",e);for(let e of t)o.get(this.commitQueue,[e.topic,e.partition])===e.offset&&(this.commitQueue[e.topic][e.partition]=null);n&&n(null)})}transmitMessages(){for(;this._reading&&!this.messageBuffer.isEmpty();)this._reading=this.push(this.messageBuffer.shift());this.messageBuffer.isEmpty()&&this._reading&&this.consumerGroup.resume()}close(t){clearTimeout(this.autoCommitTimer),a.series([t=>{this.autoCommit?this.commit(null,!0,t):t(null)},t=>{this.consumerGroup.close(!1,()=>{t(),this.emit("close")})}],t||o.noop)}_destroy(){this.close()}}},function(t,e,n){"use strict";var r,i=n(0),o=n(3),s=n(4),a=n(5)("kafka-node:Consumer"),u=n(9),c={groupId:"kafka-node-group",autoCommit:!0,autoCommitIntervalMs:5e3,fetchMaxWaitMs:100,fetchMinBytes:1,fetchMaxBytes:1048576,fromOffset:!1,encoding:"utf8"},f=(r=0,function(){return r++});function l(t,e,n){if(s.call(this),!e)throw new Error("Must have payloads");u.validateTopics(e),this.fetchCount=0,this.client=t,this.options=o.defaults(n||{},c),this.ready=!1,this.paused=this.options.paused,this.id=f(),this.payloads=this.buildPayloads(e),this.connect(),this.encoding=this.options.encoding,this.options.groupId&&u.validateConfig("options.groupId",this.options.groupId)}function h(t,e,n){if(n&&n.length)for(var r=0,i=0,o=t.length;i<o;r++,i++)s(t[r])&&(e.push(t.splice(r,1)[0]),r--);function s(t){return n.some(function(e){return"string"==typeof e?t.topic===e:t.topic===e.topic&&t.partition===e.partition})}}i.inherits(l,s),l.prototype.buildPayloads=function(t){var e=this;return t.map(function(t){return"object"!=typeof t&&(t={topic:t}),t.partition=t.partition||0,t.offset=t.offset||0,t.maxBytes=e.options.fetchMaxBytes,t.metadata="m",t})},l.prototype.connect=function(){var t=this;this.ready=this.client.ready,this.ready&&this.init(),this.client.on("ready",function(){a.debug("consumer ready"),t.ready||t.init(),t.ready=!0}),this.client.on("error",function(e){a.error("client error %s",e.message),t.emit("error",e)}),this.client.on("close",function(){a.debug("connection closed")}),this.client.on("brokersChanged",function(){var e=t.payloads.map(function(t){return t.topic});this.refreshMetadata(e,function(e){if(e)return t.emit("error",e);t.fetch()})}),this.on("done",function(e){t.updateOffsets(e),setImmediate(function(){t.fetch()})})},l.prototype.init=function(){if(this.payloads.length){var t=this,e=t.payloads.map(function(t){return t.topic});t.client.topicExists(e,function(e){return e?t.emit("error",e):t.options.fromOffset?t.fetch():void t.fetchOffset(t.payloads,function(e,n){if(e)return t.emit("error",e);t.updateOffsets(n,!0),t.fetch()})})}},l.prototype.updateOffsets=function(t,e){this.payloads.forEach(function(n){if(!o.isEmpty(t[n.topic])&&void 0!==t[n.topic][n.partition]){var r=t[n.topic][n.partition];-1===r&&(r=0),n.offset=e?r:r+1}}),this.options.autoCommit&&!e&&this.autoCommit(!1,function(t){t&&a.debug("auto commit offset",t)})},l.prototype.commit=l.prototype.autoCommit=function(t,e){if(1===arguments.length&&(e=t,t=!1),this.committing&&!t)return e(null,"Offset committing");this.committing=!0,setTimeout(function(){this.committing=!1}.bind(this),this.options.autoCommitIntervalMs);var n=this.payloads;this.pausedPayloads&&(n=n.concat(this.pausedPayloads));var r=n.filter(function(t){return 0!==t.offset});r.length?this.client.sendOffsetCommitRequest(this.options.groupId,r,e):e(null,"Nothing to be committed")},l.prototype.fetch=function(){this.ready&&!this.paused&&this.client.sendFetchRequest(this,this.payloads,this.options.fetchMaxWaitMs,this.options.fetchMinBytes)},l.prototype.fetchOffset=function(t,e){this.client.sendOffsetFetchRequest(this.options.groupId,t,e)},l.prototype.addTopics=function(t,e,n){n=!!n;var r=this;if(this.ready){var i=t;"object"==typeof t[0]&&(i=t.map(function(t){return t.topic})),this.client.addTopics(i,function(i,o){if(i)return e&&e(i,o);var s=r.buildPayloads(t),a=!r.payloads.length;if(n)return s.forEach(function(t){r.payloads.push(t)}),a&&r.fetch(),void(e&&e(null,o));r.fetchOffset(s,function(t,n){if(t)return e(t);s.forEach(function(t){var e=n[t.topic][t.partition];-1===e&&(e=0),t.offset=e,r.payloads.push(t)}),a&&r.fetch(),e&&e(null,o)})})}else setTimeout(function(){r.addTopics(t,e,n)},100)},l.prototype.removeTopics=function(t,e){t="string"==typeof t?[t]:t,this.payloads=this.payloads.filter(function(e){return!~t.indexOf(e.topic)}),this.client.removeTopicMetadata(t,e)},l.prototype.close=function(t,e){this.ready=!1,"function"==typeof t&&(e=t,t=!1),t?this.commit(t,function(t){if(t)return e(t);this.client.close(e)}.bind(this)):this.client.close(e)},l.prototype.setOffset=function(t,e,n){this.payloads.every(function(r){return r.topic!==t||r.partition!=e||(r.offset=n,!1)})},l.prototype.pause=function(){this.paused=!0},l.prototype.resume=function(){this.paused=!1,this.fetch()},l.prototype.pauseTopics=function(t){this.pausedPayloads||(this.pausedPayloads=[]),h(this.payloads,this.pausedPayloads,t)},l.prototype.resumeTopics=function(t){this.pausedPayloads||(this.pausedPayloads=[]);var e=!this.payloads.length;h(this.pausedPayloads,this.payloads,t),(e=e&&this.payloads.length)&&this.fetch()},t.exports=l},function(t,e,n){"use strict";var r=n(0),i=n(3),o=n(6).Readable,s=n(5)("kafka-node:ConsumerStream");const a=n(56);var u=n(111),c=n(13),f={groupId:"kafka-node-group",autoCommit:!0,autoCommitMsgCount:100,autoCommitIntervalMs:5e3,fetchMaxWaitMs:100,fetchMinBytes:1,fetchMaxBytes:1048576,bufferRefetchThreshold:10,fromOffset:!1,encoding:"utf8"},l=function(t,e,n){if(n.objectMode=!0,this.highWaterMark=n.highWaterMark=n.highWaterMark||100,o.call(this,n),i.isEmpty(e))throw new Error("You must specify topics to subscribe to.");this.fetchInFlight=!1,this.fetchCount=0,this.client=t,this.options=i.defaults(n||{},f),this.ready=!1,this.payloads=this.buildPayloads(e),this.connect(),this.encoding=this.options.encoding,this.emittedMessages=0,this.messageBuffer=new a,this._reading=!1,this.close=this.close.bind(this)};r.inherits(l,o),l.prototype._emit=l.prototype.emit,l.prototype.emit=function(){"data"===arguments[0]&&this._emit("message",arguments[1]),this._emit.apply(this,arguments)},l.prototype._read=function(){this._reading=!0,this.transmitMessages()},l.prototype.handleMessage=function(t){this.messageBuffer.push(t),this.transmitMessages()},l.prototype.transmitMessages=function(){for(;this._reading&&!this.messageBuffer.isEmpty();)this._reading=this.push(this.messageBuffer.shift());this.messageBuffer.isEmpty()&&this._reading&&this.fetch()},l.prototype.fetch=function(){var t=this;if(t.ready&&!t.fetchInFlight){t.fetchInFlight=!0;var e=c.encodeFetchRequest(t.fetchMaxWaitMs,t.fetchMinBytes),n=c.decodeFetchResponse(t.decodeCallback.bind(t),t.maxTickMessages);t.client.send(t.payloads,e,n,function(e){e&&(Array.prototype.unshift.call(arguments,"error"),t.emit.apply(t,arguments)),t.messageBuffer.length<t.options.bufferRefetchThreshold&&setImmediate(function(){t.fetch()})})}},l.prototype.decodeCallback=function(t,e,n){if(t)switch(t.message){case"OffsetOutOfRange":return this.emit("offsetOutOfRange",t);case"NotLeaderForPartition":return this.emit("brokersChanged");default:return this.emit("error",t)}var r=this.options.encoding;"message"===e?("buffer"!==r&&n.value&&(n.value=n.value.toString(r)),this.handleMessage(n)):"done"===e&&(this.updateOffsets(n),this.fetchInFlight=!1)},l.prototype.connect=function(){var t=this;this.client.ready&&this.init(),this.client.on("ready",function(){s.debug("consumer ready"),t.ready||t.init()}),this.client.on("error",function(e){s.debug("client error %s",e.message),t.emit("error",e)}),this.client.on("close",function(){s.debug("connection closed")}),this.client.on("brokersChanged",function(){var e=t.payloads.map(function(t){return t.topic});this.refreshMetadata(e,function(e){if(e)return t.emit("error",e)})})},l.prototype.updateOffsets=function(t,e){this.payloads.forEach(function(n){if(!i.isEmpty(t[n.topic])&&void 0!==t[n.topic][n.partition]){var r=t[n.topic][n.partition];-1===r&&(r=0),n.offset=e?r:r+1}})},l.prototype.close=function(t,e){"function"==typeof t&&(e=t,t=!1);let n=this;t?n.commit(function(t){n.emit("error",t),n.client.close(e)}):n.client.close(e),this.ready=!1},l.prototype.init=function(){if(this.payloads.length){var t=this,e=t.payloads.map(function(t){return t.topic});t.client.topicExists(e,function(e){if(e)return t.emit("error",e);var n=function(){t.emit("readable"),t.ready=!0,t._reading&&setImmediate(function(){t.fetch()})};if(t.options.fromOffset)return n();t.client.sendOffsetFetchRequest(t.options.groupId,t.payloads,function(e,r){if(e)return t.emit("error",e);t.updateOffsets(r,!0),n()})})}},l.prototype.buildPayloads=function(t){var e=this;return t.map(function(t){return"object"!=typeof t&&(t={topic:t}),t.partition=t.partition||0,t.offset=t.offset||0,t.maxBytes=e.options.fetchMaxBytes,t.metadata="m",t})},l.prototype.createCommitStream=function(t){return t=t||this.options,t=i.defaults(t||{},this.options),new u(this.client,this.payloads,this.options.groupId,t)},t.exports=l},function(t,e,n){"use strict";const r=n(6).Transform,i=n(3);var o={autoCommit:!0,autoCommitIntervalMs:5e3,autoCommitMsgCount:100,passthrough:!1};t.exports=class extends r{constructor(t,e,n,r){r=r||{},super(i.defaults({highWaterMark:r.highWaterMark},{objectMode:!0})),this.options=i.defaults(r||{},o),this.client=t,this.topicPartionOffsets=this.buildTopicData(i.cloneDeep(e)),this.committing=!1,this.groupId=n,this.autoCommit=r.autoCommit,this.autoCommitMsgCount=r.autoCommitMsgCount,this.autoCommitIntervalMs=r.autoCommitIntervalMs,this.autoCommitIntervalTimer=null,this.autoCommit&&this.autoCommitIntervalMs&&(this.autoCommitIntervalTimer=setInterval(function(){this.commit()}.bind(this),this.autoCommitIntervalMs)),this.messageCount=0}on(t){"data"===t&&(this.options.passthrough=!0),super.on.apply(this,arguments)}pipe(){this.options.passthrough=!0,super.pipe.apply(this,arguments)}_transform(t,e,n){let r={},i=this;r[t.topic]={},r[t.topic][t.partition]=t.offset,i.updateOffsets(r),i.messageCount++;const o=function(){if(i.options.passthrough)return n(null,t);n()};if(i.autoCommit&&i.messageCount===i.autoCommitMsgCount)return i.messageCount=0,i.commit(o);o()}buildTopicData(t){return t.map(function(t){return"object"!=typeof t&&(t={topic:t}),t.partition=t.partition||0,t.offset=t.offset||0,t.metadata="m",t})}updateOffsets(t,e){this.topicPartionOffsets.forEach(function(n){if(!i.isEmpty(t[n.topic])&&void 0!==t[n.topic][n.partition]){var r=t[n.topic][n.partition];-1===r&&(r=0),n.offset=e?r:r+1}})}clearInterval(){clearInterval(this.autoCommitIntervalTimer)}commit(t){let e=this;if(t||(t=function(){}),e.committing)return t(null,"Commit in progress");let n=e.topicPartionOffsets.filter(function(t){return 0!==t.offset});n.length?(e.committing=!0,e.client.sendOffsetCommitRequest(e.groupId,n,function(){e.emit("commitComplete",{group:e.groupId,commits:n}),e.committing=!1,t.apply(this,arguments)})):t(null,"Nothing to be committed")}}},function(t,e,n){"use strict";var r=n(0),i=n(33);function o(t,e,n){i.call(this,t,e,i.PARTITIONER_TYPES.default,n)}r.inherits(o,i),o.PARTITIONER_TYPES=i.PARTITIONER_TYPES,t.exports=o},function(t,e,n){"use strict";const r=n(19),i=n(53),o=n(0),s=n(4);function a(t){if(s.call(this),!(t instanceof r))throw new Error("'Admin' only accepts 'KafkaClient' for its kafka client.");var e=this;this.client=t,this.RESOURCE_TYPES=i.RESOURCE_TYPES,this.ready=this.client.ready,this.client.on("ready",function(){e.ready=!0,e.emit("ready")}),this.client.once("connect",function(){e.emit("connect")}),this.client.on("error",function(t){e.emit("error",t)})}o.inherits(a,s),a.prototype.listGroups=function(t){this.ready?this.client.getListGroups(t):this.once("ready",()=>this.listGroups(t))},a.prototype.listTopics=function(t){this.ready?this.client.loadMetadataForTopics([],t):this.once("ready",()=>this.listTopics(t))},a.prototype.describeGroups=function(t,e){this.ready?this.client.getDescribeGroups(t,e):this.once("ready",()=>this.describeGroups(t,e))},a.prototype.createTopics=function(t,e){this.ready?this.client.createTopics(t,e):this.once("ready",()=>this.client.createTopics(t,e))},a.prototype.describeConfigs=function(t,e){this.ready?this.client.describeConfigs(t,e):this.once("ready",()=>this.describeConfigs(t,e))},t.exports=a},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r);function o(t){for(var e=arguments,n=1,r=e.length;n<r;n++)t=t.replace(/%s/,e[n]);return t}var s=Object.prototype.hasOwnProperty;function a(t,e,n,r){this.a=t,this.b=e,this.reason=n,this.path=r}function u(t){return t.type+(t.cls?"("+t.cls+(t.sub?" "+t.sub:"")+")":"")}var c="A is not equal to B",f="Set/Map missing key %s",l={checkProtoEql:!0,checkSubType:!0,plusZeroAndMinusZeroEqual:!0,collectAllFails:!1};function h(t,e,n,r){e[t]="boolean"!=typeof n[t]?r[t]:n[t]}function p(t,e,n,r){h("checkProtoEql",this,t=t||{},l),h("plusZeroAndMinusZeroEqual",this,t,l),h("checkSubType",this,t,l),h("collectAllFails",this,t,l),this.a=e,this.b=n,this._meet=t._meet||[],this.fails=t.fails||[],this.path=r||[]}function d(t){this.name="ShortcutError",this.message="fail fast",this.fail=t}function g(t,e){for(var n=t.keys(),r=n.next();!r.done;r=n.next()){var i=r.value,s=e.has(i);if(this.collectFail(!s,o(f,i)),s){var a=e.get(i);m(t.get(i),a,this)}}}function y(t,e){for(var n=t.keys(),r=n.next();!r.done;r=n.next()){var i=r.value,s=e.has(i);this.collectFail(!s,o(f,i))}}function m(t,e,n){return new p(n,t,e).check()}d.prototype=Object.create(Error.prototype),p.checkStrictEquality=function(t,e){this.collectFail(t!==e,c)},p.add=function(t,e,n,r){var i=Array.prototype.slice.call(arguments);r=i.pop(),p.prototype["_check_"+i.join("_")]=r},p.prototype={check:function(){try{this.check0()}catch(t){if(t instanceof d)return[t.fail];throw t}return this.fails},check0:function(){var t=this.a,e=this.b;if(t===e)return this.collectFail(0===t&&1/t!=1/e&&!this.plusZeroAndMinusZeroEqual,"+0 is not equal to -0");var n=i()(t),r=i()(e);if(n.type!==r.type||n.cls!==r.cls||n.sub!==r.sub)return this.collectFail(!0,o("A has type %s and B has type %s",u(n),u(r)));var s=n.type,a=n.type;n.cls&&(s+="_"+n.cls,a+="_"+n.cls),n.sub&&(a+="_"+n.sub),(this["_check_"+a]||this["_check_"+s]||this["_check_"+n.type]||this.defaultCheck).call(this,this.a,this.b)},collectFail:function(t,e,n){if(t){var r=new a(this.a,this.b,e,this.path);if(r.showReason=!!n,this.fails.push(r),!this.collectAllFails)throw new d(r)}},checkPlainObjectsEquality:function(t,e){for(var n,r=this._meet,i=this._meet.length;i--;){var a=r[i];if(a[0]===t&&a[1]===e)return}for(n in r.push([t,e]),e)s.call(e,n)&&(s.call(t,n)?this.checkPropertyEquality(n):this.collectFail(!0,o("%s has no key %s","A",n)));for(n in t)s.call(t,n)&&this.collectFail(!s.call(e,n),o("%s has no key %s","B",n));r.pop(),this.checkProtoEql&&this.collectFail(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e),"A and B have different prototypes",!0)},checkPropertyEquality:function(t){new p(this,this.a[t],this.b[t],this.path.concat([t])).check0()},defaultCheck:p.checkStrictEquality},p.add(i.a.NUMBER,function(t,e){this.collectFail(t!=t&&e==e||e!=e&&t==t||t!==e&&t==t&&e==e,c)}),[i.a.SYMBOL,i.a.BOOLEAN,i.a.STRING].forEach(function(t){p.add(t,p.checkStrictEquality)}),p.add(i.a.FUNCTION,function(t,e){this.collectFail(t.toString()!==e.toString(),"function A is not equal to B by source code value (via .toString call)"),this.checkPlainObjectsEquality(t,e)}),p.add(i.a.OBJECT,i.a.REGEXP,function(t,e){for(var n=["source","global","multiline","lastIndex","ignoreCase","sticky","unicode"];n.length;)this.checkPropertyEquality(n.shift());this.checkPlainObjectsEquality(t,e)}),p.add(i.a.OBJECT,i.a.DATE,function(t,e){this.collectFail(+t!=+e,c),this.checkPlainObjectsEquality(t,e)}),[i.a.NUMBER,i.a.BOOLEAN,i.a.STRING].forEach(function(t){p.add(i.a.OBJECT,t,function(t,e){this.collectFail(t.valueOf()!==e.valueOf(),"A wrapped value is not equal to B wrapped value"),this.checkPlainObjectsEquality(t,e)})}),p.add(i.a.OBJECT,function(t,e){this.checkPlainObjectsEquality(t,e)}),[i.a.ARRAY,i.a.ARGUMENTS,i.a.TYPED_ARRAY].forEach(function(t){p.add(i.a.OBJECT,t,function(t,e){this.checkPropertyEquality("length"),this.checkPlainObjectsEquality(t,e)})}),p.add(i.a.OBJECT,i.a.ARRAY_BUFFER,function(t,e){this.checkPropertyEquality("byteLength"),this.checkPlainObjectsEquality(t,e)}),p.add(i.a.OBJECT,i.a.ERROR,function(t,e){this.checkPropertyEquality("name"),this.checkPropertyEquality("message"),this.checkPlainObjectsEquality(t,e)}),p.add(i.a.OBJECT,i.a.BUFFER,function(t){this.checkPropertyEquality("length");for(var e=t.length;e--;)this.checkPropertyEquality(e)}),p.add(i.a.OBJECT,i.a.MAP,function(t,e){this._meet.push([t,e]),g.call(this,t,e),g.call(this,e,t),this._meet.pop(),this.checkPlainObjectsEquality(t,e)}),p.add(i.a.OBJECT,i.a.SET,function(t,e){this._meet.push([t,e]),y.call(this,t,e),y.call(this,e,t),this._meet.pop(),this.checkPlainObjectsEquality(t,e)}),m.EQ=p;var b=m,v=n(18),w=n.n(v),_=n(2),E=n(7);function k(t){return"symbol"==typeof t?t:String(t)}var I=w.a.functionName;var T={typeAdaptors:_.defaultTypeAdaptorStorage,getFormatter:function(t){return new w.a.Formatter(t||T)}};function O(t,e){return T.getFormatter(e).format(t)}function S(t){var e=T.getFormatter();return w.a.formatPlainObjectKey.call(e,t)}function C(t){if(Object(E.merge)(this,t),t.message||Object.defineProperty(this,"message",{get:function(){return this._message||(this._message=this.generateMessage(),this.generatedMessage=!0),this._message},configurable:!0,enumerable:!1}),Error.captureStackTrace)Error.captureStackTrace(this,this.stackStartFunction);else{var e=new Error;if(e.stack){var n=e.stack;if(this.stackStartFunction){var r=I(this.stackStartFunction),i=n.indexOf("\n"+r);if(i>=0){var o=n.indexOf("\n",i+1);n=n.substring(o+1)}}this.stack=n}}}var B="    ";function R(t){return B+t}function j(t){Object(E.merge)(this,t),t.message||Object.defineProperty(this,"message",{get:function(){return this._message||(this._message=this.generateMessage(),this.generatedMessage=!0),this._message}})}function A(t){this.obj=t,this.anyOne=!1,this.negate=!1,this.params={actual:t}}function x(){A.apply(this,arguments)}C.prototype=Object.create(Error.prototype,{name:{value:"AssertionError"},generateMessage:{value:function(){if(!this.operator&&this.previous)return this.previous.message;var t=O(this.actual),e="expected"in this?" "+O(this.expected):"",n="details"in this&&this.details?" ("+this.details+")":"",r=this.previous?"\n"+this.previous.message.split("\n").map(R).join("\n"):"";return"expected "+t+(this.negate?" not ":" ")+this.operator+e+n+r}}}),j.prototype={generateMessage:C.prototype.generateMessage},A.prototype={constructor:A,assert:function(t){if(t)return this;var e=this.params;throw"obj"in e&&!("actual"in e)?e.actual=e.obj:"obj"in e||"actual"in e||(e.actual=this.obj),e.stackStartFunction=e.stackStartFunction||this.assert,e.negate=this.negate,e.assertion=this,this.light?new j(e):new C(e)},fail:function(){return this.assert(!1)},assertZeroArguments:function(t){if(0!==t.length)throw new TypeError("This assertion does not expect any arguments. You may need to check your code")}},x.prototype.then=function(t,e){return this.obj.then(t,e)},A.add=function(t,e){Object.defineProperty(A.prototype,t,{enumerable:!0,configurable:!0,value:function(){var n=new A(this.obj,this,t);n.anyOne=this.anyOne,n.onlyThis=this.onlyThis,n.light=!0;try{e.apply(n,arguments)}catch(t){if(t instanceof C||t instanceof j){if(this.negate)return this.obj=n.obj,this.negate=!1,this;n!==t.assertion&&(n.params.previous=t),n.negate=!1,n.light=!1,n.fail()}throw t}return this.negate&&(n.negate=!0,n.params.details="false negative fail",n.light=!1,n.fail()),this.params.operator||(this.params=n.params),this.obj=n.obj,this.negate=!1,this}}),Object.defineProperty(x.prototype,t,{enumerable:!0,configurable:!0,value:function(){var e=arguments;return this.obj=this.obj.then(function(n){return n[t].apply(n,e)}),this}})},A.addChain=function(t,e){e=e||function(){},Object.defineProperty(A.prototype,t,{get:function(){return e.call(this),this},enumerable:!0}),Object.defineProperty(x.prototype,t,{enumerable:!0,configurable:!0,get:function(){return this.obj=this.obj.then(function(e){return e[t]}),this}})},A.alias=function(t,e){var n=Object.getOwnPropertyDescriptor(A.prototype,t);if(!n)throw new Error("Alias "+t+" -> "+e+" could not be created as "+t+" not defined");Object.defineProperty(A.prototype,e,n);var r=Object.getOwnPropertyDescriptor(x.prototype,t);r&&Object.defineProperty(x.prototype,e,r)},A.addChain("not",function(){this.negate=!this.negate}),A.addChain("any",function(){this.anyOne=!0}),A.addChain("only",function(){this.onlyThis=!0});var M=Array.prototype.slice,N=q;function P(t,e,n,r,i){var o=new A(t);o.params={operator:r,expected:e,message:n,stackStartFunction:i||P},o.fail()}function q(t,e){t||P(t,!0,e,"==",N.ok)}function L(t,e){return!(!t||!e)&&("[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e||!0===e.call({},t))}function F(t,e,n,r){var i;"string"==typeof n&&(r=n,n=null);try{e()}catch(t){i=t}if(r=(n&&n.name?" ("+n.name+")":".")+(r?" "+r:"."),t&&!i&&P(i,n,"Missing expected exception"+r),!t&&L(i,n)&&P(i,n,"Got unwanted exception"+r),t&&i&&n&&!L(i,n)||!t&&i)throw i}N.fail=P,N.ok=q,N.equal=function(t,e,n){t!=e&&P(t,e,n,"==",N.equal)},N.notEqual=function(t,e,n){t==e&&P(t,e,n,"!=",N.notEqual)},N.deepEqual=function(t,e,n){0!==b(t,e).length&&P(t,e,n,"deepEqual",N.deepEqual)},N.notDeepEqual=function(t,e,n){b(t,e).result&&P(t,e,n,"notDeepEqual",N.notDeepEqual)},N.strictEqual=function(t,e,n){t!==e&&P(t,e,n,"===",N.strictEqual)},N.notStrictEqual=function(t,e,n){t===e&&P(t,e,n,"!==",N.notStrictEqual)},N.throws=function(){F.apply(this,[!0].concat(M.call(arguments)))},N.doesNotThrow=function(){F.apply(this,[!1].concat(M.call(arguments)))},N.ifError=function(t){if(t)throw t};var D=Array.prototype.slice;function U(t){return new A(t)}U.AssertionError=C,U.Assertion=A,U.modules={format:w.a,type:i.a,equal:b},U.format=O,U.config=T,U.extend=function(t,e){t=t||"should",e=e||Object.prototype;var n=Object.getOwnPropertyDescriptor(e,t);return Object.defineProperty(e,t,{set:function(){},get:function(){return U((t=this)instanceof Number||t instanceof String||t instanceof Boolean?this.valueOf():this);var t},configurable:!0}),{name:t,descriptor:n,proto:e}},U.noConflict=function(t){return(t=t||U._prevShould)&&(delete t.proto[t.name],t.descriptor&&Object.defineProperty(t.proto,t.name,t.descriptor)),U},U.use=function(t){return t(U,U.Assertion),this},U.use(function(t){var e=t.format;Object(E.merge)(t,N),t.exist=t.exists=function(n,r){if(null==n)throw new C({message:r||"expected "+e(n)+" to exist",stackStartFunction:t.exist})},t.not={},t.not.exist=t.not.exists=function(n,r){if(null!=n)throw new C({message:r||"expected "+e(n)+" to not exist",stackStartFunction:t.not.exist})}}).use(function(t,e){["an","of","a","and","be","been","has","have","with","is","which","the","it"].forEach(function(t){e.addChain(t)})}).use(function(t,e){e.add("true",function(t){this.is.exactly(!0,t)}),e.alias("true","True"),e.add("false",function(t){this.is.exactly(!1,t)}),e.alias("false","False"),e.add("ok",function(){this.assertZeroArguments(arguments),this.params={operator:"to be truthy"},this.assert(this.obj)})}).use(function(t,e){e.add("NaN",function(){this.assertZeroArguments(arguments),this.params={operator:"to be NaN"},this.assert(this.obj!=this.obj)}),e.add("Infinity",function(){this.assertZeroArguments(arguments),this.params={operator:"to be Infinity"},this.is.a.Number().and.not.a.NaN().and.assert(!isFinite(this.obj))}),e.add("within",function(t,e,n){this.params={operator:"to be within "+t+".."+e,message:n},this.assert(this.obj>=t&&this.obj<=e)}),e.add("approximately",function(t,e,n){this.params={operator:"to be approximately "+t+" ±"+e,message:n},this.assert(Math.abs(this.obj-t)<=e)}),e.add("above",function(t,e){this.params={operator:"to be above "+t,message:e},this.assert(this.obj>t)}),e.add("below",function(t,e){this.params={operator:"to be below "+t,message:e},this.assert(this.obj<t)}),e.alias("above","greaterThan"),e.alias("below","lessThan"),e.add("aboveOrEqual",function(t,e){this.params={operator:"to be above or equal "+t,message:e},this.assert(this.obj>=t)}),e.add("belowOrEqual",function(t,e){this.params={operator:"to be below or equal "+t,message:e},this.assert(this.obj<=t)}),e.alias("aboveOrEqual","greaterThanOrEqual"),e.alias("belowOrEqual","lessThanOrEqual")}).use(function(t,e){function n(n,r,i){e.add(n,function(e){1!==arguments.length?e=Array.prototype.slice.call(arguments):t(e).be.Array(),this.params={operator:r,expected:e};var n=this.obj,o=!1;Object(_.forEach)(e,function(e){try{return t(e)[i](n),o=!0,!1}catch(e){if(e instanceof t.AssertionError)return;throw e}}),this.assert(o)})}e.add("eql",function(e,n){this.params={operator:"to equal",expected:e,message:n};var r=this.obj,o=b(this.obj,e,t.config);this.params.details=o.map(function(t){return i=r,o=e,(((n=t).path.length>0?"at "+n.path.map(S).join(" -> "):"")+(n.a===i?"":", A has "+O(n.a))+(n.b===o?"":" and B has "+O(n.b))+(n.showReason?" because "+n.reason:"")).trim();var n,i,o}).join(", "),this.params.showDiff=0===b(i()(r),i()(e)).length,this.assert(0===o.length)}),e.add("equal",function(t,e){this.params={operator:"to be",expected:t,message:e},this.params.showDiff=0===b(i()(this.obj),i()(t)).length,this.assert(t===this.obj)}),e.alias("equal","equals"),e.alias("equal","exactly"),e.alias("eql","eqls"),e.alias("eql","deepEqual"),n("equalOneOf","to be equals one of","equal"),n("oneOf","to be one of","eql")}).use(function(t,e){e.add("Number",function(){this.assertZeroArguments(arguments),this.params={operator:"to be a number"},this.have.type("number")}),e.add("arguments",function(){this.assertZeroArguments(arguments),this.params={operator:"to be arguments"},this.have.class("Arguments")}),e.alias("arguments","Arguments"),e.add("type",function(e,n){this.params={operator:"to have type "+e,message:n},t(typeof this.obj).be.exactly(e)}),e.add("instanceof",function(t,e){this.params={operator:"to be an instance of "+I(t),message:e},this.assert(Object(this.obj)instanceof t)}),e.alias("instanceof","instanceOf"),e.add("Function",function(){this.assertZeroArguments(arguments),this.params={operator:"to be a function"},this.have.type("function")}),e.add("Object",function(){this.assertZeroArguments(arguments),this.params={operator:"to be an object"},this.is.not.null().and.have.type("object")}),e.add("String",function(){this.assertZeroArguments(arguments),this.params={operator:"to be a string"},this.have.type("string")}),e.add("Array",function(){this.assertZeroArguments(arguments),this.params={operator:"to be an array"},this.have.class("Array")}),e.add("Boolean",function(){this.assertZeroArguments(arguments),this.params={operator:"to be a boolean"},this.have.type("boolean")}),e.add("Error",function(){this.assertZeroArguments(arguments),this.params={operator:"to be an error"},this.have.instanceOf(Error)}),e.add("Date",function(){this.assertZeroArguments(arguments),this.params={operator:"to be a date"},this.have.instanceOf(Date)}),e.add("null",function(){this.assertZeroArguments(arguments),this.params={operator:"to be null"},this.assert(null===this.obj)}),e.alias("null","Null"),e.add("class",function(t){this.params={operator:"to have [[Class]] "+t},this.assert(Object.prototype.toString.call(this.obj)==="[object "+t+"]")}),e.alias("class","Class"),e.add("undefined",function(){this.assertZeroArguments(arguments),this.params={operator:"to be undefined"},this.assert(void 0===this.obj)}),e.alias("undefined","Undefined"),e.add("iterable",function(){this.assertZeroArguments(arguments),this.params={operator:"to be iterable"},t(this.obj).have.property(Symbol.iterator).which.is.a.Function()}),e.add("iterator",function(){this.assertZeroArguments(arguments),this.params={operator:"to be iterator"},t(this.obj).have.property("next").which.is.a.Function()}),e.add("generator",function(){this.assertZeroArguments(arguments),this.params={operator:"to be generator"},t(this.obj).be.iterable.and.iterator.and.it.is.equal(this.obj[Symbol.iterator]())})}).use(function(t,e){e.add("startWith",function(e,n){this.params={operator:"to start with "+t.format(e),message:n},this.assert(0===this.obj.indexOf(e))}),e.add("endWith",function(e,n){this.params={operator:"to end with "+t.format(e),message:n},this.assert(this.obj.indexOf(e,this.obj.length-e.length)>=0)})}).use(function(t,e){var n=t.format;e.add("propertyWithDescriptor",function(e,r){this.params={actual:this.obj,operator:"to have own property with descriptor "+n(r)};var i=this.obj;this.have.ownProperty(e),t(Object.getOwnPropertyDescriptor(Object(i),e)).have.properties(r)}),e.add("property",function(t,e){if(t=k(t),arguments.length>1){var n={};n[t]=e,this.have.properties(n)}else this.have.properties(t);this.obj=this.obj[t]}),e.add("properties",function(t){var e={};arguments.length>1?t=D.call(arguments):Array.isArray(t)||("string"==typeof t||"symbol"==typeof t?t=[t]:(e=t,t=Object.keys(t)));var r=Object(this.obj),i=[];t.forEach(function(t){t in r||i.push(S(t))});var o=i;0===o.length?o=t.map(S):this.anyOne&&(o=t.filter(function(t){return i.indexOf(S(t))<0}).map(S));var s=(1===o.length?"to have property ":"to have "+(this.anyOne?"any of ":"")+"properties ")+o.join(", ");this.params={obj:this.obj,operator:s},this.assert(0===i.length||this.anyOne&&i.length!=t.length);var a=Object.keys(e);if(a.length){var u=[];o=[],a.forEach(function(t){var i=e[t];0!==b(r[t],i).length?u.push(S(t)+" of "+n(i)+" (got "+n(r[t])+")"):o.push(S(t)+" of "+n(i))}),(0!==u.length&&!this.anyOne||this.anyOne&&0===o.length)&&(o=u),s=(1===o.length?"to have property ":"to have "+(this.anyOne?"any of ":"")+"properties ")+o.join(", "),this.params={obj:this.obj,operator:s},this.assert(0===u.length||this.anyOne&&u.length!=a.length)}}),e.add("length",function(t,e){this.have.property("length",t,e)}),e.alias("length","lengthOf"),e.add("ownProperty",function(t,e){t=k(t),this.params={actual:this.obj,operator:"to have own property "+S(t),message:e},this.assert(Object(E.hasOwnProperty)(this.obj,t)),this.obj=this.obj[t]}),e.alias("ownProperty","hasOwnProperty"),e.add("empty",function(){this.params={operator:"to be empty"},this.assert(Object(_.isEmpty)(this.obj))},!0),e.add("keys",function(e){e=D.call(arguments);var n=Object(this.obj),r=e.filter(function(t){return!Object(_.has)(n,t)}),i="to have "+(this.onlyThis?"only ":"")+(1===e.length?"key ":"keys ");this.params={operator:i+e.join(", ")},r.length>0&&(this.params.operator+="\n\tmissing keys: "+r.join(", ")),this.assert(0===r.length),this.onlyThis&&t(n).have.size(e.length)}),e.add("key",function(t){this.have.keys(t),this.obj=Object(_.get)(this.obj,t)}),e.add("value",function(t,e){this.have.key(t).which.is.eql(e)}),e.add("size",function(e){this.params={operator:"to have size "+e},t(Object(_.size)(this.obj)).be.exactly(e)}),e.add("propertyByPath",function(e){var n=(e=D.call(arguments)).map(S);e=e.map(k);for(var r,i=t(Object(this.obj)),o=[];e.length;)r=e.shift(),this.params={operator:"to have property by path "+n.join(", ")+" - failed on "+S(r)},i=i.have.property(r),o.push(r);this.params={obj:this.obj,operator:"to have property by path "+n.join(", ")},this.obj=i.obj})}).use(function(t,e){var n=t.format;e.add("throw",function(e,r){var i=this.obj,o={},s="",a=!1;if(Object(E.isGeneratorFunction)(i))return t(i()).throw(e,r);if(Object(E.isIterator)(i))return t(i.next.bind(i)).throw(e,r);this.is.a.Function();var u=!0;try{i()}catch(t){a=!0,o=t}if(a)if(e){if("string"==typeof e)u=e==o.message;else if(e instanceof RegExp)u=e.test(o.message);else if("function"==typeof e)u=o instanceof e;else if(null!=e)try{t(o).match(e)}catch(e){if(!(e instanceof t.AssertionError))throw e;s=": "+e.message,u=!1}if(u){if("function"==typeof e&&r)try{t(o).match(r)}catch(e){if(!(e instanceof t.AssertionError))throw e;s=": "+e.message,u=!1}}else"string"==typeof e||e instanceof RegExp?s=" with a message matching "+n(e)+", but got '"+o.message+"'":"function"==typeof e&&(s=" of type "+I(e)+", but got "+I(o.constructor))}else s=" (got "+n(o)+")";this.params={operator:"to throw exception"+s},this.assert(a),this.assert(u)}),e.alias("throw","throwError")}).use(function(t,e){var n=t.format;e.add("match",function(e,r){if(this.params={operator:"to match "+n(e),message:r},0!==b(this.obj,e).length)if(e instanceof RegExp)if("string"==typeof this.obj)this.assert(e.exec(this.obj));else if(null!=this.obj&&"object"==typeof this.obj){var i=[],o=[];Object(_.forEach)(this.obj,function(t,r){e.exec(t)?o.push(S(r)):i.push(S(r)+" ("+n(t)+")")},this),i.length&&(this.params.operator+="\n    not matched properties: "+i.join(", ")),o.length&&(this.params.operator+="\n    matched properties: "+o.join(", ")),this.assert(0===i.length)}else this.assert(!1);else if("function"==typeof e){var s;"boolean"==typeof(s=e(this.obj))&&this.assert(s)}else"object"==typeof this.obj&&null!=this.obj&&(function(t){if("object"==typeof t&&null!==t){var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return!1}(e)||Array.isArray(e))?(i=[],o=[],Object(_.forEach)(e,function(e,r){try{t(this.obj).have.property(r).which.match(e),o.push(S(r))}catch(e){if(!(e instanceof t.AssertionError))throw e;i.push(S(r)+" ("+n(this.obj[r])+")")}},this),i.length&&(this.params.operator+="\n    not matched properties: "+i.join(", ")),o.length&&(this.params.operator+="\n    matched properties: "+o.join(", ")),this.assert(0===i.length)):this.assert(!1)}),e.add("matchEach",function(e,r){this.params={operator:"to match each "+n(e),message:r},Object(_.forEach)(this.obj,function(n){t(n).match(e)},this)}),e.add("matchAny",function(e,r){this.params={operator:"to match any "+n(e),message:r},this.assert(Object(_.some)(this.obj,function(n){try{return t(n).match(e),!0}catch(e){if(e instanceof t.AssertionError)return!1;throw e}}))}),e.alias("matchAny","matchSome"),e.alias("matchEach","matchEvery")}).use(function(t,e){var n=t.format;e.add("containEql",function(e){this.params={operator:"to contain "+n(e)},this.is.not.null().and.not.undefined();var r=this.obj;"string"==typeof r?this.assert(r.indexOf(String(e))>=0):Object(_.isIterable)(r)?this.assert(Object(_.some)(r,function(t){return 0===b(t,e).length})):Object(_.forEach)(e,function(e,n){t(r).have.value(n,e)},this)}),e.add("containDeepOrdered",function(e){this.params={operator:"to contain "+n(e)};var r=this.obj;if("string"==typeof r)this.is.equal(String(e));else if(Object(_.isIterable)(r)&&Object(_.isIterable)(e)){for(var i=Object(_.iterator)(r),o=Object(_.iterator)(e),s=i.next(),a=o.next();!s.done&&!a.done;){try{t(s.value[1]).containDeepOrdered(a.value[1]),a=o.next()}catch(e){if(!(e instanceof t.AssertionError))throw e}s=i.next()}this.assert(a.done)}else null!=r&&"object"==typeof r&&null!=e&&"object"==typeof e?(Object(_.forEach)(e,function(e,n){t(r[n]).containDeepOrdered(e)}),Object(_.isEmpty)(e)&&this.eql(e)):this.eql(e)}),e.add("containDeep",function(e){this.params={operator:"to contain "+n(e)};var r=this.obj;if("string"==typeof r&&"string"==typeof e)this.is.equal(String(e));else if(Object(_.isIterable)(r)&&Object(_.isIterable)(e)){var i={};Object(_.forEach)(e,function(e){this.assert(Object(_.some)(r,function(n,r){if(r in i)return!1;try{return t(n).containDeep(e),i[r]=!0,!0}catch(e){if(e instanceof t.AssertionError)return!1;throw e}}))},this)}else null!=r&&null!=e&&"object"==typeof r&&"object"==typeof e?(Object(_.forEach)(e,function(e,n){t(r[n]).containDeep(e)}),Object(_.isEmpty)(e)&&this.eql(e)):this.eql(e)})}).use(function(t,e){e.add("Promise",function(){this.assertZeroArguments(arguments),this.params={operator:"to be promise"};var e=this.obj;t(e).have.property("then").which.is.a.Function()}),e.prototype.fulfilled=function(){this.assertZeroArguments(arguments),this.params={operator:"to be fulfilled"},t(this.obj).be.a.Promise();var e=this;return this.obj.then(function(t){return e.negate&&e.fail(),t},function(n){return e.negate||(e.params.operator+=", but it was rejected with "+t.format(n),e.fail()),n})},e.prototype.resolved=e.prototype.fulfilled,e.prototype.rejected=function(){this.assertZeroArguments(arguments),this.params={operator:"to be rejected"},t(this.obj).be.a.Promise();var e=this;return this.obj.then(function(n){return e.negate||(e.params.operator+=", but it was fulfilled",0!=arguments.length&&(e.params.operator+=" with "+t.format(n)),e.fail()),n},function(t){return e.negate&&e.fail(),t})},e.prototype.fulfilledWith=function(e){this.params={operator:"to be fulfilled with "+t.format(e)},t(this.obj).be.a.Promise();var n=this;return this.obj.then(function(r){return n.negate&&n.fail(),t(r).eql(e),r},function(e){return n.negate||(n.params.operator+=", but it was rejected with "+t.format(e),n.fail()),e})},e.prototype.resolvedWith=e.prototype.fulfilledWith,e.prototype.rejectedWith=function(e,n){this.params={operator:"to be rejected"},t(this.obj).be.a.Promise();var r=this;return this.obj.then(function(t){return r.negate||r.fail(),t},function(i){r.negate&&r.fail();var o=!0,s="";if("string"==typeof e)o=e===i.message;else if(e instanceof RegExp)o=e.test(i.message);else if("function"==typeof e)o=i instanceof e;else if(null!==e&&"object"==typeof e)try{t(i).match(e)}catch(e){if(!(e instanceof t.AssertionError))throw e;s=": "+e.message,o=!1}if(o){if("function"==typeof e&&n)try{t(i).match(n)}catch(e){if(!(e instanceof t.AssertionError))throw e;s=": "+e.message,o=!1}}else"string"==typeof e||e instanceof RegExp?s=" with a message matching "+t.format(e)+", but got '"+i.message+"'":"function"==typeof e&&(s=" of type "+I(e)+", but got "+I(i.constructor));return r.params.operator+=s,r.assert(o),i})},Object.defineProperty(e.prototype,"finally",{get:function(){t(this.obj).be.a.Promise();var e=this;return new x(this.obj.then(function(n){var r=t(n);return r.negate=e.negate,r.anyOne=e.anyOne,r}))}}),e.alias("finally","eventually")});var G=Object.prototype,z="object"==typeof global&&global&&global.Object===Object&&global,V="object"==typeof self&&self&&self.Object===Object&&self,W=z||V||Function("return this")();try{var $=U.extend("should",G);U._prevShould=$,Object.defineProperty(W,"should",{enumerable:!1,configurable:!0,value:U})}catch(t){}e.default=U}]));